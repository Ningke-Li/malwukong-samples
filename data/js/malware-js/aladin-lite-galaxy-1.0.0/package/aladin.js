/*! For license information please see aladin.js.LICENSE.txt */
(()=>{var e,t,n,a,o,i,r={338:function(e){e.exports=function(){"use strict";function e(e){var t,n,a=document,o=e.container||a.createElement("div"),i=o.style,r=navigator.userAgent,s=~r.indexOf("Firefox")&&~r.indexOf("Mobile"),l=e.debounceWaitMs||0,c=e.preventSubmit||!1,u=e.disableAutoSelect||!1,d=s?"input":"keyup",f=[],p="",h=2,m=e.showOnFocus,v=0;if(void 0!==e.minLength&&(h=e.minLength),!e.input)throw new Error("input undefined");var _=e.input;function y(){var e=o.parentNode;e&&e.removeChild(o)}function x(){n&&window.clearTimeout(n)}function g(){o.parentNode||a.body.appendChild(o)}function b(){return!!o.parentNode}function w(){v++,f=[],p="",t=void 0,y()}function C(){if(b()){i.height="auto",i.width=_.offsetWidth+"px";var t,n=0;r(),r(),e.customize&&t&&e.customize(_,t,o,n)}function r(){var e=a.documentElement,o=e.clientTop||a.body.clientTop||0,r=e.clientLeft||a.body.clientLeft||0,s=window.pageYOffset||e.scrollTop,l=window.pageXOffset||e.scrollLeft,c=(t=_.getBoundingClientRect()).top+_.offsetHeight+s-o,u=t.left+l-r;i.top=c+"px",i.left=u+"px",(n=window.innerHeight-(t.top+_.offsetHeight))<0&&(n=0),i.top=c+"px",i.bottom="",i.left=u+"px",i.maxHeight=n+"px"}}function A(){for(;o.firstChild;)o.removeChild(o.firstChild);var n=function(e,t){var n=a.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var i=function(e,t){var n=a.createElement("div");return n.textContent=e,n};e.renderGroup&&(i=e.renderGroup);var r=a.createDocumentFragment(),s="#9?$";if(f.forEach((function(a){if(a.group&&a.group!==s){s=a.group;var o=i(a.group,p);o&&(o.className+=" group",r.appendChild(o))}var l=n(a,p);l&&(l.addEventListener("click",(function(t){e.onSelect(a,_),w(),t.preventDefault(),t.stopPropagation()})),a===t&&(l.className+=" selected"),r.appendChild(l))})),o.appendChild(r),f.length<1){if(!e.emptyMsg)return void w();var l=a.createElement("div");l.className="empty",l.textContent=e.emptyMsg,o.appendChild(l)}g(),C(),O()}function I(){b()&&A()}function S(){I()}function k(e){e.target!==o?I():e.preventDefault()}function T(t){for(var n=t.which||t.keyCode||0,a=0,o=e.keysToIgnore||[38,13,27,39,37,16,17,18,20,91,9];a<o.length;a++)if(n===o[a])return;n>=112&&n<=123&&!e.keysToIgnore||40===n&&b()||z(0)}function O(){var e=o.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<o.scrollTop)o.scrollTop=t.offsetTop;else{var a=t.offsetTop+t.offsetHeight,i=o.scrollTop+o.offsetHeight;a>i&&(o.scrollTop+=a-i)}}}function L(){if(f.length<1)t=void 0;else if(t===f[0])t=f[f.length-1];else for(var e=f.length-1;e>0;e--)if(t===f[e]||1===e){t=f[e-1];break}}function D(){if(f.length<1&&(t=void 0),t&&t!==f[f.length-1]){for(var e=0;e<f.length-1;e++)if(t===f[e]){t=f[e+1];break}}else t=f[0]}function M(n){var a=n.which||n.keyCode||0;if(38===a||40===a||27===a){var o=b();if(27===a)w();else{if(!o||f.length<1)return;38===a?L():D(),A()}return n.preventDefault(),void(o&&n.stopPropagation())}13===a&&(t&&(e.onSelect(t,_),w()),c&&n.preventDefault())}function E(){m&&z(1)}function z(a){var o=++v,i=_.value,r=_.selectionStart||0;i.length>=h||1===a?(x(),n=window.setTimeout((function(){e.fetch(i,(function(e){v===o&&e&&(p=i,t=(f=e).length<1||u?void 0:f[0],A())}),a,r)}),0===a?l:0)):w()}function R(){setTimeout((function(){a.activeElement!==_&&w()}),200)}function P(){_.removeEventListener("focus",E),_.removeEventListener("keydown",M),_.removeEventListener(d,T),_.removeEventListener("blur",R),window.removeEventListener("resize",S),a.removeEventListener("scroll",k,!0),x(),w()}return o.className="autocomplete "+(e.className||""),i.position="absolute",o.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),o.addEventListener("focus",(function(){return _.focus()})),_.addEventListener("keydown",M),_.addEventListener(d,T),_.addEventListener("blur",R),_.addEventListener("focus",E),window.addEventListener("resize",S),a.addEventListener("scroll",k,!0),{destroy:P}}return e}()},756:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var a=function(){var e={curIdx:0,colors:["#ff0000","#0000ff","#99cc00","#ffff00","#000066","#00ffff","#9900cc","#0099cc","#cc9900","#cc0099","#00cc99","#663333","#ffcc9a","#ff9acc","#ccff33","#660000","#ffcc33","#ff00ff","#00ff00","#ffffff"],standardizedColors:{},getNextColor:function(){var t=e.colors[e.curIdx%e.colors.length];return e.curIdx++,t},getLabelColorForBackground:function(e){var t="#111",n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(null==n)return t;return 1-(.299*parseInt(n[1])+.587*parseInt(n[2])+.114*parseInt(n[3]))/255<.5?t:"#eee"},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return t+t+n+n+a+a}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},hexToRgba:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a,o){return t+t+n+n+a+a+o+o}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)}:null},rgbToHex:function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},standardizeColor:function(t){if(t.match(/^#?[0-9A-Fa-f]{6}$/)||t.match(/^#?[0-9A-Fa-f]{3}$/))return t;if(!e.standardizedColors[t]){var n=document.createElement("canvas").getContext("2d");n.fillStyle=t;var a=n.fillStyle;e.standardizedColors[t]=a}return e.standardizedColors[t]}};return e}()},724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(645),o=n.n(a)()((function(e){return e[1]}));o.push([e.id,".aladin-container {\n\tposition: relative;\n\tborder: 1px solid #ddd;\n    height: 100%;\n\n    /* disable x swipe on chrome, firefox */\n    /* see. https://stackoverflow.com/questions/30636930/disable-web-page-navigation-on-swipeback-and-forward */\n    overscroll-behavior-x: none;\n}\n\n.aladin-imageCanvas {\n\tposition: absolute;\n    z-index: 1;\n\tleft: 0;\n\ttop: 0;\n}\n\n.aladin-catalogCanvas {\n    position: absolute;\n    z-index: 2;\n    left: 0;\n    top: 0;\n}\n\n.aladin-logo-container {\n    position: absolute;\n\tbottom: 2px;\n    right: 5px;\n\tz-index: 20;\n\n    min-width: 32px;\n    max-width: 90px;\n}\n\n.aladin-logo-small {\n    padding: 0;\n\tbackground: url(data:image/gif;base64,R0lGODlhIAAgAJEAAJIsLdEwJAdMmP///yH5BAkAAAMALAAAAAAgACAAAAjMAAcIHEiwoMGDCBMqXMiwocOHECMaFCCxYkKKAAoK2MiRo0UBAEKKFOkxYUaCIEMSHBlyo0OQCke6HHDyJEWBKgcG2MlzoEyFMAXyHNqTZsubNFGeHLDT4FCcLREGZUqwaFGRUk82FfqUaQCoSH0OCLqVqlCuX42u9Kl1a1qzXnGGVaozLdG6cpMWxOrVblm4AOYOTNn2L1efYZdu5Eu0cV6cE0fW7QqV4WK+CAMLPnhZMtvAEDmy/CkWMtCOHVFaXC2VtevXsGPLZhgQADs=);\n    background-size: 100%;\n    background-repeat: no-repeat;\n    padding-top: 100%; /* aspect ratio of the background image */\n}\n\n.aladin-logo-large {\n    padding: 0;\n    background:  url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABTCAMAAAB+g8/LAAACx1BMVEVMaXGBYYSWk5i7ur1fGUW0Fzbi4OP////Qz9K2s7f////qyseffX7TxczMytBXU1ndrahOWXi0o7RaH0v///+1GjfYkY29srb///+1GTe0Fzajn6RgFkFdHkni3+GLV3PU0dXMubr6+vpmIktUJVKiGDqGcX7p5ujLwMJgFkFgFkFNOWnp1tZaHUi0FzaEZohkX2VVKVXUwcvy8vI4U4tQMWBXIk+NGT9ZIEx+Wn5vF0EUYqF3c3lgFkL5+PkUYqH///////9lFkG0FzYUYqFeNF/BwMs2WpP6+vrBv8JSJ1TNy85TJlO0FzaJhYsUYqF5GEEUYqF2Zo60FzazFza0FzYUYqGWdIsrWpWTGj6jGDp3Kk58Y4S0FzZgFkFXIU2OiY+vmqVhGENlGEJqQ2z///9SKFJTJlP///9pF0GOjpd0Ol6rFzi9sbm0Fza0FzYUYqGXmLp3TXJmHkhLSXy/jJBVK1ivrLDu7e7l5OYLCw6AYYRpFkGCIUYVYqGAZoqJfofez9hZPGtcW4phFkIUYqGVbG1BToTFw8ZqZGr4+PmIGkAWYqD6+vpaHUoUYqGEZoh5ZH2ceYAbGyCmFzmgGjsUYqGAYIOuiJJ3SW1PZJlNM0OliJ+MQF5uF0Gcmp8kXZpSKFWEZojDwcXq1tQzVY9pN2CyFzbZlZFHbKOZgpWjnaRlMlsUYqGHGD9FRElaHUiZfpfW1dddW2HMtsJ3k8NTJlPDT1WlMElcGkY6UYjMa2tDSH3IpKOEZoiFTWqni54DAwQsLDGsqa3Pu8cUFBnEtr8gHyU4Nz3cwsMKDA/GV1tGRUtCKjDczM7NfXzMvcza1Nv///+9PUmhfZRxY2y2KT/15eLo4ud5fKXCXmTnu7ekZ3pgFkFTJlOEZoiUGT5aHkp8GEBzF0G0FzadGDtKQnNeJ1JqJk5fGEReGkaDGT8UYqGlSw8iAAAAwXRSTlMA87vu8R/SwN6iQP7+/vf9/J75s4DT/v0gokr33vzj++7+9/Hz8/3u1tFw9P4f5nP9cvl0/vb+/vL79HH9++WPMFA7s1r++vRhscXEiWT9PvLQ+Ffzih/9/vb+9z3Enn7N/cWI/RDWPND+9/38gTx6uPj5/fn+/efauu7k8fnl0+ro/f33wvj7meDU2PeaZquWH9jJ1O0QrPfC0vXo+uHj+J7ETZvkpfzI+6e44qCorUr22cpX3xDd9VdUvtb6V9z+sGF5dwAACP1JREFUeF7s011r01AcBvATON8gFCgkV+2AFrKSm5MGCEKlDIqCgEgpXYUaOkanQLrtpupgCxTY8A3EDWToYBNlgFeiIOIX+f/z0pe96IcwSZtRxY0ByXaT3204nIfnPCHXLJFIJBKJgoe8LLyp/+fbPXJ16mvW3k7XsjiOs3xGd+1FoVAn12Hh1g7HqcYqMsdxGAZ0K8B15avOUkGPQymFvm0Plb6InrKOuqEbqoHVd1vPSfxk+fvT/VZRpBQ0aoLPtRW7VptRKD0VGTKcmNva/0biJPmVjDZUtXN8egKBXIM3IeC64NEohHlGvV6WxOcTj4hHhmq015dHyASh0ciXSKjUhAka5in21AMSi0ev3v7UEfEEjM5Rtbd+mPssSeQfz8JEIgZoR7VIHB6ubFvj4WqQ4xvnTqIkgE+j6KPQiSHOe54vlx0Krj38BYJ08bp27UUAcZyHQibiOJIsV9DXV4a1mrKYk8jFSndn+qCJwXuJZmYt2mKy6HvyemlJ8Zd7iSO3Bx8ANKCITDONQpTVtNCzam2vfHVBOK+OvLek/FRpmy4ABWBIob0X5TsF1Th6FY/NHC9NN5BOzadvzg5m06ldmGiSiQYAOCYwBpmNHyQaX+QW+ljbPDjkH5CJheCnnx+MDZU7j+FMcyqOSDU0Ye5jNL1UshhwaNvwo4SK4mYqNQjZGvzl/lkck1GKsPz7xiUu+0Nq2b+2VYVx/NDZJTYmnV2TpuvMsiJNhbSUZmMwSpssENJl7XSmrrDNpkpn3dqO4eraoqXFMmddBWcVncImDpgOMKiiImJu3t+Wl9a54UiccOxA8keY+5xzc25ugiTx+9s5fHL55D7nPM9dk5FY6NpO1wVgJ8g0pVIpv793mWLP31JEeiMKiCa5yeu8CRIeP8STySzLIMv5VSrl+e1YLne0Ap3BMMcnNE/XdV5Ybyer+lcOZyGeIsyKn+AxSDR8qcVwq9X6Lj+sDuwlm8FMJsiJ4o2fSX9fyeeXuY2D6MrpvDz1KEtylmIG/uh2Y6ZDlOomGxBaxx86CzovybniRG12VEEMUaCXLGV03svSPPaMXsBG8jKCDssHc3aE1BgLOj9OCzoshoYKdExxYL3zpTpuODZbo6+f7hKw0A5e5sBDqQ63MGcfwkxnHZXqeL+pQEd7kbpLdY5kwebt0f1HeGwbwYy8zsGMC7Ain9UfmE5va32pDqfXVuCjCwB73Vys0wUy+0f3fV6EeWLqkRn0U13QR9MTEOql4HXI5nZE304Ilo2E6KmkWnYCh9eKdMhI2LpxwU2xaYp10lZsdWKsbj138klVD/X55Q+Mnc/mOyC0bKLjvf3c4sBJB7mX8ekKdCb0rFpMh7ThrcPCNJhRK9kVrG/txkKGkMvHQe48wOpdu1dop6Q6j6N8Glxs8R9pgNAyXDSLdIJZyE4B+zkWS4QE7Fw33oyRYKxGyEWLYVTXmz/5jn+kGY0FRQYT8kp0tJPNfDb6AI6bpDrURtt/U6PRzArYTX5IaXZo+NzDGI+g99NE5/ivu5ebIbKxv1rEBhXpmL6F0yYn1YrqpDpjFHsHsCaKJUR9JwI66Dp5cY2fHaL3SZ75p3qd1QV4yLSDlkEr0mE2XcYQYF9RbHyzSMeaR66SpnS6GcmFrvzIVq2OthMgn9YyTP6cSawj2LhPJGCnrYAlxTrOeoROXSKH52umc2FfVTqsCFE9QgagAw6RztNuavNG8i7s5DE9wSIiHesuNNONP/ZKdFS5RXm1Oqtwo8KDhbGun0DIRXUKNlNGKab8HXRo8x5xYkyP8m1LQWcAVauj1QEz/AVC5jOkDHbk7mAzi9hsklr1ibAk04GBOksb4by2y8bRn1elw2rFqWACwLwOda6/WqTjXpnCyR6GGQAL7FWfuspuFk7aomRK9L+40lKzzhwUIQBNfzAOvOpgRqxzaOVvjCMi7HJc6N91gs7DE+M+OrWW9mSequ3tsFo19svymWwjFdlT0OF3dRGFIpkog1kEnZag0hfmSO4YX9u6UrOOqYcrSWic6LB4H5TDHENwdooSMB6/AfepNh2olTTpEh1jOUyJS3QCCU/uygCqUQfmeGmGz0p0wvfLYjGpTih9/ti1F1CtOvCVU5qwR/KZd7etLDbbIcHaz+euIVS7jiPAlYsKziiLr688tsSwhU877tu+XDyK/ofOxIZMHH3KD4m0D6q2QVpINu4p8lHyiQCRUCh6lYb2tUkZRJdI+5v+fCs38BGCyGgQaofHqC7DtrD4tx07aGkbDAM4/hTmB5gFhqAILAFs0SHYpqaMwkwRhtBWtmp0FobFURqw1uJlaQdO6SVMB0zZmNCeelLmbd1p32CXIjj2BNNkZUnyIZa0tKlujAFtveR3ed/b++fhvbwv/JcvDVFDmaSQg7YzSrkhile6MjW3OQQt4Ekkxp/PhsPJmRgDvZQp3mdlXVE4Bdo8tP36pqI0z/MP8d1T6FIdVWeXxEDW9TICPRUXfFwFzRzliZ0T/UnV63XqyhqL5Y77EXR58D5dW/KryUXXIfTY6TzBss2cNTsHdVlOIVIcRSPi3vq1lmNXdrx2guF548NbgJ4PR02lsG7mjEDHKCJP0/wen5hITEK3Y5crvY1oxRRC0HMHMyparudA1T0x0SmxTbqzaTTtzhvCaRx6blLwYTtnCv5paHPkbNSKGcuVDCF4BH1QXg50cuzx/GlzZO3iG5nO1jBcNIxCEPpjoyFhE0WSCgd/88IzZ/26kT++tq6MEItAv2yI2u4YoqZpiKR+8x+9ulB+TIiSTHKsjL+aVybGHEH/lEXMhRElUULUFZ1f94DlzfT0gntjJ5kVTX5JRZ0lKyclI8NAX00TGiKqhN9cUmSF06Mpmq7L2wHRxq5UFOXzyetMKA79RgQQ0TycCEgqpnRdJ/NsXkaU8kvnH4fvnSe9Oe9qfnXZ2I/DAHwq5cY0QrT4Ec0d4feLor5y8X14a+vycnExFotlQgwMSkQo+cRWD2EuLTve3LIh7L86fAaDFr/rbRgzXsuOz+fzFnNFo3AQZODWMJmCYdsPReDWMXEm2NTd4nA4HA6H4zc5mbo+QO8AVQAAAABJRU5ErkJggg==');\n    background-size: 100%;\n    background-repeat: no-repeat;\n    padding-top: 58.45%; /* aspect ratio of the background image */\n}\n\n.aladin-col {\n    float: left;\n    width: 45.00%;\n    margin-right: 5.0%;\n}\n  /* Clear floats after the columns */\n.aladin-row:after {\n    content: \"\";\n    display: table;\n    clear: both;\n }\n\n.aladin-location {\n\tz-index: 20;\n\tposition:absolute;\n    top: 0px;\n\tpadding: 2px 4px 2px 4px;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tfont-size: 11px;\n}\n\n.aladin-projection-select {\n\tz-index: 20;\n\tposition:absolute;\n    top: 0px;\n    right: 48px;\n\tpadding: 2px 4px 2px 4px;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tfont-size: 11px;\n}\n\n.aladin-location-text {\n    font-family: monospace;\n\tfont-size: 13px;\n    margin-left: 4px;\n}\n\n.aladin-clipboard::before {\n    content: ' 📋';\n    cursor:pointer;\n}\n\n.aladin-measurement-div {\n    z-index: 77;\n    width: 100%;\n    position: absolute;\n    bottom: 20px;\n    font-family: monospace;\n    font-size: 12px;\n    max-height: 20%;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n}\n\n.aladin-measurement-div table {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n\n    overflow-y: scroll;\n    overscroll-behavior-x: none;\n    background-color: rgba(255, 255, 255, 0.9);\n    border-collapse: collapse;\n    table-layout: fixed;\n    white-space: nowrap;\n    height: 100%;\n    display: block;\n\n    border: 2px solid black;\n}\n\n.aladin-measurement-div .tabs button {\n    background-color: rgba(255, 255, 255, 0.9);\n\n    border-radius: 4px 4px 0px 0px;\n    float: left;\n    border: none;\n    outline: none;\n    cursor: pointer;\n\n    font-family: monospace;\n\tfont-size: 13px;\n\n    text-overflow: ellipsis;\n    text-align: left;\n}\n\n.aladin-measurement-div table::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n}\n\n.aladin-measurement-div table thead {\n    position: sticky;\n    top: 0;\n    background-color: #fff;\n    color: #000;\n}\n\n.aladin-measurement-div table td, .aladin-measurement-div table th {\n    padding: 0.3em 0.3em;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    text-align: left;\n    color: #000;\n}\n\n.aladin-marker-measurement {\n    max-height: 130px;\n    overflow-y: auto;\n    overflow-x: hidden;\n    font-family: monospace;\n\tfont-size: 11px;\n    color: #000;\n}\n.aladin-marker-measurement table {\n    table-layout: fixed;\n    width: 100%;\n}\n.aladin-marker-measurement table tr td{\nword-wrap:break-word;\n}\n.aladin-marker-measurement tr:nth-child(even) {\n    background-color: #dddddd;\n}\n.aladin-marker-measurement td:first-child {\n    font-weight: bold;\n}\n\n.aladin-fov {\n    z-index: 20;\n    position: absolute;\n    padding: 0;\n    font-size: 12px;\n    font-weight: bold;\n    font-family: monospace;\n    bottom: 0px;\n    padding: 2px;\n    color: #321bdf;\n    /*text-shadow: 0 0 1px white, 0 0 1px white, 0 0 1px white, 0 0 1px white, 0 0 1px white;*/\n\tbackground-color: rgba(255, 255, 255, 0.5);\n}\n\n/* maximize/restore size icons */\n.aladin-maximize {\n\tposition: absolute;\n\ttop: 6px;\n\tright: 3px;\n\tz-index: 20;\n\twidth: 30px;\n\theight: 30px;\n\tbackground-image: url('data:image/gif;base64,R0lGODlhFgAWAOMJAAAAAAEBAQICAgMDAwUFBAUFBQcHBwgICAsLCv///////////////////////////yH5BAEKAA8ALAAAAAAWABYAAARm8MlJabr41i0T+CCQcJz3CYMwklsSEAUhspVnHEYw0x1w558VzYQTBXm24sgjJCUQykmT9dzxWlNq9vrwILYtqe/wRc6SBqszOE6DLZ/AT00FyKNcD4wQeLdQAiB+cCFHVxkZXA8RADs=');\n\tbackground-repeat:  no-repeat;\n\tbackground-position:center center;\n}\n\n.aladin-layersControl-container {\n    position: absolute;\n    top: 30px;\n    left: 4px;\n    cursor:pointer;\n    z-index: 20;\n    background: rgba(250, 250, 250, 0.8);\n    border-radius: 4px;\n}\n\n.aladin-layersControl-container:hover  {\n\tbackground: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-layersControl {\n\twidth: 32px;\n    height: 34px;\n    background-image: url('data:image/gif;base64,R0lGODlhGQAcAMIAAAAAADQ0NKahocvFxf///wAAAAAAAAAAACH5BAEKAAcALAAAAAAZABwAAANneLoH/hCwyaJ1dDrCuydY1gBfyYUaaZqosq0r+sKxNNP1pe98Hy2OgXBILLZGxWRSBlA6iZjgczrwWa9WIEDA7Xq/R8d3PGaSz97oFs0WYN9wiDZAr9vvYcB9v2fy/3ZqgIN0cYZYCQA7');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-cooGridControl-container {\n    position: absolute;\n    left: 4px;\n    cursor:pointer;\n    z-index: 20;\n    background: rgba(250, 250, 250, 0.8);\n    border-radius: 2px;\n}\n\n.aladin-cooGridControl-container:hover  {\n\tbackground: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-cooGridControl {\n\twidth: 32px;\n    height: 34px;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAkV8AAJFfAZ/wQlIAAAAHdElNRQfmBwYSADnbJS7lAAADc0lEQVQ4y23Ve0wWZBTH8c/LJUVJ9GUvhM0SDUtxplmRSmXmrcx1cfAyzC7TOV3TLHPaZc5c5ZzOVa6y2cywWqnV/KMsm2aWIBEkCBIm5i10oESSKaS+/QEiYue/85zz3fPbOec5T0BHCxlpggw9xQs45agSX9qm7vK06Mu8Hh633BMSHRQUUCnRVhFhk3RS7Yz/tQxb1MozUU9z7ZUtZK1Ngq4zW4kthl0JRcl2yFmTwSCVckEvheaA3tY7LFugBQi0YlO94G8JVuohxQD97VTvuAq3GGGqG91vsET/mmf9JTBslRinRan0h2PGOWKrHlL0li6oVrNNtqmywmBZ8ltuHahKkcWKvaazANZYDhIsUOOocw56Vnes02izIFFizdEs20L7NDsrgl/cKkG6PDmeN9NBHwj73IP6WCYoB0aotQAsk9cqPVWR1Yrk6YtkxSZKtkKdA9LM8qOkKI8IaQS7DJQCDtlpmgbzVeOkwwapVeqcOLm+FW9UtCVS/OZr1AtrUoRcU23U1zhdRYuT4Q5jZVsmz1wxLkjlhFLbJYAZygwwwX4zREnzsh+UK3fMn94yVBTGqvCrMho9p8w4EC9PoQrz20bxan2le0aB7i52fomIBk4ZbaXPdAG3qVPjzg5zNUaJZBAjxx4/a6ZJlv4qTENnq2z3vkovuv7icCFTmV6iDPSOKtON1RCj2VAbvGGe/foYaYpSD3tKjgI7VDnprJB4j+lvqEpPyveAJioUCYr1qiq/m972wB7yrnzlypWqdsYuK9wjDjxtD2s0y21t8z9mtYZaypAgze2GmalSv7bzFJutJcsZhVJMscdCZTbKdFWH4tynRBLoapJdGmWRJF/Ep4rNwQCrVdkgV6pObeCjdkrSz3RblKtWICmAGd4Uo9J4RxBriLC7xKlxQI1TIu4x3F4hf/lKoaXe83YAQZ8Y6bgvvNK6kgISpbtZmmt0ETHYUXl22+u0FW4SVt8iZbh9PrbDVveK7bBSYnT1jbmt3mxVhrdPCNtniddVWmeMbpfB19ptPG6wyH7h9juHgGyLbPOd0TI1+EmxA+o1ici01Ed6udt586wXaQ+2CF4swYcq9JEhTTcBF9BTSMB533tJwaUmt7egHJN1UWK3E6IlSJZqjG5KrbXhYkmuBCFklAmGCIkR0axOic22d/wC/gNPgB2kPbE+ygAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wNy0wNlQxODowMTowNSswMjowMOuc89QAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDctMDZUMTg6MDA6NTcrMDI6MDCqfD8bAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-layerBox {\n    top: 30px;\n    padding: 4px 4px;\n    max-height: 90%;\n    overflow-y: auto;\n}\n\n.aladin-overlay-list {\n    padding-bottom: 4px;\n}\n\n.aladin-box {\n\tdisplay: none;\n    z-index: 30;\n    position: absolute;\n    left: 40px;\n    background: whitesmoke;\n    border-radius: 2px;\n\n    font-size: 13px;\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n    background: #fff;\n\n    line-height: 1.3;\n    color: #222;\n    /*padding: 0.8em;*/\n    border-radius: 2px;\n    box-shadow: 0 0 6px rgba(0,0,0,0.2);\n\n    /* Allow scrolling but disable scroll bar */\n    -ms-overflow-style: none; /* for Internet Explorer, Edge */\n    scrollbar-width: none; /* for Firefox */\n    overflow-y: scroll; \n}\n\n.aladin-box::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n}\n\n/* Chrome, Safari, Edge, Opera */\n/*\ninput[type=number]::-webkit-inner-spin-button, \ninput[type=number]::-webkit-outer-spin-button { \n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    margin: 0; \n}*/\n/* Firefox */\n/*\ninput[type=number] {\n  -moz-appearance: textfield;\n}*/\n\n.aladin-dialog {\n\tdisplay: none;\n    z-index: 30;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #eee;\n    border-radius: 4px;\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n    line-height: 1.3;\n    color: #222;\n    max-width: 500px;\n    padding: 0.8em;\n}\n\n.aladin-layer .aladin-input, .aladin-layer .aladin-selector {\n    width: 100%;\n}\n\n.aladin-selector, .aladin-input {\n    padding: 4px;\n    box-sizing: border-box;\n    margin: 0;\n}\n\n.aladin-layerSelection {\n    max-width: 150px;\n}\n\ncanvas {\n    image-rendering: optimizeSpeed;             /* Older versions of FF          */\n    image-rendering: -moz-crisp-edges;          /* FF 6.0+                       */\n    image-rendering: -webkit-optimize-contrast; /* Safari                        */\n    image-rendering: -o-crisp-edges;            /* OS X & Windows Opera (12.02+) */\n    image-rendering: pixelated;                 /* Awesome future-browsers       */\n    -ms-interpolation-mode: nearest-neighbor;   /* IE                            */\n}\n\n.aladin-box-title {\n  font-size: 16px;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  line-height: 2.0;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.aladin-box-content {\n  padding: 10px;\n}\n\n.aladin-text {\n  background-color: #bbb;\n}\n\n.aladin-gotoControl-container {\n\tposition: absolute;\n    left: 4px;\n    cursor:pointer;\n    z-index: 20;\n    background: rgba(250, 250, 250, 0.8);\n    border-radius: 2px;\n}\n\n.aladin-gotoControl-container:hover {\n    background: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-gotoControl {\n    width: 32px;\n    height: 34px;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASZJREFUeNpiYMAOpIG4GogPAPETIP4PpQ9AxaUZyARsQNwFxN+ghuLC36Dq2EgxXBSITxIwGB2fhOojyuXohl8C4hCk4JCG8i9hsYSgT9qRNPwE4hY8mtig8n+Q9LTjM1waaihMcQ6RQZqD5ig5XAobkRQeJjFRHEbS20iMoigSLYgixnHPkRSRmr6lkfQ+x6UIOfzZyMg3yPFAfx8wAfFNJL49iRYgq7+JS1EFlVJRBS5FcmjxkEak4WnE5gMGaMGFrBhUYjLjUMsMlUd21CJyyqLz0LJHAqpGAso/j6XQ+0NMHiKnNEW3JJyQJZzQ4PpJwLCf0GD5Q44l6DXac6R0jl6jhVBiCbEAlyUh9LDEm9aWPGegMkC35AkDDYAf1OUg7AoQYADEj7juEX/HNAAAAABJRU5ErkJggg==');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-gotoBox {\n    top: 68px;\n    padding: 4px;\n}\n\n.aladin-target-form {\n\tpadding: 5px;\n}\n\n\n.aladin-simbadPointerControl-container {\n    position: absolute;\n    left: 4px;\n    cursor:pointer;\n    z-index: 20;\n    background: rgba(250, 250, 250, 0.8);\n    border-radius: 2px;\n}\n\n.aladin-simbadPointerControl-container:hover {\n    background: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-simbadPointerControl {\n\twidth: 32px;\n    height: 34px;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEIDgUy0LKZuQAABc5JREFUSEuFln9sVeUZxz/P+97TbmtL0pZrO5wtvT/bkolBQ5gJrh1FO9RNTYSEYEoiywjiHBlbssXNP4Y2ziZLlBJ1GBFnWF2CPya0TgxsMytmY8Fk4/bec3sv1AXaXmYyaBvovec8++Oe2xUw25uc5LzvOe/3+fV9fkhPT1eI/y4BdGEjIs03N3kHXz3kiwix5W0/ERF187l+VZW+RzfLhU8njapec28xjiwSsHCoqqy5a7X/9FPP+R3xRNjzvGagRlW3qyrGmBeBWRuyk6lMpvDm8Ovy0sB+KyI3KhkIkDKu4lQ5jAwfK3XEE02lUmmNqm4AuoE41y4XOC4iR23Inhxz3ane3p5QsVgkELQgwKmA1y2p1bcOv+clo7E7fN9/DNga/Pe3ADAW7LOUBa4K9geMMYOZ3PhfH3jwPnv50mWpWGMjkeUGwKly+N27I14iGv2G+joI9AInRORZERmMJ1te/Oxf/24UkVRrZNkPLl2aGRXkE6AGeFBVVzc2NKT/PPpxPpmMG9/3BVDp6ekKqSoffviHUiISvcP3/f3ASmCfDdlfprPZbKAl8bbIkwBuPrencpaMxmKe5+0CdgCnjTHbMrnxU+vWfT0kIhiANXet9jviiabALSuBfdVfqP5pOpvNqmoFKKqqSVVNJqOxCMBvR34t6fFstqq66klgH3Cb7/s72+Pxpke2b/YAZP36bueDD44X422Rb6vq28AJG7LfqWjeEU/cVCwWnwPCwSPAFHDRcZzdKTdTWGTJr4AuEXnAzefeWb++2zHNNzd5HfFEOGALIjJU0TwAHwImjDW7gT8Bf7TW/gg4WywWhzriifC5uTFJj2ezIjIEoKobOpPJcLg57JuDrx7yA553U2bLaCCIQPOPnKrQ85nx8TNAQYRCejz7D6fK2Qt8VCwWB1q/1F7h/WiA0VUqlpreODjkm4BONZRp58YSt/w9MDkKhI01h1IZt7Dh3rtt3ZLaF2pqa57fcO/dNpXJFIw1vwHClZg03XLTGcp0TgC1IqISpH9CVfuAU8BhETGqmgTaKbulULek9oWlTUuvAExfmK6enZl7QkSWqupaYAxII/goDwG3A68BGSMiWmEKcE0WUg4oIkEmLvrnc+6pIFK5A6gIatx8rj+oLQDZlraWX7j53B5r7VPAlLX2FTef71/WsuzK9IXp6sJkofrLX2m+6uZz/caaV4CLNmR/5uZzT7e2tTxL2UUYY1528/n+SiWcDT7EJ85NrABIj2dzwEXP8zZ2JBLho0d+783OzD0xOzP3veHhY6XORCLse/4mYDqdzeYBzuUnVhDEErisqmL6Ht0sNmQngePAKny+BuUkchxnN7C2OF98PBGNdgY+Dyei0RXz88XHgbWO4/xwkavupFyfTlhrp7Zu2yLmwqeTJpXJFETkKICqbkxGY7GHe7doys0UHMfZBLT6nj8QBHSt7/kDQKvjOJtSbmZaREhGYzFV3QggIkdSbqZwfuK8Maoqbw6/LjZkTwIHgG7P83Z1JpP1ACOfvHsxezbfZ63dScAWG7I7smfzfWcy6WmAFe3t9Z7nfR/oAg7YkD05MPiMqKoYQF8a2G/HXHfKGDMInAZ2zF+d35OMxmKVJApikhaRVMXnFc2vXrn6c+AxysVu75jrTg0ffj8EqI1ElhsRIZGImY//cuqfjQ0NaZTbgPtV9dbG+oYvNtbXFztvTX42c2n2TkFk1aqVoxbz1cb6+od83/8xsBE4LSK73Hxu9J7edaFKXBY6mqpq3ZI6ffut97xEJHq77/s7+fyGI8H79Q1nbyY3fur+b30zNDc7t5BPCx0Nyr3YcRxGRo6V2uPxJq/k/b+WeUJEjlRa5j2960KlYmlxsopcN1VAYM0j2zd7Wx/+rnYmk+FSsdQM1Pi+vx1QY8zLwGVr7VTKzRQGBp+R4cPvh0TkhsniegE3jC3h5rD/xsEhX0S0XLdQN5/vV1XZum2LnJ84/z/Hlv8AT3rLVQaE2oEAAAAASUVORK5CYII=');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-shareControl-container {\n    position: absolute;\n    bottom: 30px;\n    left: 4px;\n    cursor:pointer;\n    z-index: 20;\n    background: rgba(250, 250, 250, 0.8);\n    border-radius: 2px;\n}\n\n.aladin-shareControl-container:hover {\n    background: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-shareControl {\n\twidth: 32px;\n    height: 34px;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA/1BMVEUAAAAzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzP////6PkQMAAAAU3RSTlMAAAI2l9TiyXwcBmrj/cEvePX69MD+Vzl06Px5sMgDZPsbOwUfKFGAHVjSEkBgXTcMllbG8rbhdtcm26Ko5/M8F3clPqN1JK+usRpVQdNQBGN9OkYs7f8AAAABYktHRFTkA4ilAAAACXBIWXMAARCQAAEQkAGJrNK4AAABMUlEQVQoz13SeVuCQBAGcAYV5TREEpUQr9TMK9G8Nc/usvn+36VdRFDmz9/uwzuzA8NcFrCRaIyLJ3iAaxdECUnJShKu/UZFTGkyYpoPu67cZows5hKXnif3TfJ5MHS8C9wqcDaaRRILJQ254KBcqd7X6tShYePDmaH52Gp3uq7zacTe+fpTnwQ7gwxJKJqIw4iX++ygW6Ox66oIQf+T6WyOi+WK+osAvptri91sd/tDyF/3u+2GtdZvIT+slgucz6YT3xkQqb/DeHSKd3YnZzpD1wEyA0dHtf9R9h62R5/Snavbabc+m/4mvtBuuF6vfVcrP8EeONRK1MlcNvdrBQdx1A2SwNO58sLF4o45zBp/DUX3+/SKV8iOtRSGnYGkItP+JVEI/RnAH+NSLBphr/0f6ns3OQ1Zz7kAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTMtMTEtMThUMTQ6MzM6NTUrMDE6MDCINg3ZAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEzLTExLTE4VDE0OjMzOjA0KzAxOjAwF/ywtQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-shareBox {\n    bottom: 30px;\n    padding: 4px;\n}\n\n.aladin-shareInput {\n    width: 300px;\n    margin-top: 10px;\n    display: block;\n}\n\n.aladin-target-form input {\n\twidth: 140px;\n\tmargin-left: 5px;\n}\n\n.aladin-cb-list ul {\n    margin: 0;\n    padding-left: 4px;\n    list-style: none;\n    /*max-width: 200px; */\n    /* max-width: 150px; */\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n}\n\n.aladin-cb-list ul li {\n    flex: 1 1 100%;\n    text-align: left;\n}\n\n.aladin-cb-list label {\n    display: inline-block;\n}\n\n.aladin-cb-list input[type=\"checkbox\"] {\n    margin: 3px;\n}\n\n.aladin-indicatorBtn {\n    color: #605F61!important;\n    border: 1px solid #AEAEAE!important;\n\n    border-radius: 3px;\n    font-size: 13px!important;\n    background: #fff!important;\n    margin-right: 0.2em!important;\n\n    font-family: monospace;\n    cursor: pointer;\n}\n\n.aladin-indicatorBtn:hover {\n\tcolor: #201F21!important;\n}\n\n.aladin-closeBtn {\n\tfloat:right;\n    margin-top: 0 0 2px 0;\n    cursor:pointer;\n    color: #605F61;\n    border: 1px solid #AEAEAE;\n    border-radius: 3px;\n    background: #fff;\n    font-size: 15px;\n    font-weight: bold;\n    display: inline-block;\n    line-height: 0px;\n    padding: 8px 2px;       \n}\n\n.aladin-closeBtn:hover {\n\tcolor: #201F21;\n}\n\n.aladin-label {\n\tfont-weight: bold;\n\tpadding-bottom: 4px;\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n}\n\n.aladin-box-separator {\n\theight: 0;\n    border-top: 1px solid #f2f2f2;\n    margin: 5px 0px 5px -4px;\n}\n\n.aladin-blank-separator {\n\theight: 10px;\n}\n\n.aladin-restore {\n\tposition: absolute;\n    top: 6px;\n    right: 3px;\n    z-index: 20;\n    width: 30px;\n    height: 30px;\n    background-image: url('data:image/gif;base64,R0lGODlhFgAWAOMJAAAAAAEBAQICAgMDAwUFBAUFBQcHBwgICAsLCv///////////////////////////yH5BAEKAA8ALAAAAAAWABYAAARk8MlJ60zJapsAyhsFPp1xfKHUZeVhAOPWwYD5xjIABDacXrseLtQhFAiBIVEwEOh8P9VzquRgrhgrNhudTaHdJ1NQ1SQCRgL41zIE1sSa6w0361y0eqXtW7EReCNlIgh6XYMbEQA7');\n    background-repeat:  no-repeat;\n    background-position:center center;\n}\n\n.aladin-fullscreen {\n\tposition: fixed !important;\n\tz-index: 9999;\n\ttop: 0;\n\tleft: 0;\n\theight: 100% !important;\n\twidth: 100% !important;\n\tborder: 0 !important;\n    max-width: none !important;\n    background: #fff;\n}\n\n.aladin-zoomControl {\n\tz-index: 20;\n\tposition:absolute;\n\ttop: 50%;\n\theight: 48px;\n\tright: 8px;\n\tpadding: 0;\n\tmargin: -24px 0 0 0;\n\tfont-weight: bold;\n\tfont-size: 18px;\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n}\n\n\n.aladin-zoomControl a {\n\twidth: 20px;\n\theight:20px;\n\tline-height: 18px;\n\tdisplay:block;\n\tbackground-color:rgba(250, 250, 250, 0.8);\n\tmargin:1px;\n\ttext-align:center;\n\tborder-radius:4px;\n\tborder:1px solid #aaa;\n\ttext-decoration:none;\n\tcolor:#222;\n}\n\n.aladin-zoomControl a:hover {\n\tbackground-color: rgba(220, 220, 220, 0.8);\n}\n\n.aladin-cmSelection {\n    width: 60px;\n    margin-right: 10px;\n}\n\n.aladin-btn {\n\tdisplay: inline-block;\n    padding: 6px 8px;\n    margin-bottom: 0;\n    font-size: 12px;\n    font-weight: normal;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    cursor: pointer;\n    border: 1px solid transparent;\n    border-radius: 3px;\n    color: #ffffff;\n    background-color: #428bca;\n    border-color: #357ebd;\n    margin-right: 4px;\n}\n\n.aladin-layer {\n    padding: 0px;\n    margin-bottom: 4px;\n    background-color: #f2f2f2;\n    border-radius: 2px;\n}\n\n.aladin-cancelBtn {\n    background-color: #ca4242;\n    border-color: #bd3935;\n}\n\n.aladin-box-content > div {\n    margin: 10px 0px 0px 0px;\n}\n\n.aladin-btn-small {\n\tdisplay: inline-block;\n    border-radius: 3px;\n    margin-bottom: 0;\n    padding: 0;\n    vertical-align: middle;\n    cursor: pointer;\n    border: 1px solid transparent;\n    color: #ffffff;\n    font-size: 14px;\n    background-color: #428bca;\n    border-color: #357ebd;\n    margin-left: 2px;\n    min-width: 1.5em;\n    min-height: 1.5em;\n}\n\n.aladin-button:hover {\n\tcolor: #ffffff;\n    background-color: #3276b1;\n    border-color: #285e8e;\n}\n\n.aladin-unknownObject {\n\tborder: 3px solid red;\n}\n    \n.aladin-popup-container {\n\tz-index: 25;\n\tposition: absolute;\n    width: 200px;\n    display: none;\n    line-height: 1.3;\n}\n\n.aladin-popup {\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n    font-size: 13px;\n    background: white;\n    border: 1px solid #bbb;\n    border-radius: 2px;\n    padding: 4px;\n    top: 80px;\n    left: 110px;\n}\n\n\n.aladin-popup-arrow {\n    display: block;\n    border-color: #fff transparent transparent;\n    border-style: solid;\n    border-width: 12px;\n    width: 0px;\n    height: 0px;\n    margin-top: -1px;\n    margin-left: auto;\n    margin-right: auto;\n/*\n    width: 15px;\n    height: 15px;\n    background: white;\n    margin: -12px 94px;\n    padding-bottom: 10px;\n    overflow: hidden;\n    -webkit-transform: rotate(45deg);\n       -moz-transform: rotate(45deg);\n        -ms-transform: rotate(45deg);\n         -o-transform: rotate(45deg);\n            transform: rotate(45deg);\n*/\n}\n\n\n.aladin-popupTitle {\n    font-weight: bold;\n}\n\n.aladin-options {\n    margin-top: 4px;\n}\n\n.aladin-options .row {\n    display: flex;\n    align-items: center;\n    margin-top: 5px;\n}\n\n.aladin-options .row label {\n    text-align: center;\n}\n\n.aladin-options .row .col-label {\n    flex: 0.3;\n}\n\n.aladin-options .row .col-input {\n    flex: 0.70;\n}\n\n.aladin-options .row .col-input select {\n    width: 100%;\n}\n\n.aladin-layer-label {\n\tpadding: 0 4px 0 4px;\n\tcolor: #ddd;\n    border-bottom-left-radius:  8px;\n    border-top-left-radius:     8px;\n    border-bottom-right-radius: 8px;\n    border-top-right-radius:    8px;\n    cursor: pointer;\n    user-select: none;\n\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    vertical-align: text-top;\n\n    max-width: 150px;\n}\n\n.aladin-sp-title a {\n    text-decoration: none;\n    color: #317d8d;\n}\n\n.aladin-sp-content {\n    font-size: 12px;\n}\n\n.aladin-sp-content a {\n    text-decoration: none;\n    color: #478ade;\n    font-size: 11px;\n}\n\n.aladin-cuts {\n    width: 8em;\n}\n\n/* Icons figuring layers in the Stack */\n.aladin-stack-icon {\n\twidth: 16px;\n    height: 16px;\n    background-repeat:  no-repeat;\n    background-position:center center;\n    display: inline-block;\n    vertical-align: text-top;\n}\n\n\n\n.aladin-chevron {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  vertical-align: middle;\n  background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQ0IDQ0IiBzdHJva2U9IiM0NDQiIGJhY2tncm91bmQtY29sb3I9ImJsdWUiPgoKICAgIDxyZWN0IHg9IjIiIHk9IjIiIGhlaWdodD0iNDAiIHdpZHRoPSI0MCIgZmlsbD0idHJhbnNwYXJlbnQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiAvPgogICAgPHBhdGggZD0iTTEwIDEzIEwyMiAyMSBMMzQgMTMiIGZpbGw9InRyYW5zcGFyZW50IiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPiAKICAgIDxwYXRoIGQ9Ik05IDI1IEwyMiAzMyBMMzUgMjUiIGZpbGw9InRyYW5zcGFyZW50IiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPiAKCjwvc3ZnPgo=') no-repeat;\n}\n.aladin-chevron-down {\n  transform: rotate(0deg);\n}\n.aladin-chevron-left {\n  transform: rotate(90deg);\n}\n.aladin-chevron-up {\n  transform: rotate(180deg);\n}\n.aladin-chevron-right {\n  transform: rotate(270deg);\n}\n\n.aladin-layer .right-triangle:before {\n    content: '\\25b6';\n}\n\n.aladin-layer .down-triangle:before {\n    content: '\\25bc';\n}\n\n\n/* *********************************************** */\n\n/* Context menu */\n\n.aladin-context-sub-menu,\n.aladin-context-menu {\n  position: fixed;\n  background: #fff;\n  z-index: 9999999;\n  width: 150px;\n  margin: 0;\n  padding: 2px 0;\n  border-radius: 2px;\n  box-shadow: 0 0 6px rgba(0,0,0,0.2);\n  font-size: 12px;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  ;\n}\n\n.aladin-context-menu .aladin-context-menu-item {\n  height: 22px;\n  display: flex;\n  align-items: center;\n  padding: 4px 8px;\n  cursor: pointer;\n  position: relative;\n  border-bottom: 1px solid #f2f2f2;\n}\n\n.aladin-context-menu-item:hover {\n    background: rgb(212, 231, 250);\n}\n\n.aladin-context-menu .aladin-context-menu-item span {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.aladin-context-menu-item:last-of-type {\n  border-bottom: none;\n}\n\n.aladin-context-menu .context-menu-item:hover {\n  background: #f2f2f2;\n}\n\n.aladin-context-menu .aladin-context-sub-menu {\n  position: absolute;\n  top: 0;\n  left: 100%;\n  display: none;\n  width: 150px;\n}\n\n.aladin-context-menu .aladin-context-menu-item:hover > .aladin-context-sub-menu {\n  display: block;\n}\n\n.aladin-context-menu.left .aladin-context-sub-menu {\n  left: 0;\n  transform: translateX(-100%);\n}\n\n.aladin-context-menu.top .aladin-context-sub-menu {\n  top: 100%;\n  transform: translateY(-100%);\n}\n\n.aladin-context-menu.left.top .aladin-context-sub-menu {\n  transform: translate(-100%, -100%);\n}\n\n\n/* *********************************************** */\n\n/* Cursors */\n\n/* Simbad pointer cursor */\n.aladin-sp-cursor {\n    cursor: auto;\n    cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEIEwUMBS20MQAAApRJREFUWEfdV7GO2zAMfXY7x1luzOFwDeB/KHCAB87eumvqmI/JWhTwF3TIrMFAv8JbgWyHG3IpOjbpcKJC02KipECHclIU+j2KfKRlAABRUyFYak3UgKiZiXUJAIt1d1ysu2PYn53DsPCucpbkRE3JAdxKTtQgWo6zJAfGGbAwLuEV7OB9/yrXIbqZ9/0+rMuhdb+RYfWmm+fged8fihzyoXXxlNcYB2KRxwwA6SzI9Crgd973B/5/u3IF8FYSw98M5D2QR86kRE3pfX+AMqKm8iEQoqYaWrfj/4bW7QgokMhCeSs5KeVrDM4K29C6Y6oE0YGEUlndocVGyg/rGZDXBQpr0kmjLiAlOOvk3vf7RJZM5Q+te2W/7coVEq+wnC1yCZYyS3B8MMYF3vBKK9Jz5PWmm8sab1eu4N9D63aaHEAsH88SzmQpnSHsHDmnWvlXIoiJ4JTviY8FRUJ8ZAiOEiJbLpcjARM1M0twpmjZOeGQrXYm1/7yMLz/eH8fnyus6XXOtmLgWBrKtdMguNKYPPystIausn9egsVDfI674KxS6003F/sX357AdOBwcADwWD9EjBKJubxYd0cml4RhP5IPrduFk04GjiZXMyZiRHKdAU3OWeB2lLNAk+tpl9IHY0zSlBo4OgsaTJpFzs+F0pxKYEXK73Nd8+3KFfWmG71qGfgSeQqPN0fvdlZrSvmUoXaJJ7EiocArZaS6tgzA+5RQe3gumUl5gPLXzy+6pEQNzDuhvFKx1ZuuEuTxliwmY/KuoHxGhzGv5QDw9PTx7senz88aLHUpJeOu8OHb17u+//4CTMm97/eFVQK5vqR8y6xOyipByjn3+0C3moUH4O++D1UX3PR9eJWzJCf6Tz5O/wDUeIfTLPlbywAAAABJRU5ErkJggg==') 15 15, auto;\n}\n\n/* *********************************************** */\n\n/* Autocomplete styles (adapted from https://github.com/kraaden/autocomplete ) */\n.autocomplete {\n    background: white;\n    z-index: 20000;\n    font: 14px/22px \"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\n    overflow: auto;\n    box-sizing: border-box;\n    border: 1px solid rgba(50, 50, 50, 0.6);\n}\n\n.autocomplete * {\n    font: inherit;\n}\n\n.autocomplete > div {\n    padding: 0 4px;\n}\n\n.autocomplete .group {\n    background: #eee;\n}\n\n.autocomplete > div:hover:not(.group),\n.autocomplete > div.selected {\n    background: #81ca91;\n    cursor: pointer;\n}\n",""]);const i=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(a)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);a&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},755:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(a,o){"use strict";var i=[],r=Object.getPrototypeOf,s=i.slice,l=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},c=i.push,u=i.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h=p.toString,m=h.call(Object),v={},_=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},x=a.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var a,o,i=(n=n||x).createElement("script");if(i.text=e,t)for(a in g)(o=t[a]||t.getAttribute&&t.getAttribute(a))&&i.setAttribute(a,o);n.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[f.call(e)]||"object":typeof e}var C="3.6.1",A=function(e,t){return new A.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!_(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}A.fn=A.prototype={jquery:C,constructor:A,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=A.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return A.each(this,e)},map:function(e){return this.pushStack(A.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(A.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},A.extend=A.fn.extend=function(){var e,t,n,a,o,i,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||_(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)a=e[t],"__proto__"!==t&&r!==a&&(c&&a&&(A.isPlainObject(a)||(o=Array.isArray(a)))?(n=r[t],i=o&&!Array.isArray(n)?[]:o||A.isPlainObject(n)?n:{},o=!1,r[t]=A.extend(c,i,a)):void 0!==a&&(r[t]=a));return r},A.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=r(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&h.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,a=0;if(I(e))for(n=e.length;a<n&&!1!==t.call(e[a],a,e[a]);a++);else for(a in e)if(!1===t.call(e[a],a,e[a]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(I(Object(e))?A.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,a=0,o=e.length;a<n;a++)e[o++]=t[a];return e.length=o,e},grep:function(e,t,n){for(var a=[],o=0,i=e.length,r=!n;o<i;o++)!t(e[o],o)!==r&&a.push(e[o]);return a},map:function(e,t,n){var a,o,i=0,r=[];if(I(e))for(a=e.length;i<a;i++)null!=(o=t(e[i],i,n))&&r.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&r.push(o);return l(r)},guid:1,support:v}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=i[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var S=function(e){var t,n,a,o,i,r,s,l,c,u,d,f,p,h,m,v,_,y,x,g="sizzle"+1*new Date,b=e.document,w=0,C=0,A=le(),I=le(),S=le(),k=le(),T=function(e,t){return e===t&&(d=!0),0},O={}.hasOwnProperty,L=[],D=L.pop,M=L.push,E=L.push,z=L.slice,R=function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+N+"*\\]",q=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),B=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(N+"|>"),Y=new RegExp(q),Z=new RegExp("^"+j+"$"),W={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},re=ge((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{E.apply(L=z.call(b.childNodes),b.childNodes),L[b.childNodes.length].nodeType}catch(Ie){E={apply:L.length?function(e,t){M.apply(e,z.call(t))}:function(e,t){for(var n=e.length,a=0;e[n++]=t[a++];);e.length=n-1}}}function se(e,t,a,o){var i,s,c,u,d,h,_,y=t&&t.ownerDocument,b=t?t.nodeType:9;if(a=a||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return a;if(!o&&(f(t),t=t||p,m)){if(11!==b&&(d=$.exec(e)))if(i=d[1]){if(9===b){if(!(c=t.getElementById(i)))return a;if(c.id===i)return a.push(c),a}else if(y&&(c=y.getElementById(i))&&x(t,c)&&c.id===i)return a.push(c),a}else{if(d[2])return E.apply(a,t.getElementsByTagName(e)),a;if((i=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return E.apply(a,t.getElementsByClassName(i)),a}if(n.qsa&&!k[e+" "]&&(!v||!v.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(_=e,y=t,1===b&&(V.test(e)||B.test(e))){for((y=ee.test(e)&&_e(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ae,oe):t.setAttribute("id",u=g)),s=(h=r(e)).length;s--;)h[s]=(u?"#"+u:":scope")+" "+xe(h[s]);_=h.join(",")}try{return E.apply(a,y.querySelectorAll(_)),a}catch(w){k(e,!0)}finally{u===g&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,a,o)}function le(){var e=[];return function t(n,o){return e.push(n+" ")>a.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function ce(e){return e[g]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Ie){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),o=n.length;o--;)a.attrHandle[n[o]]=t}function fe(e,t){var n=t&&e,a=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(a)return a;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce((function(t){return t=+t,ce((function(n,a){for(var o,i=e([],n.length,t),r=i.length;r--;)n[o=i[r]]&&(n[o]=!(a[o]=n[o]))}))}))}function _e(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:b;return r!=p&&9===r.nodeType&&r.documentElement?(h=(p=r).documentElement,m=!i(p),b!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),n.scope=ue((function(e){return h.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ue((function(e){return h.appendChild(e).id=g,!p.getElementsByName||!p.getElementsByName(g).length})),n.getById?(a.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(a.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,a,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),a=0;i=o[a++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),a.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,a=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&a.push(n);return a}return i},a.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},_=[],v=[],(n.qsa=Q.test(p.querySelectorAll))&&(ue((function(e){var t;h.appendChild(e).innerHTML="<a id='"+g+"'></a><select id='"+g+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+P+")"),e.querySelectorAll("[id~="+g+"-]").length||v.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+g+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Q.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),_.push("!=",q)})),v=v.length&&new RegExp(v.join("|")),_=_.length&&new RegExp(_.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return d=!0,0;var a=!e.compareDocumentPosition-!t.compareDocumentPosition;return a||(1&(a=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===a?e==p||e.ownerDocument==b&&x(b,e)?-1:t==p||t.ownerDocument==b&&x(b,t)?1:u?R(u,e)-R(u,t):0:4&a?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,a=0,o=e.parentNode,i=t.parentNode,r=[e],s=[t];if(!o||!i)return e==p?-1:t==p?1:o?-1:i?1:u?R(u,e)-R(u,t):0;if(o===i)return fe(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;r[a]===s[a];)a++;return a?fe(r[a],s[a]):r[a]==b?-1:s[a]==b?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&m&&!k[t+" "]&&(!_||!_.test(t))&&(!v||!v.test(t)))try{var a=y.call(e,t);if(a||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return a}catch(Ie){k(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),x(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var o=a.attrHandle[t.toLowerCase()],i=o&&O.call(a.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(ae,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,a=[],o=0,i=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(T),d){for(;t=e[i++];)t===e[i]&&(o=a.push(i));for(;o--;)e.splice(a[o],1)}return u=null,e},o=se.getText=function(e){var t,n="",a=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[a++];)n+=o(t);return n},a=se.selectors={cacheLength:50,createPseudo:ce,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Y.test(n)&&(t=r(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+N+"|$)"))&&A(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(a){var o=se.attr(a,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,a,o){var i="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===a&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,m=i!==r?"nextSibling":"previousSibling",v=t.parentNode,_=s&&t.nodeName.toLowerCase(),y=!l&&!s,x=!1;if(v){if(i){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===_:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?v.firstChild:v.lastChild],r&&y){for(x=(p=(c=(u=(d=(f=v)[g]||(f[g]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],f=p&&v.childNodes[p];f=++p&&f&&f[m]||(x=p=0)||h.pop();)if(1===f.nodeType&&++x&&f===t){u[e]=[w,p,x];break}}else if(y&&(x=p=(c=(u=(d=(f=t)[g]||(f[g]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===x)for(;(f=++p&&f&&f[m]||(x=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==_:1!==f.nodeType)||!++x||(y&&((u=(d=f[g]||(f[g]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[w,x]),f!==t)););return(x-=o)===a||x%a==0&&x/a>=0}}},PSEUDO:function(e,t){var n,o=a.pseudos[e]||a.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[g]?o(t):o.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var a,i=o(e,t),r=i.length;r--;)e[a=R(e,i[r])]=!(n[a]=i[r])})):function(e){return o(e,0,n)}):o}},pseudos:{not:ce((function(e){var t=[],n=[],a=s(e.replace(U,"$1"));return a[g]?ce((function(e,t,n,o){for(var i,r=a(e,null,o,[]),s=e.length;s--;)(i=r[s])&&(e[s]=!(t[s]=i))})):function(e,o,i){return t[0]=e,a(t,null,i,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return Z.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var a=n<0?n+t:n>t?t:n;--a>=0;)e.push(a);return e})),gt:ve((function(e,t,n){for(var a=n<0?n+t:n;++a<t;)e.push(a);return e}))}},a.pseudos.nth=a.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})a.pseudos[t]=he(t);function ye(){}function xe(e){for(var t=0,n=e.length,a="";t<n;t++)a+=e[t].value;return a}function ge(e,t,n){var a=t.dir,o=t.next,i=o||a,r=n&&"parentNode"===i,s=C++;return t.first?function(t,n,o){for(;t=t[a];)if(1===t.nodeType||r)return e(t,n,o);return!1}:function(t,n,l){var c,u,d,f=[w,s];if(l){for(;t=t[a];)if((1===t.nodeType||r)&&e(t,n,l))return!0}else for(;t=t[a];)if(1===t.nodeType||r)if(u=(d=t[g]||(t[g]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[a]||t;else{if((c=u[i])&&c[0]===w&&c[1]===s)return f[2]=c[2];if(u[i]=f,f[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,a){for(var o=e.length;o--;)if(!e[o](t,n,a))return!1;return!0}:e[0]}function we(e,t,n,a,o){for(var i,r=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,a,o)||(r.push(i),c&&t.push(s)));return r}function Ce(e,t,n,a,o,i){return a&&!a[g]&&(a=Ce(a)),o&&!o[g]&&(o=Ce(o,i)),ce((function(i,r,s,l){var c,u,d,f=[],p=[],h=r.length,m=i||function(e,t,n){for(var a=0,o=t.length;a<o;a++)se(e,t[a],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?m:we(m,f,e,s,l),_=n?o||(i?e:h||a)?[]:r:v;if(n&&n(v,_,s,l),a)for(c=we(_,p),a(c,[],s,l),u=c.length;u--;)(d=c[u])&&(_[p[u]]=!(v[p[u]]=d));if(i){if(o||e){if(o){for(c=[],u=_.length;u--;)(d=_[u])&&c.push(v[u]=d);o(null,_=[],c,l)}for(u=_.length;u--;)(d=_[u])&&(c=o?R(i,d):f[u])>-1&&(i[c]=!(r[c]=d))}}else _=we(_===r?_.splice(h,_.length):_),o?o(null,r,_,l):E.apply(r,_)}))}function Ae(e){for(var t,n,o,i=e.length,r=a.relative[e[0].type],s=r||a.relative[" "],l=r?1:0,u=ge((function(e){return e===t}),s,!0),d=ge((function(e){return R(t,e)>-1}),s,!0),f=[function(e,n,a){var o=!r&&(a||n!==c)||((t=n).nodeType?u(e,n,a):d(e,n,a));return t=null,o}];l<i;l++)if(n=a.relative[e[l].type])f=[ge(be(f),n)];else{if((n=a.filter[e[l].type].apply(null,e[l].matches))[g]){for(o=++l;o<i&&!a.relative[e[o].type];o++);return Ce(l>1&&be(f),l>1&&xe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,l<o&&Ae(e.slice(l,o)),o<i&&Ae(e=e.slice(o)),o<i&&xe(e))}f.push(n)}return be(f)}return ye.prototype=a.filters=a.pseudos,a.setFilters=new ye,r=se.tokenize=function(e,t){var n,o,i,r,s,l,c,u=I[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=a.preFilter;s;){for(r in n&&!(o=G.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(i=[])),n=!1,(o=B.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(U," ")}),s=s.slice(n.length)),a.filter)!(o=W[r].exec(s))||c[r]&&!(o=c[r](o))||(n=o.shift(),i.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):I(e,l).slice(0)},s=se.compile=function(e,t){var n,o=[],i=[],s=S[e+" "];if(!s){for(t||(t=r(e)),n=t.length;n--;)(s=Ae(t[n]))[g]?o.push(s):i.push(s);s=S(e,function(e,t){var n=t.length>0,o=e.length>0,i=function(i,r,s,l,u){var d,h,v,_=0,y="0",x=i&&[],g=[],b=c,C=i||o&&a.find.TAG("*",u),A=w+=null==b?1:Math.random()||.1,I=C.length;for(u&&(c=r==p||r||u);y!==I&&null!=(d=C[y]);y++){if(o&&d){for(h=0,r||d.ownerDocument==p||(f(d),s=!m);v=e[h++];)if(v(d,r||p,s)){l.push(d);break}u&&(w=A)}n&&((d=!v&&d)&&_--,i&&x.push(d))}if(_+=y,n&&y!==_){for(h=0;v=t[h++];)v(x,g,r,s);if(i){if(_>0)for(;y--;)x[y]||g[y]||(g[y]=D.call(l));g=we(g)}E.apply(l,g),u&&!i&&g.length>0&&_+t.length>1&&se.uniqueSort(l)}return u&&(w=A,c=b),x};return n?ce(i):i}(i,o)),s.selector=e}return s},l=se.select=function(e,t,n,o){var i,l,c,u,d,f="function"==typeof e&&e,p=!o&&r(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&a.relative[l[1].type]){if(!(t=(a.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=W.needsContext.test(e)?0:l.length;i--&&(c=l[i],!a.relative[u=c.type]);)if((d=a.find[u])&&(o=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&_e(t.parentNode)||t))){if(l.splice(i,1),!(e=o.length&&xe(l)))return E.apply(n,o),n;break}}return(f||s(e,p))(o,t,!m,n,!t||ee.test(e)&&_e(t.parentNode)||t),n},n.sortStable=g.split("").sort(T).join("")===g,n.detectDuplicates=!!d,f(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(P,(function(e,t,n){var a;if(!n)return!0===e[t]?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null})),se}(a);A.find=S,A.expr=S.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=S.uniqueSort,A.text=S.getText,A.isXMLDoc=S.isXML,A.contains=S.contains,A.escapeSelector=S.escape;var k=function(e,t,n){for(var a=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&A(e).is(n))break;a.push(e)}return a},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=A.expr.match.needsContext;function L(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,n){return _(t)?A.grep(e,(function(e,a){return!!t.call(e,a,e)!==n})):t.nodeType?A.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?A.grep(e,(function(e){return u.call(t,e)>-1!==n})):A.filter(t,e,n)}A.filter=function(e,t,n){var a=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===a.nodeType?A.find.matchesSelector(a,e)?[a]:[]:A.find.matches(e,A.grep(t,(function(e){return 1===e.nodeType})))},A.fn.extend({find:function(e){var t,n,a=this.length,o=this;if("string"!=typeof e)return this.pushStack(A(e).filter((function(){for(t=0;t<a;t++)if(A.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<a;t++)A.find(e,o[t],n);return a>1?A.uniqueSort(n):n},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&O.test(e)?A(e):e||[],!1).length}});var E,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(e,t,n){var a,o;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e))||!a[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),D.test(a[1])&&A.isPlainObject(t))for(a in t)_(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return(o=x.getElementById(a[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_(e)?void 0!==n.ready?n.ready(e):e(A):A.makeArray(e,this)}).prototype=A.fn,E=A(x);var R=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(A.contains(this,t[e]))return!0}))},closest:function(e,t){var n,a=0,o=this.length,i=[],r="string"!=typeof e&&A(e);if(!O.test(e))for(;a<o;a++)for(n=this[a];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&A.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?A.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?u.call(A(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(L(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},(function(e,t){A.fn[e]=function(n,a){var o=A.map(this,t,n);return"Until"!==e.slice(-5)&&(a=n),a&&"string"==typeof a&&(o=A.filter(a,o)),this.length>1&&(P[e]||A.uniqueSort(o),R.test(e)&&o.reverse()),this.pushStack(o)}}));var j=/[^\x20\t\r\n\f]+/g;function F(e){return e}function q(e){throw e}function H(e,t,n,a){var o;try{e&&_(o=e.promise)?o.call(e).done(t).fail(n):e&&_(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(a))}catch(e){n.apply(void 0,[e])}}A.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return A.each(e.match(j)||[],(function(e,n){t[n]=!0})),t}(e):A.extend({},e);var t,n,a,o,i=[],r=[],s=-1,l=function(){for(o=o||e.once,a=t=!0;r.length;s=-1)for(n=r.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,r.push(n)),function t(n){A.each(n,(function(n,a){_(a)?e.unique&&c.has(a)||i.push(a):a&&a.length&&"string"!==w(a)&&t(a)}))}(arguments),n&&!t&&l()),this},remove:function(){return A.each(arguments,(function(e,t){for(var n;(n=A.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(e){return e?A.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=r=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=r=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],r.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},A.extend({Deferred:function(e){var t=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return A.Deferred((function(n){A.each(t,(function(t,a){var o=_(e[a[4]])&&e[a[4]];i[a[1]]((function(){var e=o&&o.apply(this,arguments);e&&_(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var i=0;function r(e,t,n,o){return function(){var s=this,l=arguments,c=function(){var a,c;if(!(e<i)){if((a=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=a&&("object"==typeof a||"function"==typeof a)&&a.then,_(c)?o?c.call(a,r(i,t,F,o),r(i,t,q,o)):(i++,c.call(a,r(i,t,F,o),r(i,t,q,o),r(i,t,F,t.notifyWith))):(n!==F&&(s=void 0,l=[a]),(o||t.resolveWith)(s,l))}},u=o?c:function(){try{c()}catch(a){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(a,u.stackTrace),e+1>=i&&(n!==q&&(s=void 0,l=[a]),t.rejectWith(s,l))}};e?u():(A.Deferred.getStackHook&&(u.stackTrace=A.Deferred.getStackHook()),a.setTimeout(u))}}return A.Deferred((function(a){t[0][3].add(r(0,a,_(o)?o:F,a.notifyWith)),t[1][3].add(r(0,a,_(e)?e:F)),t[2][3].add(r(0,a,_(n)?n:q))})).promise()},promise:function(e){return null!=e?A.extend(e,o):o}},i={};return A.each(t,(function(e,a){var r=a[2],s=a[5];o[a[1]]=r.add,s&&r.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),r.add(a[3].fire),i[a[0]]=function(){return i[a[0]+"With"](this===i?void 0:this,arguments),this},i[a[0]+"With"]=r.fireWith})),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,a=Array(n),o=s.call(arguments),i=A.Deferred(),r=function(e){return function(n){a[e]=this,o[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(a,o)}};if(t<=1&&(H(e,i.done(r(n)).resolve,i.reject,!t),"pending"===i.state()||_(o[n]&&o[n].then)))return i.then();for(;n--;)H(o[n],r(n),i.reject);return i.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(e,t){a.console&&a.console.warn&&e&&U.test(e.name)&&a.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){a.setTimeout((function(){throw e}))};var G=A.Deferred();function B(){x.removeEventListener("DOMContentLoaded",B),a.removeEventListener("load",B),A.ready()}A.fn.ready=function(e){return G.then(e).catch((function(e){A.readyException(e)})),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0,!0!==e&&--A.readyWait>0||G.resolveWith(x,[A]))}}),A.ready.then=G.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?a.setTimeout(A.ready):(x.addEventListener("DOMContentLoaded",B),a.addEventListener("load",B));var V=function(e,t,n,a,o,i,r){var s=0,l=e.length,c=null==n;if("object"===w(n))for(s in o=!0,n)V(e,t,s,n[s],!0,i,r);else if(void 0!==a&&(o=!0,_(a)||(r=!0),c&&(r?(t.call(e,a),t=null):(c=t,t=function(e,t,n){return c.call(A(e),n)})),t))for(;s<l;s++)t(e[s],n,r?a:a.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):i},Y=/^-ms-/,Z=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function J(e){return e.replace(Y,"ms-").replace(Z,W)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=A.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var a,o=this.cache(e);if("string"==typeof t)o[J(t)]=n;else for(a in t)o[J(a)]=t[a];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,a=e[this.expando];if(void 0!==a){if(void 0!==t){n=(t=Array.isArray(t)?t.map(J):(t=J(t))in a?[t]:t.match(j)||[]).length;for(;n--;)delete a[t[n]]}(void 0===t||A.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!A.isEmptyObject(t)}};var Q=new X,$=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var a;if(void 0===n&&1===e.nodeType)if(a="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(a))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(o){}$.set(e,t,n)}else n=void 0;return n}A.extend({hasData:function(e){return $.hasData(e)||Q.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),A.fn.extend({data:function(e,t){var n,a,o,i=this[0],r=i&&i.attributes;if(void 0===e){if(this.length&&(o=$.get(i),1===i.nodeType&&!Q.get(i,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(a=r[n].name).indexOf("data-")&&(a=J(a.slice(5)),ne(i,a,o[a]));Q.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){$.set(this,e)})):V(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=$.get(i,e))||void 0!==(n=ne(i,e))?n:void 0;this.each((function(){$.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),A.extend({queue:function(e,t,n){var a;if(e)return t=(t||"fx")+"queue",a=Q.get(e,t),n&&(!a||Array.isArray(n)?a=Q.access(e,t,A.makeArray(n)):a.push(n)),a||[]},dequeue:function(e,t){t=t||"fx";var n=A.queue(e,t),a=n.length,o=n.shift(),i=A._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),a--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,(function(){A.dequeue(e,t)}),i)),!a&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:A.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),A.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?A.queue(this[0],e):void 0===t?this:this.each((function(){var n=A.queue(this,e,t);A._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&A.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){A.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,a=1,o=A.Deferred(),i=this,r=this.length,s=function(){--a||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(n=Q.get(i[r],e+"queueHooks"))&&n.empty&&(a++,n.empty.add(s));return s(),o.promise(t)}});var ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ae+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],re=x.documentElement,se=function(e){return A.contains(e.ownerDocument,e)},le={composed:!0};re.getRootNode&&(se=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===A.css(e,"display")};function ue(e,t,n,a){var o,i,r=20,s=a?function(){return a.cur()}:function(){return A.css(e,t,"")},l=s(),c=n&&n[3]||(A.cssNumber[t]?"":"px"),u=e.nodeType&&(A.cssNumber[t]||"px"!==c&&+l)&&oe.exec(A.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;r--;)A.style(e,t,u+c),(1-i)*(1-(i=s()/l||.5))<=0&&(r=0),u/=i;u*=2,A.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],a&&(a.unit=c,a.start=u,a.end=o)),o}var de={};function fe(e){var t,n=e.ownerDocument,a=e.nodeName,o=de[a];return o||(t=n.body.appendChild(n.createElement(a)),o=A.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),de[a]=o,o)}function pe(e,t){for(var n,a,o=[],i=0,r=e.length;i<r;i++)(a=e[i]).style&&(n=a.style.display,t?("none"===n&&(o[i]=Q.get(a,"display")||null,o[i]||(a.style.display="")),""===a.style.display&&ce(a)&&(o[i]=fe(a))):"none"!==n&&(o[i]="none",Q.set(a,"display",n)));for(i=0;i<r;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}A.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?A(this).show():A(this).hide()}))}});var he,me,ve=/^(?:checkbox|radio)$/i,_e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;he=x.createDocumentFragment().appendChild(x.createElement("div")),(me=x.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),he.appendChild(me),v.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",v.option=!!he.lastChild;var xe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&L(e,t)?A.merge([e],n):n}function be(e,t){for(var n=0,a=e.length;n<a;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,v.option||(xe.optgroup=xe.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function Ce(e,t,n,a,o){for(var i,r,s,l,c,u,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((i=e[p])||0===i)if("object"===w(i))A.merge(f,i.nodeType?[i]:i);else if(we.test(i)){for(r=r||d.appendChild(t.createElement("div")),s=(_e.exec(i)||["",""])[1].toLowerCase(),l=xe[s]||xe._default,r.innerHTML=l[1]+A.htmlPrefilter(i)+l[2],u=l[0];u--;)r=r.lastChild;A.merge(f,r.childNodes),(r=d.firstChild).textContent=""}else f.push(t.createTextNode(i));for(d.textContent="",p=0;i=f[p++];)if(a&&A.inArray(i,a)>-1)o&&o.push(i);else if(c=se(i),r=ge(d.appendChild(i),"script"),c&&be(r),n)for(u=0;i=r[u++];)ye.test(i.type||"")&&n.push(i);return d}var Ae=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function Se(){return!1}function ke(e,t){return e===function(){try{return x.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,n,a,o,i){var r,s;if("object"==typeof t){for(s in"string"!=typeof n&&(a=a||n,n=void 0),t)Te(e,s,n,a,t[s],i);return e}if(null==a&&null==o?(o=n,a=n=void 0):null==o&&("string"==typeof n?(o=a,a=void 0):(o=a,a=n,n=void 0)),!1===o)o=Se;else if(!o)return e;return 1===i&&(r=o,o=function(e){return A().off(e),r.apply(this,arguments)},o.guid=r.guid||(r.guid=A.guid++)),e.each((function(){A.event.add(this,t,o,a,n)}))}function Oe(e,t,n){n?(Q.set(e,t,!1),A.event.add(e,t,{namespace:!1,handler:function(e){var a,o,i=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(A.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=s.call(arguments),Q.set(this,t,i),a=n(this,t),this[t](),i!==(o=Q.get(this,t))||a?Q.set(this,t,!1):o={},i!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else i.length&&(Q.set(this,t,{value:A.event.trigger(A.extend(i[0],A.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&A.event.add(e,t,Ie)}A.event={global:{},add:function(e,t,n,a,o){var i,r,s,l,c,u,d,f,p,h,m,v=Q.get(e);if(K(e))for(n.handler&&(n=(i=n).handler,o=i.selector),o&&A.find.matchesSelector(re,o),n.guid||(n.guid=A.guid++),(l=v.events)||(l=v.events=Object.create(null)),(r=v.handle)||(r=v.handle=function(t){return void 0!==A&&A.event.triggered!==t.type?A.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(j)||[""]).length;c--;)p=m=(s=Ae.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=A.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=A.event.special[p]||{},u=A.extend({type:p,origType:m,data:a,handler:n,guid:n.guid,selector:o,needsContext:o&&A.expr.match.needsContext.test(o),namespace:h.join(".")},i),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,a,h,r)||e.addEventListener&&e.addEventListener(p,r)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,u):f.push(u),A.event.global[p]=!0)},remove:function(e,t,n,a,o){var i,r,s,l,c,u,d,f,p,h,m,v=Q.hasData(e)&&Q.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(j)||[""]).length;c--;)if(p=m=(s=Ae.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=A.event.special[p]||{},f=l[p=(a?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=i=f.length;i--;)u=f[i],!o&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||a&&a!==u.selector&&("**"!==a||!u.selector)||(f.splice(i,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));r&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||A.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)A.event.remove(e,p+t[c],n,a,!0);A.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,a,o,i,r,s=new Array(arguments.length),l=A.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],u=A.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(r=A.event.handlers.call(this,l,c),t=0;(o=r[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==i.namespace&&!l.rnamespace.test(i.namespace)||(l.handleObj=i,l.data=i.data,void 0!==(a=((A.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(l.result=a)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,a,o,i,r,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],r={},n=0;n<l;n++)void 0===r[o=(a=t[n]).selector+" "]&&(r[o]=a.needsContext?A(o,this).index(c)>-1:A.find(o,this,null,[c]).length),r[o]&&i.push(a);i.length&&s.push({elem:c,handlers:i})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&L(t,"input")&&Oe(t,"click",Ie),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&L(t,"input")&&Oe(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&L(t,"input")&&Q.get(t,"click")||L(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},(function(e,t){A.event.special[e]={setup:function(){return Oe(this,e,ke),!1},trigger:function(){return Oe(this,e),!0},_default:function(t){return Q.get(t.target,e)},delegateType:t}})),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){A.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,a=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===a||A.contains(a,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),A.fn.extend({on:function(e,t,n,a){return Te(this,e,t,n,a)},one:function(e,t,n,a){return Te(this,e,t,n,a,1)},off:function(e,t,n){var a,o;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,A(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each((function(){A.event.remove(this,e,n,t)}))}});var Le=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ee(e,t){return L(e,"table")&&L(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function ze(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,a,o,i,r,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(o in Q.remove(t,"handle events"),s)for(n=0,a=s[o].length;n<a;n++)A.event.add(t,o,s[o][n]);$.hasData(e)&&(i=$.access(e),r=A.extend({},i),$.set(t,r))}}function Ne(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ve.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function je(e,t,n,a){t=l(t);var o,i,r,s,c,u,d=0,f=e.length,p=f-1,h=t[0],m=_(h);if(m||f>1&&"string"==typeof h&&!v.checkClone&&De.test(h))return e.each((function(o){var i=e.eq(o);m&&(t[0]=h.call(this,o,i.html())),je(i,t,n,a)}));if(f&&(i=(o=Ce(t,e[0].ownerDocument,!1,e,a)).firstChild,1===o.childNodes.length&&(o=i),i||a)){for(s=(r=A.map(ge(o,"script"),ze)).length;d<f;d++)c=o,d!==p&&(c=A.clone(c,!0,!0),s&&A.merge(r,ge(c,"script"))),n.call(e[d],c,d);if(s)for(u=r[r.length-1].ownerDocument,A.map(r,Re),d=0;d<s;d++)c=r[d],ye.test(c.type||"")&&!Q.access(c,"globalEval")&&A.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?A._evalUrl&&!c.noModule&&A._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(Me,""),c,u))}return e}function Fe(e,t,n){for(var a,o=t?A.filter(t,e):e,i=0;null!=(a=o[i]);i++)n||1!==a.nodeType||A.cleanData(ge(a)),a.parentNode&&(n&&se(a)&&be(ge(a,"script")),a.parentNode.removeChild(a));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var a,o,i,r,s=e.cloneNode(!0),l=se(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(r=ge(s),a=0,o=(i=ge(e)).length;a<o;a++)Ne(i[a],r[a]);if(t)if(n)for(i=i||ge(e),r=r||ge(s),a=0,o=i.length;a<o;a++)Pe(i[a],r[a]);else Pe(e,s);return(r=ge(s,"script")).length>0&&be(r,!l&&ge(e,"script")),s},cleanData:function(e){for(var t,n,a,o=A.event.special,i=0;void 0!==(n=e[i]);i++)if(K(n)){if(t=n[Q.expando]){if(t.events)for(a in t.events)o[a]?A.event.remove(n,a):A.removeEvent(n,a,t.handle);n[Q.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return V(this,(function(e){return void 0===e?A.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return je(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ee(this,e).appendChild(e)}))},prepend:function(){return je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ee(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return A.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},n=0,a=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!xe[(_e.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;n<a;n++)1===(t=this[n]||{}).nodeType&&(A.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,(function(t){var n=this.parentNode;A.inArray(this,e)<0&&(A.cleanData(ge(this)),n&&n.replaceChild(t,this))}),e)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){A.fn[e]=function(e){for(var n,a=[],o=A(e),i=o.length-1,r=0;r<=i;r++)n=r===i?this:this.clone(!0),A(o[r])[t](n),c.apply(a,n.get());return this.pushStack(a)}}));var qe=new RegExp("^("+ae+")(?!px)[a-z%]+$","i"),He=/^--/,Ue=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=a),t.getComputedStyle(e)},Ge=function(e,t,n){var a,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in a=n.call(e),t)e.style[o]=i[o];return a},Be=new RegExp(ie.join("|"),"i"),Ve=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function Ye(e,t,n){var a,o,i,r,s=He.test(t),l=e.style;return(n=n||Ue(e))&&(r=n.getPropertyValue(t)||n[t],s&&(r=r.replace(Ve,"$1")),""!==r||se(e)||(r=A.style(e,t)),!v.pixelBoxStyles()&&qe.test(r)&&Be.test(t)&&(a=l.width,o=l.minWidth,i=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=n.width,l.width=a,l.minWidth=o,l.maxWidth=i)),void 0!==r?r+"":r}function Ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(u);var e=a.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",r=36===t(e.right),o=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),re.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,o,i,r,s,l,c=x.createElement("div"),u=x.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,A.extend(v,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,o;return null==s&&(e=x.createElement("table"),t=x.createElement("tr"),n=x.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),o=a.getComputedStyle(t),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),s}}))}();var We=["Webkit","Moz","ms"],Je=x.createElement("div").style,Ke={};function Xe(e){var t=A.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in Je)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,$e={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,n){var a=oe.exec(t);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):t}function nt(e,t,n,a,o,i){var r="width"===t?1:0,s=0,l=0;if(n===(a?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=A.css(e,n+ie[r],!0,o)),a?("content"===n&&(l-=A.css(e,"padding"+ie[r],!0,o)),"margin"!==n&&(l-=A.css(e,"border"+ie[r]+"Width",!0,o))):(l+=A.css(e,"padding"+ie[r],!0,o),"padding"!==n?l+=A.css(e,"border"+ie[r]+"Width",!0,o):s+=A.css(e,"border"+ie[r]+"Width",!0,o));return!a&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0),l}function at(e,t,n){var a=Ue(e),o=(!v.boxSizingReliable()||n)&&"border-box"===A.css(e,"boxSizing",!1,a),i=o,r=Ye(e,t,a),s="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(r)){if(!n)return r;r="auto"}return(!v.boxSizingReliable()&&o||!v.reliableTrDimensions()&&L(e,"tr")||"auto"===r||!parseFloat(r)&&"inline"===A.css(e,"display",!1,a))&&e.getClientRects().length&&(o="border-box"===A.css(e,"boxSizing",!1,a),(i=s in e)&&(r=e[s])),(r=parseFloat(r)||0)+nt(e,t,n||(o?"border":"content"),i,a,r)+"px"}function ot(e,t,n,a,o){return new ot.prototype.init(e,t,n,a,o)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,r,s=J(t),l=He.test(t),c=e.style;if(l||(t=Xe(s)),r=A.cssHooks[t]||A.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(e,!1,a))?o:c[t];"string"===(i=typeof n)&&(o=oe.exec(n))&&o[1]&&(n=ue(e,t,o),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=o&&o[3]||(A.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,a))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,a){var o,i,r,s=J(t);return He.test(t)||(t=Xe(s)),(r=A.cssHooks[t]||A.cssHooks[s])&&"get"in r&&(o=r.get(e,!0,n)),void 0===o&&(o=Ye(e,t,a)),"normal"===o&&t in et&&(o=et[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),A.each(["height","width"],(function(e,t){A.cssHooks[t]={get:function(e,n,a){if(n)return!Qe.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,a):Ge(e,$e,(function(){return at(e,t,a)}))},set:function(e,n,a){var o,i=Ue(e),r=!v.scrollboxSize()&&"absolute"===i.position,s=(r||a)&&"border-box"===A.css(e,"boxSizing",!1,i),l=a?nt(e,t,a,s,i):0;return s&&r&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-nt(e,t,"border",!1,i)-.5)),l&&(o=oe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=A.css(e,t)),tt(0,n,l)}}})),A.cssHooks.marginLeft=Ze(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),A.each({margin:"",padding:"",border:"Width"},(function(e,t){A.cssHooks[e+t]={expand:function(n){for(var a=0,o={},i="string"==typeof n?n.split(" "):[n];a<4;a++)o[e+ie[a]+t]=i[a]||i[a-2]||i[0];return o}},"margin"!==e&&(A.cssHooks[e+t].set=tt)})),A.fn.extend({css:function(e,t){return V(this,(function(e,t,n){var a,o,i={},r=0;if(Array.isArray(t)){for(a=Ue(e),o=t.length;r<o;r++)i[t[r]]=A.css(e,t[r],!1,a);return i}return void 0!==n?A.style(e,t,n):A.css(e,t)}),e,t,arguments.length>1)}}),A.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,n,a,o,i){this.elem=e,this.prop=n,this.easing=o||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=i||(A.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=A.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=ot.prototype.init,A.fx.step={};var it,rt,st=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function ct(){rt&&(!1===x.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(ct):a.setTimeout(ct,A.fx.interval),A.fx.tick())}function ut(){return a.setTimeout((function(){it=void 0})),it=Date.now()}function dt(e,t){var n,a=0,o={height:e};for(t=t?1:0;a<4;a+=2-t)o["margin"+(n=ie[a])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ft(e,t,n){for(var a,o=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,r=o.length;i<r;i++)if(a=o[i].call(n,t,e))return a}function pt(e,t,n){var a,o,i=0,r=pt.prefilters.length,s=A.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=it||ut(),n=Math.max(0,c.startTime+c.duration-t),a=1-(n/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(a);return s.notifyWith(e,[c,a,n]),a<1&&r?n:(r||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:A.extend({},t),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var a=A.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(a),a},stop:function(t){var n=0,a=t?c.tweens.length:0;if(o)return this;for(o=!0;n<a;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,a,o,i,r;for(n in e)if(o=t[a=J(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==a&&(e[a]=i,delete e[n]),(r=A.cssHooks[a])&&"expand"in r)for(n in i=r.expand(i),delete e[a],i)n in e||(e[n]=i[n],t[n]=o);else t[a]=o}(u,c.opts.specialEasing);i<r;i++)if(a=pt.prefilters[i].call(c,e,u,c.opts))return _(a.stop)&&(A._queueHooks(c.elem,c.opts.queue).stop=a.stop.bind(a)),a;return A.map(u,ft,c),_(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),A.fx.timer(A.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}A.Animation=A.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){_(e)?(t=e,e=["*"]):e=e.match(j);for(var n,a=0,o=e.length;a<o;a++)n=e[a],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var a,o,i,r,s,l,c,u,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&ce(e),v=Q.get(e,"fxshow");for(a in n.queue||(null==(r=A._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,f.always((function(){f.always((function(){r.unqueued--,A.queue(e,"fx").length||r.empty.fire()}))}))),t)if(o=t[a],st.test(o)){if(delete t[a],i=i||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!v||void 0===v[a])continue;m=!0}p[a]=v&&v[a]||A.style(e,a)}if((l=!A.isEmptyObject(t))||!A.isEmptyObject(p))for(a in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=v&&v.display)&&(c=Q.get(e,"display")),"none"===(u=A.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=A.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===A.css(e,"float")&&(l||(f.done((function(){h.display=c})),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,p)l||(v?"hidden"in v&&(m=v.hidden):v=Q.access(e,"fxshow",{display:c}),i&&(v.hidden=!m),m&&pe([e],!0),f.done((function(){for(a in m||pe([e]),Q.remove(e,"fxshow"),p)A.style(e,a,p[a])}))),l=ft(m?v[a]:0,a,f),a in v||(v[a]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),A.speed=function(e,t,n){var a=e&&"object"==typeof e?A.extend({},e):{complete:n||!n&&t||_(e)&&e,duration:e,easing:n&&t||t&&!_(t)&&t};return A.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in A.fx.speeds?a.duration=A.fx.speeds[a.duration]:a.duration=A.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){_(a.old)&&a.old.call(this),a.queue&&A.dequeue(this,a.queue)},a},A.fn.extend({fadeTo:function(e,t,n,a){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,a)},animate:function(e,t,n,a){var o=A.isEmptyObject(e),i=A.speed(t,n,a),r=function(){var t=pt(this,A.extend({},e),i);(o||Q.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===i.queue?this.each(r):this.queue(i.queue,r)},stop:function(e,t,n){var a=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",i=A.timers,r=Q.get(this);if(o)r[o]&&r[o].stop&&a(r[o]);else for(o in r)r[o]&&r[o].stop&&lt.test(o)&&a(r[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||A.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),a=n[e+"queue"],o=n[e+"queueHooks"],i=A.timers,r=a?a.length:0;for(n.finish=!0,A.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<r;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete n.finish}))}}),A.each(["toggle","show","hide"],(function(e,t){var n=A.fn[t];A.fn[t]=function(e,a,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(dt(t,!0),e,a,o)}})),A.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){A.fn[e]=function(e,n,a){return this.animate(t,e,n,a)}})),A.timers=[],A.fx.tick=function(){var e,t=0,n=A.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||A.fx.stop(),it=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){rt||(rt=!0,ct())},A.fx.stop=function(){rt=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(e,t){return e=A.fx&&A.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=a.setTimeout(t,e);n.stop=function(){a.clearTimeout(o)}}))},function(){var e=x.createElement("input"),t=x.createElement("select").appendChild(x.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=x.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ht,mt=A.expr.attrHandle;A.fn.extend({attr:function(e,t){return V(this,A.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){A.removeAttr(this,e)}))}}),A.extend({attr:function(e,t,n){var a,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?A.prop(e,t,n):(1===i&&A.isXMLDoc(e)||(o=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void A.removeAttr(e,t):o&&"set"in o&&void 0!==(a=o.set(e,n,t))?a:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(a=o.get(e,t))?a:null==(a=A.find.attr(e,t))?void 0:a)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&L(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,a=0,o=t&&t.match(j);if(o&&1===e.nodeType)for(;n=o[a++];)e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?A.removeAttr(e,n):e.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=mt[t]||A.find.attr;mt[t]=function(e,t,a){var o,i,r=t.toLowerCase();return a||(i=mt[r],mt[r]=o,o=null!=n(e,t,a)?r:null,mt[r]=i),o}}));var vt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;function yt(e){return(e.match(j)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(j)||[]}A.fn.extend({prop:function(e,t){return V(this,A.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[A.propFix[e]||e]}))}}),A.extend({prop:function(e,t,n){var a,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&A.isXMLDoc(e)||(t=A.propFix[t]||t,o=A.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(a=o.set(e,n,t))?a:e[t]=n:o&&"get"in o&&null!==(a=o.get(e,t))?a:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(A.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){A.propFix[this.toLowerCase()]=this})),A.fn.extend({addClass:function(e){var t,n,a,o,i,r;return _(e)?this.each((function(t){A(this).addClass(e.call(this,t,xt(this)))})):(t=gt(e)).length?this.each((function(){if(a=xt(this),n=1===this.nodeType&&" "+yt(a)+" "){for(i=0;i<t.length;i++)o=t[i],n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=yt(n),a!==r&&this.setAttribute("class",r)}})):this},removeClass:function(e){var t,n,a,o,i,r;return _(e)?this.each((function(t){A(this).removeClass(e.call(this,t,xt(this)))})):arguments.length?(t=gt(e)).length?this.each((function(){if(a=xt(this),n=1===this.nodeType&&" "+yt(a)+" "){for(i=0;i<t.length;i++)for(o=t[i];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");r=yt(n),a!==r&&this.setAttribute("class",r)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,a,o,i,r=typeof e,s="string"===r||Array.isArray(e);return _(e)?this.each((function(n){A(this).toggleClass(e.call(this,n,xt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=gt(e),this.each((function(){if(s)for(i=A(this),o=0;o<n.length;o++)a=n[o],i.hasClass(a)?i.removeClass(a):i.addClass(a);else void 0!==e&&"boolean"!==r||((a=xt(this))&&Q.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||!1===e?"":Q.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,a=0;for(t=" "+e+" ";n=this[a++];)if(1===n.nodeType&&(" "+yt(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;A.fn.extend({val:function(e){var t,n,a,o=this[0];return arguments.length?(a=_(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=a?e.call(this,n,A(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=A.map(o,(function(e){return null==e?"":e+""}))),(t=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=A.valHooks[o.type]||A.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(bt,""):null==n?"":n:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:yt(A.text(e))}},select:{get:function(e){var t,n,a,o=e.options,i=e.selectedIndex,r="select-one"===e.type,s=r?null:[],l=r?i+1:o.length;for(a=i<0?l:r?i:0;a<l;a++)if(((n=o[a]).selected||a===i)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(t=A(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,a,o=e.options,i=A.makeArray(t),r=o.length;r--;)((a=o[r]).selected=A.inArray(A.valHooks.option.get(a),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),A.each(["radio","checkbox"],(function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=A.inArray(A(e).val(),t)>-1}},v.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in a;var wt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};A.extend(A.event,{trigger:function(e,t,n,o){var i,r,s,l,c,u,d,f,h=[n||x],m=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(r=f=s=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!wt.test(m+A.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[A.expando]?e:new A.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:A.makeArray(t,[e]),d=A.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!y(n)){for(l=d.delegateType||m,wt.test(l+m)||(r=r.parentNode);r;r=r.parentNode)h.push(r),s=r;s===(n.ownerDocument||x)&&h.push(s.defaultView||s.parentWindow||a)}for(i=0;(r=h[i++])&&!e.isPropagationStopped();)f=r,e.type=i>1?l:d.bindType||m,(u=(Q.get(r,"events")||Object.create(null))[e.type]&&Q.get(r,"handle"))&&u.apply(r,t),(u=c&&r[c])&&u.apply&&K(r)&&(e.result=u.apply(r,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),t)||!K(n)||c&&_(n[m])&&!y(n)&&((s=n[c])&&(n[c]=null),A.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,Ct),n[m](),e.isPropagationStopped()&&f.removeEventListener(m,Ct),A.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var a=A.extend(new A.Event,n,{type:e,isSimulated:!0});A.event.trigger(a,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each((function(){A.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return A.event.trigger(e,t,n,!0)}}),v.focusin||A.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){A.event.simulate(t,e.target,A.event.fix(e))};A.event.special[t]={setup:function(){var a=this.ownerDocument||this.document||this,o=Q.access(a,t);o||a.addEventListener(e,n,!0),Q.access(a,t,(o||0)+1)},teardown:function(){var a=this.ownerDocument||this.document||this,o=Q.access(a,t)-1;o?Q.access(a,t,o):(a.removeEventListener(e,n,!0),Q.remove(a,t))}}}));var At=a.location,It={guid:Date.now()},St=/\?/;A.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new a.DOMParser).parseFromString(e,"text/xml")}catch(o){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||A.error("Invalid XML: "+(n?A.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var kt=/\[\]$/,Tt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,a){var o;if(Array.isArray(t))A.each(t,(function(t,o){n||kt.test(e)?a(e,o):Dt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,a)}));else if(n||"object"!==w(t))a(e,t);else for(o in t)Dt(e+"["+o+"]",t[o],n,a)}A.param=function(e,t){var n,a=[],o=function(e,t){var n=_(t)?t():t;a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,(function(){o(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,o);return a.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Lt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!ve.test(e))})).map((function(e,t){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var Mt=/%20/g,Et=/#.*$/,zt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Nt=/^\/\//,jt={},Ft={},qt="*/".concat("*"),Ht=x.createElement("a");function Ut(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var a,o=0,i=t.toLowerCase().match(j)||[];if(_(n))for(;a=i[o++];)"+"===a[0]?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function Gt(e,t,n,a){var o={},i=e===Ft;function r(s){var l;return o[s]=!0,A.each(e[s]||[],(function(e,s){var c=s(t,n,a);return"string"!=typeof c||i||o[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)})),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Bt(e,t){var n,a,o=A.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:a||(a={}))[n]=t[n]);return a&&A.extend(!0,e,a),e}Ht.href=At.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,A.ajaxSettings),t):Bt(A.ajaxSettings,e)},ajaxPrefilter:Ut(jt),ajaxTransport:Ut(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,i,r,s,l,c,u,d,f,p=A.ajaxSetup({},t),h=p.context||p,m=p.context&&(h.nodeType||h.jquery)?A(h):A.event,v=A.Deferred(),_=A.Callbacks("once memory"),y=p.statusCode||{},g={},b={},w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!r)for(r={};t=Rt.exec(i);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=b[e.toLowerCase()]=b[e.toLowerCase()]||e,g[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),I(0,t),this}};if(v.promise(C),p.url=((e||p.url||At.href)+"").replace(Nt,At.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(j)||[""],null==p.crossDomain){l=x.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=l.protocol+"//"+l.host}catch(S){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=A.param(p.data,p.traditional)),Gt(jt,p,t,C),c)return C;for(d in(u=A.event&&p.global)&&0==A.active++&&A.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),o=p.url.replace(Et,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Mt,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(St.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(zt,"$1"),f=(St.test(o)?"&":"?")+"_="+It.guid+++f),p.url=o+f),p.ifModified&&(A.lastModified[o]&&C.setRequestHeader("If-Modified-Since",A.lastModified[o]),A.etag[o]&&C.setRequestHeader("If-None-Match",A.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qt+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,C,p)||c))return C.abort();if(w="abort",_.add(p.complete),C.done(p.success),C.fail(p.error),n=Gt(Ft,p,t,C)){if(C.readyState=1,u&&m.trigger("ajaxSend",[C,p]),c)return C;p.async&&p.timeout>0&&(s=a.setTimeout((function(){C.abort("timeout")}),p.timeout));try{c=!1,n.send(g,I)}catch(S){if(c)throw S;I(-1,S)}}else I(-1,"No Transport");function I(e,t,r,l){var d,f,x,g,b,w=t;c||(c=!0,s&&a.clearTimeout(s),n=void 0,i=l||"",C.readyState=e>0?4:0,d=e>=200&&e<300||304===e,r&&(g=function(e,t,n){for(var a,o,i,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in s)if(s[o]&&s[o].test(a)){l.unshift(o);break}if(l[0]in n)i=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){i=o;break}r||(r=o)}i=i||r}if(i)return i!==l[0]&&l.unshift(i),n[i]}(p,C,r)),!d&&A.inArray("script",p.dataTypes)>-1&&A.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),g=function(e,t,n,a){var o,i,r,s,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(r=c[l+" "+i]||c["* "+i]))for(o in c)if((s=o.split(" "))[1]===i&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[o]:!0!==c[o]&&(i=s[0],u.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(S){return{state:"parsererror",error:r?S:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(p,g,C,d),d?(p.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(A.lastModified[o]=b),(b=C.getResponseHeader("etag"))&&(A.etag[o]=b)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=g.state,f=g.data,d=!(x=g.error))):(x=w,!e&&w||(w="error",e<0&&(e=0))),C.status=e,C.statusText=(t||w)+"",d?v.resolveWith(h,[f,w,C]):v.rejectWith(h,[C,w,x]),C.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[C,p,d?f:x]),_.fireWith(h,[C,w]),u&&(m.trigger("ajaxComplete",[C,p]),--A.active||A.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return A.get(e,t,n,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],(function(e,t){A[t]=function(e,n,a,o){return _(n)&&(o=o||a,a=n,n=void 0),A.ajax(A.extend({url:e,type:t,dataType:o,data:n,success:a},A.isPlainObject(e)&&e))}})),A.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),A._evalUrl=function(e,t,n){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,n)}})},A.fn.extend({wrapAll:function(e){var t;return this[0]&&(_(e)&&(e=e.call(this[0])),t=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return _(e)?this.each((function(t){A(this).wrapInner(e.call(this,t))})):this.each((function(){var t=A(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=_(e);return this.each((function(n){A(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){A(this).replaceWith(this.childNodes)})),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Yt=A.ajaxSettings.xhr();v.cors=!!Yt&&"withCredentials"in Yt,v.ajax=Yt=!!Yt,A.ajaxTransport((function(e){var t,n;if(v.cors||Yt&&!e.crossDomain)return{send:function(o,i){var r,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];for(r in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(r,o[r]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&a.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),A.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),A.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(a,o){t=A("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),x.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Zt,Wt=[],Jt=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||A.expando+"_"+It.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",(function(e,t,n){var o,i,r,s=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Jt,"$1"+o):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||A.error(o+" was not called"),r[0]},e.dataTypes[0]="json",i=a[o],a[o]=function(){r=arguments},n.always((function(){void 0===i?A(a).removeProp(o):a[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(o)),r&&_(i)&&i(r[0]),r=i=void 0})),"script"})),v.createHTMLDocument=((Zt=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Zt.childNodes.length),A.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((a=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(a)):t=x),i=!n&&[],(o=D.exec(e))?[t.createElement(o[1])]:(o=Ce([e],t,i),i&&i.length&&A(i).remove(),A.merge([],o.childNodes)));var a,o,i},A.fn.load=function(e,t,n){var a,o,i,r=this,s=e.indexOf(" ");return s>-1&&(a=yt(e.slice(s)),e=e.slice(0,s)),_(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&A.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){i=arguments,r.html(a?A("<div>").append(A.parseHTML(e)).find(a):e)})).always(n&&function(e,t){r.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},A.expr.pseudos.animated=function(e){return A.grep(A.timers,(function(t){return e===t.elem})).length},A.offset={setOffset:function(e,t,n){var a,o,i,r,s,l,c=A.css(e,"position"),u=A(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),i=A.css(e,"top"),l=A.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(r=(a=u.position()).top,o=a.left):(r=parseFloat(i)||0,o=parseFloat(l)||0),_(t)&&(t=t.call(e,n,A.extend({},s))),null!=t.top&&(d.top=t.top-s.top+r),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):u.css(d)}},A.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){A.offset.setOffset(this,e,t)}));var t,n,a=this[0];return a?a.getClientRects().length?(t=a.getBoundingClientRect(),n=a.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,a=this[0],o={top:0,left:0};if("fixed"===A.css(a,"position"))t=a.getBoundingClientRect();else{for(t=this.offset(),n=a.ownerDocument,e=a.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==a&&1===e.nodeType&&((o=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),o.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-A.css(a,"marginTop",!0),left:t.left-o.left-A.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||re}))}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;A.fn[e]=function(a){return V(this,(function(e,a,o){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[a];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[a]=o}),e,a,arguments.length)}})),A.each(["top","left"],(function(e,t){A.cssHooks[t]=Ze(v.pixelPosition,(function(e,n){if(n)return n=Ye(e,t),qe.test(n)?A(e).position()[t]+"px":n}))})),A.each({Height:"height",Width:"width"},(function(e,t){A.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,a){A.fn[a]=function(o,i){var r=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return V(this,(function(t,n,o){var i;return y(t)?0===a.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?A.css(t,n,s):A.style(t,n,o,s)}),t,r?o:void 0,r)}}))})),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){A.fn[t]=function(e){return this.on(t,e)}})),A.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,a){return this.on(t,e,n,a)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){A.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Kt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(e,t){var n,a,o;if("string"==typeof t&&(n=e[t],t=e,e=n),_(e))return a=s.call(arguments,2),o=function(){return e.apply(t||this,a.concat(s.call(arguments)))},o.guid=e.guid=e.guid||A.guid++,o},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=L,A.isFunction=_,A.isWindow=y,A.camelCase=J,A.type=w,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(Kt,"$1")},void 0===(n=function(){return A}.apply(t,[]))||(e.exports=n);var Xt=a.jQuery,Qt=a.$;return A.noConflict=function(e){return a.$===A&&(a.$=Qt),e&&a.jQuery===A&&(a.jQuery=Xt),A},void 0===o&&(a.jQuery=a.$=A),A}))},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},r=[],s=0;s<e.length;s++){var l=e[s],c=a.base?l[0]+a.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var f=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,a);a.byIndex=s,t.splice(s,0,{identifier:d,updater:h,references:1})}r.push(d)}return r}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=a(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<i.length;r++){var s=n(i[r]);t[s].references--}for(var l=a(e,o),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(a){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},825:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 model;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_aitoff(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},831:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_arc(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},624:e=>{e.exports="#version 300 es\nprecision lowp float;in vec2 out_uv;in vec3 out_p;out vec4 color;uniform sampler2D kernel_texture;uniform float max_density;uniform float fov;uniform float strength;void main(){color=texture(kernel_texture,out_uv)/max(log2(fov*100.),1.);color.r*=strength;}"},610:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 model;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_healpix(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},614:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_mercator(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},892:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_mollweide(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},585:e=>{e.exports="#version 300 es\nprecision lowp float;in vec2 out_uv;in vec3 out_p;out vec4 color;uniform sampler2D kernel_texture;uniform float max_density;uniform float fov;uniform float strength;void main(){if(out_p.z<0.f){discard;}color=texture(kernel_texture,out_uv)/max(log2(fov*100.),1.);color.r*=strength;}"},418:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_orthographic(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},494:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 offset;layout(location=1)in vec2 uv;layout(location=2)in vec3 center;uniform float current_time;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform vec2 kernel_size;out vec2 out_uv;out vec3 out_p;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec3 p=vec3(inv_model*vec4(center,1.0f));vec2 center_pos_clip_space=world2clip_gnomonic(p);vec2 pos_clip_space=center_pos_clip_space;gl_Position=vec4((pos_clip_space/(ndc_to_clip*czf))+offset*kernel_size,0.f,1.f);out_uv=uv;out_p=p;}"},820:e=>{e.exports="#version 300 es\nprecision lowp float;precision lowp sampler2D;in vec2 out_uv;out vec4 color;uniform sampler2D texture_fbo;uniform float alpha;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}void main(){float opacity=texture(texture_fbo,out_uv).r;float o=smoothstep(0.,0.1,opacity);color=colormap_f(opacity);color.a=o*alpha;}"},652:e=>{e.exports="#version 300 es\nprecision lowp float;precision lowp sampler2D;layout(location=0)in vec2 position;layout(location=1)in vec2 uv;out vec2 out_uv;void main(){gl_Position=vec4(position,0.f,1.f);out_uv=uv;}"},607:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision highp usampler2D;precision mediump int;out vec4 out_frag_color;in vec2 frag_uv;uniform isampler2D tex;uniform float opacity;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}void main(){ivec4 color=texture(tex,frag_uv);out_frag_color=apply_colormap_to_grayscale(float(color.r),float(color.a));out_frag_color.a=out_frag_color.a*opacity;}"},171:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision highp usampler2D;precision mediump int;out vec4 out_frag_color;in vec2 frag_uv;uniform sampler2D tex;uniform float opacity;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}void main(){vec4 color=texture(tex,frag_uv);out_frag_color=apply_colormap_to_grayscale(color.r,color.a);out_frag_color.a=out_frag_color.a*opacity;}"},698:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision highp usampler2D;precision mediump int;out vec4 out_frag_color;in vec2 frag_uv;uniform usampler2D tex;uniform float opacity;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}void main(){uvec4 color=texture(tex,frag_uv);out_frag_color=apply_colormap_to_grayscale(float(color.r),float(color.a));out_frag_color.a=out_frag_color.a*opacity;}"},262:e=>{e.exports="#version 300 es\nprecision highp float;precision mediump int;layout(location=0)in vec2 ndc_pos;layout(location=1)in vec2 uv;out vec2 frag_uv;void main(){gl_Position=vec4(ndc_pos,0.,1.);frag_uv=uv;}"},371:e=>{e.exports="#version 300 es\nprecision lowp float;out vec4 frag_color;uniform vec3 color;uniform float opacity;const float PI=3.141592653589793f;void main(){frag_color=vec4(color,opacity);}"},579:e=>{e.exports="#version 300 es\nprecision lowp float;layout(location=0)in vec2 ndc_pos;void main(){gl_Position=vec4(ndc_pos,0.,1.);}"},378:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_uv_start;in vec3 frag_uv_end;in float frag_blending_factor;in float m_start;in float m_end;out vec4 out_frag_color;uniform float opacity;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}void main(){vec4 color_start=get_color_from_texture(frag_uv_start);vec4 color_end=get_color_from_texture(frag_uv_end);out_frag_color=mix(color_start,color_end,frag_blending_factor);out_frag_color.a=opacity*out_frag_color.a;}"},593:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_uv_start;in vec3 frag_uv_end;in float frag_blending_factor;in float m_start;in float m_end;out vec4 out_frag_color;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}uniform float opacity;void main(){vec4 color_start=get_colormap_from_grayscale_texture(frag_uv_start);vec4 color_end=get_colormap_from_grayscale_texture(frag_uv_end);out_frag_color=mix(color_start,color_end,frag_blending_factor);out_frag_color.a=out_frag_color.a*opacity;}"},567:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_uv_start;in vec3 frag_uv_end;in float frag_blending_factor;in float m_start;in float m_end;out vec4 out_frag_color;uniform isampler2D tex1;uniform isampler2D tex2;uniform isampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float reversed;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}ivec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return ivec4(0,0,0,1);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));float x=float(get_pixels(uv).r);float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha),vec4(0.),float(x==blank));return apply_tonal(new_color);}uniform float opacity;void main(){vec4 color_start=get_colormap_from_grayscale_texture(frag_uv_start);vec4 color_end=get_colormap_from_grayscale_texture(frag_uv_end);out_frag_color=mix(color_start,color_end,frag_blending_factor);out_frag_color.a=out_frag_color.a*opacity;}"},206:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp isampler2D;precision highp usampler2D;precision mediump int;in vec3 frag_uv_start;in vec3 frag_uv_end;in float frag_blending_factor;in float m_start;in float m_end;out vec4 out_frag_color;uniform usampler2D tex1;uniform usampler2D tex2;uniform usampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float reversed;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}uvec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return uvec4(0,0,0,1);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));float x=float(get_pixels(uv).r);float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha),vec4(0.),float(x==blank));return apply_tonal(new_color);}uniform float opacity;void main(){vec4 color_start=get_colormap_from_grayscale_texture(frag_uv_start);vec4 color_end=get_colormap_from_grayscale_texture(frag_uv_end);out_frag_color=mix(color_start,color_end,frag_blending_factor);out_frag_color.a=out_frag_color.a*opacity;}"},627:e=>{e.exports="#version 300 es\nprecision highp float;precision mediump int;layout(location=0)in vec2 ndc_pos;layout(location=1)in vec3 uv_start;layout(location=2)in vec3 uv_end;layout(location=3)in float time_tile_received;layout(location=4)in float m0;layout(location=5)in float m1;out vec3 frag_uv_start;out vec3 frag_uv_end;out float frag_blending_factor;out float m_start;out float m_end;uniform mat4 inv_model;uniform vec2 ndc_to_clip;uniform float czf;uniform float current_time;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){gl_Position=vec4(ndc_pos,0.,1.);frag_uv_start=uv_start;frag_uv_end=uv_end;frag_blending_factor=min((current_time-time_tile_received)/200.,1.);m_start=m0;m_end=m1;}"},943:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp usampler2D;precision highp isampler2D;precision mediump int;out vec4 out_frag_color;uniform vec3 color;void main(){out_frag_color=vec4(color,1.);}"},20:e=>{e.exports="#version 300 es\nprecision highp float;precision mediump int;layout(location=0)in vec2 pos_clip_space;uniform vec2 ndc_to_clip;uniform float czf;void main(){gl_Position=vec4(pos_clip_space/(ndc_to_clip*czf),0.,1.);}"},935:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp usampler2D;precision highp isampler2D;precision mediump int;in vec2 out_clip_pos;in vec3 frag_pos;out vec4 out_frag_color;struct Tile{int uniq;int texture_idx;float start_time;float empty;};uniform Tile textures_tiles[12];uniform int num_tiles;uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}const float TWICE_PI=6.28318530718;const float PI=3.141592653589793;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;int quarter(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int q=(x_neg+y_neg)|(y_neg<<1);return q;}float xpm1(vec2 p){bool x_neg=(p.x<0.);bool y_neg=(p.y<0.);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return 1.-x02;}else{return x02-1.;}}float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.0f-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1f){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}int ij2z(int i,int j){int i4=i|(j<<2);int j4=(i4^(i4>>1))&0x22222222;int i5=i4^j4^(j4<<1);return i5;}struct HashDxDy{int idx;float dx;float dy;};uniform sampler2D ang2pixd;HashDxDy hash_with_dxdy2(vec2 radec){vec2 aa=vec2(radec.x/TWICE_PI+1.,(radec.y/PI)+0.5);vec3 v=texture(ang2pixd,aa).rgb;return HashDxDy(int(v.x*255.),v.y,v.z);}HashDxDy hash_with_dxdy(int depth,vec3 p){int nside=1<<depth;float half_nside=float(nside)*0.5;float x_pm1=xpm1(p.xy);int q=quarter(p.xy);int d0h=0;vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,2.-sqrt_3_one_min_z);d0h=q;}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,sqrt_3_one_min_z);d0h=q+8;}else{float y_pm1=p.z*TRANSITION_Z_INV;int q01=int(x_pm1>y_pm1);int q12=int(x_pm1>=-y_pm1);int q03=1-q12;int q1=q01&q12;p_proj=vec2(x_pm1-float(q01+q12-1),y_pm1+float(q01+q03));d0h=((q01+q03)<<2)+((q+q1)&3);}float x=(half_nside*(p_proj.x+p_proj.y));float y=(half_nside*(p_proj.y-p_proj.x));int i=int(x);int j=int(y);return HashDxDy((d0h<<(depth<<1))+ij2z(i,j),x-float(i),y-float(j));}uniform float opacity;vec4 get_tile_color(vec3 pos){HashDxDy result=hash_with_dxdy(0,pos.zxy);int idx=result.idx;vec2 uv=vec2(result.dy,result.dx);Tile tile=textures_tiles[idx];int idx_texture=tile.texture_idx>>6;int off=tile.texture_idx&0x3F;float idx_row=float(off>>3);float idx_col=float(off&0x7);vec2 offset=(vec2(idx_col,idx_row)+uv)*0.125;vec3 UV=vec3(offset,float(idx_texture));vec4 color=get_color_from_texture(UV);return color;}uniform sampler2D position_tex;uniform mat4 model;void main(){vec4 c=get_tile_color(normalize(frag_pos));out_frag_color=vec4(c.rgb,opacity*c.a);}"},187:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp usampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_pos;in vec2 out_clip_pos;out vec4 out_frag_color;struct Tile{int uniq;int texture_idx;float start_time;float empty;};uniform Tile textures_tiles[12];uniform float opacity;struct TileColor{Tile tile;vec4 color;bool found;};uniform sampler2D tex1;uniform sampler2D tex2;uniform sampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}vec3 rgb2hsv(vec3 c){vec4 K=vec4(0.,-1./3.,2./3.,-1.);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.,2./3.,1./3.,3.);vec3 p=abs(fract(c.xxx+K.xyz)*6.-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.,1.),c.y);}vec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return vec4(0.,1.,0.,1.);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}uniform float reversed;vec4 get_color_from_texture(vec3 UV){vec4 color=get_pixels(UV);color.r=transfer_func(H,color.r,min_value,max_value);color.g=transfer_func(H,color.g,min_value,max_value);color.b=transfer_func(H,color.b,min_value,max_value);color.rgb=mix(color.rgb,1.-color.rgb,reversed);return apply_tonal(color);}vec4 apply_colormap_to_grayscale(float x,float a){float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha)*a,vec4(0.),float(x==blank||isnan(x)));return apply_tonal(new_color);}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));vec4 color=get_pixels(uv);return apply_colormap_to_grayscale(color.r,color.a);}const float TWICE_PI=6.28318530718;const float PI=3.141592653589793;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;int quarter(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int q=(x_neg+y_neg)|(y_neg<<1);return q;}float xpm1(vec2 p){bool x_neg=(p.x<0.);bool y_neg=(p.y<0.);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return 1.-x02;}else{return x02-1.;}}float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.0f-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1f){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}int ij2z(int i,int j){int i4=i|(j<<2);int j4=(i4^(i4>>1))&0x22222222;int i5=i4^j4^(j4<<1);return i5;}struct HashDxDy{int idx;float dx;float dy;};uniform sampler2D ang2pixd;HashDxDy hash_with_dxdy2(vec2 radec){vec2 aa=vec2(radec.x/TWICE_PI+1.,(radec.y/PI)+0.5);vec3 v=texture(ang2pixd,aa).rgb;return HashDxDy(int(v.x*255.),v.y,v.z);}HashDxDy hash_with_dxdy(int depth,vec3 p){int nside=1<<depth;float half_nside=float(nside)*0.5;float x_pm1=xpm1(p.xy);int q=quarter(p.xy);int d0h=0;vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,2.-sqrt_3_one_min_z);d0h=q;}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,sqrt_3_one_min_z);d0h=q+8;}else{float y_pm1=p.z*TRANSITION_Z_INV;int q01=int(x_pm1>y_pm1);int q12=int(x_pm1>=-y_pm1);int q03=1-q12;int q1=q01&q12;p_proj=vec2(x_pm1-float(q01+q12-1),y_pm1+float(q01+q03));d0h=((q01+q03)<<2)+((q+q1)&3);}float x=(half_nside*(p_proj.x+p_proj.y));float y=(half_nside*(p_proj.y-p_proj.x));int i=int(x);int j=int(y);return HashDxDy((d0h<<(depth<<1))+ij2z(i,j),x-float(i),y-float(j));}vec4 get_tile_color(vec3 pos){HashDxDy result=hash_with_dxdy(0,pos.zxy);int idx=result.idx;vec2 uv=vec2(result.dy,result.dx);Tile tile=textures_tiles[idx];int idx_texture=tile.texture_idx>>6;int off=tile.texture_idx&0x3F;float idx_row=float(off>>3);float idx_col=float(off&0x7);vec2 offset=(vec2(idx_col,idx_row)+uv)*0.125;vec3 UV=vec3(offset,float(idx_texture));vec4 color=get_colormap_from_grayscale_texture(UV);color.a*=(1.-tile.empty);return color;}uniform sampler2D position_tex;uniform mat4 model;void main(){vec4 c=get_tile_color(normalize(frag_pos));out_frag_color=c;out_frag_color.a=out_frag_color.a*opacity;}"},726:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp usampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_pos;in vec2 out_clip_pos;out vec4 out_frag_color;struct Tile{int uniq;int texture_idx;float start_time;float empty;};uniform Tile textures_tiles[12];uniform float opacity;uniform isampler2D tex1;uniform isampler2D tex2;uniform isampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float reversed;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}ivec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return ivec4(0,0,0,1);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));float x=float(get_pixels(uv).r);float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha),vec4(0.),float(x==blank));return apply_tonal(new_color);}const float TWICE_PI=6.28318530718;const float PI=3.141592653589793;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;int quarter(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int q=(x_neg+y_neg)|(y_neg<<1);return q;}float xpm1(vec2 p){bool x_neg=(p.x<0.);bool y_neg=(p.y<0.);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return 1.-x02;}else{return x02-1.;}}float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.0f-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1f){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}int ij2z(int i,int j){int i4=i|(j<<2);int j4=(i4^(i4>>1))&0x22222222;int i5=i4^j4^(j4<<1);return i5;}struct HashDxDy{int idx;float dx;float dy;};uniform sampler2D ang2pixd;HashDxDy hash_with_dxdy2(vec2 radec){vec2 aa=vec2(radec.x/TWICE_PI+1.,(radec.y/PI)+0.5);vec3 v=texture(ang2pixd,aa).rgb;return HashDxDy(int(v.x*255.),v.y,v.z);}HashDxDy hash_with_dxdy(int depth,vec3 p){int nside=1<<depth;float half_nside=float(nside)*0.5;float x_pm1=xpm1(p.xy);int q=quarter(p.xy);int d0h=0;vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,2.-sqrt_3_one_min_z);d0h=q;}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,sqrt_3_one_min_z);d0h=q+8;}else{float y_pm1=p.z*TRANSITION_Z_INV;int q01=int(x_pm1>y_pm1);int q12=int(x_pm1>=-y_pm1);int q03=1-q12;int q1=q01&q12;p_proj=vec2(x_pm1-float(q01+q12-1),y_pm1+float(q01+q03));d0h=((q01+q03)<<2)+((q+q1)&3);}float x=(half_nside*(p_proj.x+p_proj.y));float y=(half_nside*(p_proj.y-p_proj.x));int i=int(x);int j=int(y);return HashDxDy((d0h<<(depth<<1))+ij2z(i,j),x-float(i),y-float(j));}vec4 get_tile_color(vec3 pos){HashDxDy result=hash_with_dxdy(0,pos.zxy);int idx=result.idx;vec2 uv=vec2(result.dy,result.dx);Tile tile=textures_tiles[idx];int idx_texture=tile.texture_idx>>6;int off=tile.texture_idx&0x3F;float idx_row=float(off>>3);float idx_col=float(off&0x7);vec2 offset=(vec2(idx_col,idx_row)+uv)*0.125;vec3 UV=vec3(offset,float(idx_texture));vec4 color=get_colormap_from_grayscale_texture(UV);color.a*=(1.-tile.empty);return color;}uniform sampler2D position_tex;uniform mat4 model;void main(){vec4 c=get_tile_color(normalize(frag_pos));out_frag_color=c;out_frag_color.a=out_frag_color.a*opacity;}"},90:e=>{e.exports="#version 300 es\nprecision highp float;precision highp sampler2D;precision highp usampler2D;precision highp isampler2D;precision mediump int;in vec3 frag_pos;in vec2 out_clip_pos;out vec4 out_frag_color;struct Tile{int uniq;int texture_idx;float start_time;float empty;};uniform Tile textures_tiles[12];uniform float opacity;uniform usampler2D tex1;uniform usampler2D tex2;uniform usampler2D tex3;uniform int num_tex;uniform float scale;uniform float offset;uniform float blank;uniform float min_value;uniform float max_value;uniform int H;uniform float reversed;uniform float size_tile_uv;uniform int tex_storing_fits;uniform sampler2D colormaps;uniform float num_colormaps;uniform float colormap_id;vec4 colormap_f(float x){float id=(colormap_id+0.5)/num_colormaps;return texture(colormaps,vec2(x,id));}float linear_f(float x,float min_value,float max_value){return clamp((x-min_value)/(max_value-min_value),0.,1.);}float sqrt_f(float x,float min_value,float max_value){float a=linear_f(x,min_value,max_value);return sqrt(a);}float log_f(float x,float min_value,float max_value){float y=linear_f(x,min_value,max_value);float a=1000.;return log(a*y+1.)/log(a);}float asinh_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return asinh(10.*d)/3.;}float pow2_f(float x,float min_value,float max_value){float d=linear_f(x,min_value,max_value);return d*d;}float transfer_func(int H,float x,float min_value,float max_value){if(H==0){return linear_f(x,min_value,max_value);}else if(H==1){return sqrt_f(x,min_value,max_value);}else if(H==2){return log_f(x,min_value,max_value);}else if(H==3){return asinh_f(x,min_value,max_value);}else{return pow2_f(x,min_value,max_value);}}uniform float k_gamma;uniform float k_saturation;uniform float k_contrast;uniform float k_brightness;uniform float k_exposure;vec4 apply_gamma(vec4 ic,float g){float new_r=pow(ic.r,g);float new_g=pow(ic.g,g);float new_b=pow(ic.b,g);return vec4(new_r,new_g,new_b,ic.a);}vec4 apply_saturation(vec4 color,float value){const vec3 luminosity_factor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color.rgb,luminosity_factor));return vec4(mix(grayscale,color.rgb,1.+value),color.a);}vec4 apply_contrast(vec4 color,float value){return vec4(0.5+(1.+value)*(color.rgb-0.5),color.a);}vec4 apply_brightness(vec4 color,float value){return vec4(color.rgb+value,color.a);}vec4 apply_exposure(vec4 color,float value){return vec4((1.+value)*color.rgb,color.a);}vec4 apply_tonal(vec4 color){return apply_gamma(apply_saturation(apply_contrast(apply_brightness(color,k_brightness),k_contrast),k_saturation),k_gamma);}uvec4 get_pixels(vec3 uv){int idx_texture=int(uv.z);if(idx_texture==0){return texture(tex1,uv.xy);}else if(idx_texture==1){return texture(tex2,uv.xy);}else if(idx_texture==2){return texture(tex3,uv.xy);}else{return uvec4(0,0,0,1);}}vec3 reverse_uv(vec3 uv){uv.y=size_tile_uv+2.*size_tile_uv*floor(uv.y/size_tile_uv)-uv.y;return uv;}vec4 get_colormap_from_grayscale_texture(vec3 UV){vec3 uv=mix(UV,reverse_uv(UV),float(tex_storing_fits==1));float x=float(get_pixels(uv).r);float alpha=x*scale+offset;alpha=transfer_func(H,alpha,min_value,max_value);alpha=mix(alpha,1.-alpha,reversed);vec4 new_color=mix(colormap_f(alpha),vec4(0.),float(x==blank));return apply_tonal(new_color);}const float TWICE_PI=6.28318530718;const float PI=3.141592653589793;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;int quarter(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int q=(x_neg+y_neg)|(y_neg<<1);return q;}float xpm1(vec2 p){bool x_neg=(p.x<0.);bool y_neg=(p.y<0.);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return 1.-x02;}else{return x02-1.;}}float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.0f-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1f){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}int ij2z(int i,int j){int i4=i|(j<<2);int j4=(i4^(i4>>1))&0x22222222;int i5=i4^j4^(j4<<1);return i5;}struct HashDxDy{int idx;float dx;float dy;};uniform sampler2D ang2pixd;HashDxDy hash_with_dxdy2(vec2 radec){vec2 aa=vec2(radec.x/TWICE_PI+1.,(radec.y/PI)+0.5);vec3 v=texture(ang2pixd,aa).rgb;return HashDxDy(int(v.x*255.),v.y,v.z);}HashDxDy hash_with_dxdy(int depth,vec3 p){int nside=1<<depth;float half_nside=float(nside)*0.5;float x_pm1=xpm1(p.xy);int q=quarter(p.xy);int d0h=0;vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,2.-sqrt_3_one_min_z);d0h=q;}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2(x_pm1*sqrt_3_one_min_z,sqrt_3_one_min_z);d0h=q+8;}else{float y_pm1=p.z*TRANSITION_Z_INV;int q01=int(x_pm1>y_pm1);int q12=int(x_pm1>=-y_pm1);int q03=1-q12;int q1=q01&q12;p_proj=vec2(x_pm1-float(q01+q12-1),y_pm1+float(q01+q03));d0h=((q01+q03)<<2)+((q+q1)&3);}float x=(half_nside*(p_proj.x+p_proj.y));float y=(half_nside*(p_proj.y-p_proj.x));int i=int(x);int j=int(y);return HashDxDy((d0h<<(depth<<1))+ij2z(i,j),x-float(i),y-float(j));}vec4 get_tile_color(vec3 pos){HashDxDy result=hash_with_dxdy(0,pos.zxy);int idx=result.idx;vec2 uv=vec2(result.dy,result.dx);Tile tile=textures_tiles[idx];int idx_texture=tile.texture_idx>>6;int off=tile.texture_idx&0x3F;float idx_row=float(off>>3);float idx_col=float(off&0x7);vec2 offset=(vec2(idx_col,idx_row)+uv)*0.125;vec3 UV=vec3(offset,float(idx_texture));vec4 color=get_colormap_from_grayscale_texture(UV);color.a*=(1.-tile.empty);return color;}uniform sampler2D position_tex;uniform mat4 model;void main(){vec4 c=get_tile_color(normalize(frag_pos));out_frag_color=c;out_frag_color.a=out_frag_color.a*opacity;}"},783:e=>{e.exports="#version 300 es\nprecision highp float;precision mediump int;layout(location=0)in vec2 pos_clip_space;out vec2 out_clip_pos;out vec3 frag_pos;uniform vec2 ndc_to_clip;uniform float czf;uniform mat4 model;uniform sampler2D position_tex;const float PI=3.1415926535897932384626433832795;const mat4 GAL2J2000=mat4(-0.4448296299195045,0.7469822444763707,0.4941094279435681,0.,-0.1980763734646737,0.4559837762325372,-0.8676661489811610,0.,-0.873437090247923,-0.4838350155267381,-0.0548755604024359,0.,0.,0.,0.,1.);const mat4 J20002GAL=mat4(-0.4448296299195045,-0.1980763734646737,-0.873437090247923,0.,0.7469822444763707,0.4559837762325372,-0.4838350155267381,0.,0.4941094279435681,-0.8676661489811610,-0.0548755604024359,0.,0.,0.,0.,1.);vec2 world2clip_orthographic(vec3 p){return vec2(-p.x,p.y);}vec2 world2clip_aitoff(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float theta_by_two=theta*0.5;float alpha=acos(cos(delta)*cos(theta_by_two));float inv_sinc_alpha=1.;if(alpha>1e-4){inv_sinc_alpha=alpha/sin(alpha);}float x=2.*inv_sinc_alpha*cos(delta)*sin(theta_by_two);float y=inv_sinc_alpha*sin(delta);return vec2(x/PI,y/PI);}vec2 world2clip_mollweide(vec3 p){int max_iter=10;float delta=asin(p.y);float theta=atan(p.x,p.z);float cst=PI*sin(delta);float phi=delta;float dx=phi+sin(phi)-cst;int k=0;while(abs(dx)>1e-6&&k<max_iter){phi=phi-dx/(1.+cos(phi));dx=phi+sin(phi)-cst;k=k+1;}phi=phi*0.5;float x=(-theta/PI)*cos(phi);float y=0.5*sin(phi);return vec2(x,y);}vec2 world2clip_mercator(vec3 p){float delta=asin(p.y);float theta=atan(-p.x,p.z);float x=theta/PI;float y=asinh(tan(delta/PI));return vec2(x,y);}float arc_sinc(float x){if(x>1e-4){return asin(x)/x;}else{float x2=x*x;return 1.+x2*(1.+x2*9./20.)/6.;}}vec2 world2clip_arc(vec3 p){if(p.z>-1.){float r=length(p.xy);if(p.z>0.){r=arc_sinc(r);}else{r=acos(p.z)/r;}float x=p.x*r;float y=p.y*r;return vec2(-x/PI,y/PI);}else{return vec2(1.,0.);}}vec2 world2clip_gnomonic(vec3 p){if(p.z<=1e-2){return vec2(1.,0.);}else{return vec2((-p.x/p.z)/PI,(p.y/p.z)/PI);}}const float TWICE_PI=6.28318530718;const float FOUR_OVER_PI=1.27323954474;const float TRANSITION_Z=0.66666666666;const float TRANSITION_Z_INV=1.5;float one_minus_z_pos(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return 1.-p.z;}float one_minus_z_neg(vec3 p){float d2=dot(p.xy,p.xy);if(d2<1e-1){return d2*(0.5+d2*(0.125+d2*(0.0625+d2*(0.0390625+d2*0.02734375))));}return p.z+1.;}vec2 xpm1_and_offset(vec2 p){int x_neg=int(p.x<0.);int y_neg=int(p.y<0.);int offset=-(y_neg<<2)+1+((x_neg^y_neg)<<1);float lon=atan(abs(p.y),abs(p.x));float x02=lon*FOUR_OVER_PI;if(x_neg!=y_neg){return vec2(1.-x02,float(offset));}else{return vec2(x02-1.,float(offset));}}vec2 world2clip_healpix(vec3 p){vec2 x_pm1_and_offset=xpm1_and_offset(p.xy);vec2 p_proj=vec2(0.);if(p.z>TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_pos(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,2.-sqrt_3_one_min_z);}else if(p.z<-TRANSITION_Z){float sqrt_3_one_min_z=sqrt(3.*one_minus_z_neg(p));p_proj=vec2((x_pm1_and_offset.x*sqrt_3_one_min_z)+x_pm1_and_offset.y,-2.+sqrt_3_one_min_z);}else{p_proj=vec2(atan(p.y,p.x)*FOUR_OVER_PI,p.z*TRANSITION_Z_INV);}return p_proj*vec2(-0.25,0.5);}void main(){vec2 uv=pos_clip_space*0.5+0.5;vec3 world_pos=texture(position_tex,uv).rgb;frag_pos=vec3(model*vec4(world_pos,1.));gl_Position=vec4(pos_clip_space/(ndc_to_clip*czf),0.,1.);out_clip_pos=pos_clip_space;}"},174:e=>{e.exports="#version 300 es\nprecision mediump float;in vec2 v_tc;out vec4 color;uniform sampler2D fbo_tex;vec3 srgb_from_linear(vec3 rgb){bvec3 cutoff=lessThan(rgb,vec3(0.0031308));vec3 lower=rgb*vec3(3294.6);vec3 higher=vec3(269.025)*pow(rgb,vec3(1./2.4))-vec3(14.025);return mix(higher,lower,vec3(cutoff));}vec4 srgba_from_linear(vec4 rgba){return vec4(srgb_from_linear(rgba.rgb),255.*rgba.a);}void main(){color=texture(fbo_tex,v_tc);}"},55:e=>{e.exports="#version 300 es\nprecision mediump float;layout(location=0)in vec2 a_pos;out vec2 v_tc;void main(){gl_Position=vec4(a_pos*2.-1.,0.,1.);v_tc=a_pos;}"}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=r,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(o,i,r)=>{var s;r&&((s=[]).d=1);var l,c,u,d=new Set,f=o.exports,p=new Promise(((e,t)=>{u=t,c=e}));p[t]=f,p[e]=e=>(s&&e(s),d.forEach(e),p.catch((e=>{}))),o.exports=p,i((o=>{var i;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var i=[];i.d=0,o.then((e=>{r[t]=e,a(i)}),(e=>{r[n]=e,a(i)}));var r={};return r[e]=e=>e(i),r}}var s={};return s[e]=e=>{},s[t]=o,s})))(o);var r=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(i=()=>t(r)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(i.r++,e.push(i)));l.map((t=>t[e](n)))}));return i.r?c:r()}),(e=>(e?u(p[n]=e):c(f),a(s)))),s&&(s.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".aladin.js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},i="aladin-lite:",l.l=(e,t,n,a)=>{if(o[e])o[e].push(t);else{var r,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){r=d;break}}r||(s=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.setAttribute("data-webpack",i+n),r.src=e),o[e]=[t];var f=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var a=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=f.bind(null,r.onerror),r.onload=f.bind(null,r.onload),s&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.v=(e,t,n,a)=>{var o=fetch(l.p+""+n+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,a).then((t=>Object.assign(e,t.instance.exports))):o.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,a))).then((t=>Object.assign(e,t.instance.exports)))},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={179:0};l.f.j=(t,n)=>{var a=l.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var o=new Promise(((n,o)=>a=e[t]=[n,o]));n.push(a[2]=o);var i=l.p+l.u(t),r=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",r.name="ChunkLoadError",r.type=o,r.request=i,a[1](r)}}),"chunk-"+t,t)}};var t=(t,n)=>{var a,o,[i,r,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in r)l.o(r,a)&&(l.m[a]=r[a]);if(s)s(l)}for(t&&t(n);c<i.length;c++)o=i[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkaladin_lite=self.webpackChunkaladin_lite||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.nc=void 0;var c={};(()=>{"use strict";l.d(c,{k:()=>Qn});var e=l(755),t=l.n(e),n=function(){function e(e,n){this.domEl=t()('<div class="aladin-popup-container"><div class="aladin-popup"><a class="aladin-closeBtn">&times;</a><div class="aladin-popupTitle"></div><div class="aladin-popupText"></div></div><div class="aladin-popup-arrow"></div></div>'),this.domEl.appendTo(e),this.view=n;var a=this;this.domEl.find(".aladin-closeBtn").click((function(){a.hide()}))}return e.prototype.hide=function(){this.domEl.hide(),this.view.mustClearCatalog=!0,this.view.catalogForPopup.hide(),this.view.overlayForPopup.hide()},e.prototype.show=function(){this.domEl.show()},e.prototype.setTitle=function(e){this.domEl.find(".aladin-popupTitle").html(e||"")},e.prototype.setText=function(e){this.domEl.find(".aladin-popupText").html(e||""),this.w=this.domEl.outerWidth(),this.h=this.domEl.outerHeight()},e.prototype.setSource=function(e){this.source&&(this.source.popup=null),e.popup=this,this.source=e,this.setPosition(e.x,e.y)},e.prototype.setPosition=function(e,t){var n=e-this.w/2,a=t-this.h;this.source&&(a+=this.source.catalog.sourceSize/2),this.domEl[0].style.left=n+"px",this.domEl[0].style.top=a+"px"},e}(),a=function(){function e(){}return e.prototype.redraw=function(e,t,n,a){var o,i;e.lineWidth=1,e.strokeStyle="rgb(150,150,220)",e.beginPath();for(var r=0,s=t.length;r<s;r++)i=(o=t[r]).ipix,e.moveTo(o.vx[0],o.vy[0]),e.lineTo(o.vx[1],o.vy[1]),e.lineTo(o.vx[2],o.vy[2]);e.stroke(),e.strokeStyle="#FFDDDD",e.beginPath();for(r=0,s=t.length;r<s;r++)i=(o=t[r]).ipix,e.strokeText(a+"/"+i,(o.vx[0]+o.vx[2])/2,(o.vy[0]+o.vy[2])/2);e.stroke()},e}(),o={TAN:{id:1,fov:180},STG:{id:2,fov:360},SIN:{id:3,fov:180},ZEA:{id:4,fov:360},FEYE:{id:5,fov:190},AIR:{id:6,fov:360},ARC:{id:7,fov:360},NCP:{id:8,fov:180},MER:{id:9,fov:360},CAR:{id:10,fov:360},CEA:{id:11,fov:360},CYP:{id:12,fov:360},AIT:{id:13,fov:360},PAR:{id:14,fov:360},SFL:{id:15,fov:360},MOL:{id:16,fov:360},COD:{id:17,fov:360},HPX:{id:19,fov:360}},i=["SIN","TAN","STG","ZEA","FEYE","AIR","ARC","NCP","MER","CAR","CEA","CYP","AIT","MOL","PAR","SFL","COD","HPX"];function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var u={};u.HTTPS_WHITELIST=["alasky.u-strasbg.fr","alaskybis.u-strasbg.fr","alasky.unistra.fr","alaskybis.unistra.fr","alasky.cds.unistra.fr","alaskybis.cds.unistra.fr","hips.astron.nl","jvo.nao.ac.jp","archive.cefca.es","cade.irap.omp.eu","skies.esac.esa.int"],u.cssScale=void 0,HTMLCanvasElement.prototype.relMouseCoords=function(e){if(e.offsetX)return{x:e.offsetX,y:e.offsetY};if(!u.cssScale){var t=window.getComputedStyle(document.body,null),n=(t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")).match(/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/);u.cssScale=n?parseFloat(n[1]):1}var a=e,o=(a.target,a.target||a.srcElement),i=o.currentStyle||window.getComputedStyle(o,null),r=parseInt(i.borderLeftWidth,10),s=parseInt(i.borderTopWidth,10),l=o.getBoundingClientRect(),c=a.clientX,d=a.clientY;a.originalEvent.changedTouches&&(c=a.originalEvent.changedTouches[0].clientX,d=a.originalEvent.changedTouches[0].clientY);var f=c-r-l.left,p=d-s-l.top;return{x:parseInt(f/u.cssScale),y:parseInt(p/u.cssScale)}},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=[].slice,n=t.call(arguments,1),a=this,o=function(){},i=function(){return a.apply(this instanceof o?this:e||{},n.concat(t.call(arguments)))};return i.prototype=this.prototype,i}),t().urlParam=function(e,t){return void 0===t&&(t=location.search),decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20"))||null},u.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},u.isInt=function(e){return u.isNumber(e)&&Math.floor(e)==e},u.debounce=function(e,t){var n=null;return function(){var a=this,o=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(a,o)}),t)}},u.throttle=function(e,t,n){var a,o;return t||(t=250),function(){var i=n||this,r=+new Date,s=arguments;a&&r<a+t?(clearTimeout(o),o=setTimeout((function(){a=r,e.apply(i,s)}),t)):(a=r,e.apply(i,s))}},u.LRUCache=function(e){this._keys=[],this._items={},this._expires={},this._size=0,this._maxsize=e||1024},u.LRUCache.prototype={set:function(e,t){var n=this._keys,a=this._items,o=this._expires,i=this._size;i>=this._maxsize&&(n.sort((function(e,t){return o[e]>o[t]?-1:o[e]<o[t]?1:0})),i--),n[i]=e,a[e]=t,o[e]=Date.now(),i++,this._keys=n,this._items=a,this._expires=o,this._size=i},get:function(e){var t=this._items[e];return t&&(this._expires[e]=Date.now()),t},keys:function(){return this._keys}},u.loadFromMirrors=function(e,t){var n=t&&t.contentType||"application/json",a=t&&t.data||void 0,o=t&&t.timeout||5e3;if(0===e.length)return Promise.reject("None of the urls given can be fetched!");var i=new AbortController,r=setTimeout((function(){return i.abort()}),o),s={method:"GET",headers:{"Content-Type":n},mode:"cors",cache:"default",redirect:"follow",signal:i.signal},l=e[0]+"?"+new URLSearchParams(a);return fetch(l,s).then((function(t){return clearTimeout(r),t.ok?t:Promise.reject("Url: ",e[0]," cannot be reached in some way.")})).catch((function(n){return u.loadFromMirrors(e.slice(1),t)}))},u.getAjaxObject=function(e,n,a,o){if(!1!==o&&(o=!0),!0===o)var i=Qn.JSONP_PROXY+"?url="+encodeURIComponent(e);else i=e;return n=n||"GET",a=a||null,t().ajax({url:i,method:n,dataType:a})},u.isFileContext=function(){return"file:"===window.location.protocol},u.isHttpsContext=function(){return"https:"===window.location.protocol},u.isHttpContext=function(){return"http:"===window.location.protocol},u.fixURLForHTTPS=function(e){return u.HTTPS_WHITELIST.some((function(t){return e.includes(t)}))?e.replace("http://","https://"):e},u.getAbsoluteURL=function(e){var t=document.createElement("a");return t.href=e,t.href},u.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},u.clone=function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),JSON.parse(JSON.stringify(e)))},u.getDroppedFilesHandler=function(e){return e.preventDefault(),(e.dataTransfer.items?r(e.dataTransfer.items):r(e.dataTransfer.files)).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()}))},u.dragOverHandler=function(e){e.preventDefault()},u.requestCORSIfNotSameOrigin=function(e){return new URL(e,window.location.href).origin!==window.location.origin},u.handleCORSNotSameOrigin=function(e){if(u.requestCORSIfNotSameOrigin(e)){var t=new URL(Qn.JSONP_PROXY);t.searchParams.append("url",e),e=t}return e},u.deepCopy=function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},u.download=function(e){var t=document.createElement("a");t.href=e,t.click()};var d=function(){};d.D2R=Math.PI/180,d.R2D=180/Math.PI,d.sign=function(e){return e>0?1:e<0?-1:0},d.cosd=function(e){if(e%90==0)switch(Math.abs(Math.floor(e/90+.5))%4){case 0:return 1;case 1:case 3:return 0;case 2:return-1}return Math.cos(e*d.D2R)},d.sind=function(e){if(e%90==0)switch(Math.abs(Math.floor(e/90-.5))%4){case 0:return 1;case 1:case 3:return 0;case 2:return-1}return Math.sin(e*d.D2R)},d.tand=function(e){var t;return 0==(t=e%360)||180==Math.abs(t)?0:45==t||225==t?1:-135==t||-315==t?-1:Math.tan(e*d.D2R)},d.asind=function(e){return Math.asin(e)*d.R2D},d.acosd=function(e){return Math.acos(e)*d.R2D},d.atand=function(e){return Math.atan(e)*d.R2D},d.atan2=function(e,t){if(0==e)return t>0?0:t<0?Math.PI:NaN;var n=d.sign(e);if(0==t)return Math.PI/2*n;var a=Math.atan(Math.abs(e/t));return t>0?a*n:t<0?(Math.PI-a)*n:void 0},d.atan2d=function(e,t){return d.atan2(e,t)*d.R2D},d.cosh=function(e){return(Math.exp(e)+Math.exp(-e))/2},d.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2},d.tanh=function(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))},d.acosh=function(e){return Math.log(e+Math.sqrt(e*e-1))},d.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))},d.atanh=function(e){return.5*Math.log((1+e)/(1-e))},d.sinc=function(e){var t=Math.abs(e);return t<=.001?1-(t*=t)*(1-t/20)/6:Math.sin(t)/t},d.asinc=function(e){var t=Math.abs(e);return t<=.001?1+(t*=t)*(6+.45*t)/6:Math.asin(t)/t},d.hypot=function(e,t){return Math.sqrt(e*e+t*t)},d.eulerMatrix=function(e,t,n){var a=new Array(3);a[0]=new Array(3),a[1]=new Array(3),a[2]=new Array(3);var o=d.cosd(e),i=d.sind(e),r=d.cosd(t),s=d.sind(t),l=d.cosd(n),c=d.sind(n);return a[0][0]=l*r*o-c*i,a[0][1]=-c*r*o-l*i,a[0][2]=-s*o,a[1][0]=l*r*i+c*o,a[1][1]=-c*r*i+l*o,a[1][2]=-s*i,a[2][0]=-s*l,a[2][1]=-s*o,a[2][2]=r,a},d.displayMatrix=function(e){for(var t=e.length,n=0,a=0;a<t;a++)e[a].length>n&&(n=e[a].length);var o="<table>\n";for(a=0;a<t;a++){o+="<tr>";for(var i=0;i<t;i++)o+="<td>",a<e[a].length&&(o+=e[a][i].toString()),o+="</td>";o+="</td>\n"}return o+="</table>\n"};var f=function(e,t,n){this.lon=e,this.lat=t,this.prec=n,this.frame=null,this.computeDirCos()};function p(e,t){this.string=h.trim(e,t),this.sep=t,this.pos=0}function h(){}function m(){}f.factor=[3600,60,1],f.prototype={setFrame:function(e){this.frame=e},computeDirCos:function(){var e=d.cosd(this.lat);this.x=e*d.cosd(this.lon),this.y=e*d.sind(this.lon),this.z=d.sind(this.lat)},computeLonLat:function(){var e=this.x*this.x+this.y*this.y;this.lon=0,0==e?0==this.z?(this.lon=NaN,this.lat=NaN):this.lat=this.z>0?90:-90:(this.lon=d.atan2d(this.y,this.x),this.lat=d.atan2d(this.z,Math.sqrt(e)),this.lon<0&&(this.lon+=360))},dist2:function(e){var t=e.x-this.x,n=t*t;return n+=(t=e.y-this.y)*t,n+=(t=e.z-this.z)*t},distance:function(e){return 0==e.x&&0==e.y&&0==e.z||0==this.x&&0==this.y&&0==this.z?NaN:2*d.asind(.5*Math.sqrt(this.dist2(e)))},convertTo:function(e){this.frame.equals(e)||(this.frame.toICRS(this.coo),e.fromICRS(this.coo),this.frame=e,this.lon=this.lat=NaN)},rotate:function(e){var t,n,a;e!=Umatrix3&&(t=e[0][0]*this.x+e[0][1]*this.y+e[0][2]*this.z,n=e[1][0]*this.x+e[1][1]*this.y+e[1][2]*this.z,a=e[2][0]*this.x+e[2][1]*this.y+e[2][2]*this.z,this.x=t,this.y=n,this.z=a,this.lon=this.lat=NaN)},rotate_1:function(e){var t,n,a;e!=Umatrix3&&(t=e[0][0]*this.x+e[1][0]*this.y+e[2][0]*this.z,n=e[0][1]*this.x+e[1][1]*this.y+e[2][1]*this.z,a=e[0][2]*this.x+e[1][2]*this.y+e[2][2]*this.z,this.x=t,this.y=n,this.z=a,this.lon=this.lat=NaN)},equals:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},parse:function(e){var t=e.indexOf("+");if(t<0&&(t=e.indexOf("-")),t<0&&(t=e.indexOf(" ")),t<0)return this.lon=NaN,this.lat=NaN,this.prec=0,!1;var n=e.substring(0,t),a=e.substring(t);return this.lon=this.parseLon(n),this.lat=this.parseLat(a),!0},parseLon:function(e){if((e=(e=e.trim()).replace(/:/g," ")).indexOf(" ")<0){var t=e.indexOf(".");return this.prec=t<0?0:e.length-t-1,parseFloat(e)}for(var n=new p(e," "),a=0,o=0,i=0;n.hasMore();){var r=n.nextToken(),s=r.indexOf(".");switch(o+=parseFloat(r)*f.factor[a],a){case 0:i=s<0?1:2;break;case 1:i=s<0?3:4;break;case 2:i=s<0?5:4+r.length-s}a++}return this.prec=i,15*o/3600},parseLat:function(e){var t;if("-"==(e=(e=e.trim()).replace(/:/g," ")).charAt(0)?(t=-1,e=e.substring(1)):"-"==e.charAt(0)?(t=1,e=e.substring(1)):t=1,e.indexOf(" ")<0){var n=e.indexOf(".");return this.prec=n<0?0:e.length-n-1,parseFloat(e)*t}for(var a=new p(e," "),o=0,i=0,r=0;a.hasMore();){var s=a.nextToken(),l=s.indexOf(".");switch(i+=parseFloat(s)*f.factor[o],o){case 0:r=l<0?1:2;break;case 1:r=l<0?3:4;break;case 2:r=l<0?5:4+s.length-l}o++}return this.prec=r,i*t/3600},format:function(e){isNaN(this.lon)&&this.computeLonLat();var t="",n="";if(e.indexOf("d")>=0)t=m.format(this.lon,this.prec),n=m.format(this.lat,this.prec),0==t.indexOf("0")&&(t=t.substr(1)),0==n.indexOf("0")&&(n=n.substr(1));else{var a=this.lon/15;t=m.toSexagesimal(a,this.prec+1,!1),n=m.toSexagesimal(this.lat,this.prec,!1)}return this.lat>=0&&(n="+"+n),e.indexOf("/")>=0?t+" "+n:e.indexOf("2")>=0?[t,n]:t+n}},p.prototype={hasMore:function(){return this.pos<this.string.length},nextToken:function(){for(var e=this.pos;e<this.string.length&&this.string.charAt(e)==this.sep;)e++;for(var t=e;t<this.string.length&&this.string.charAt(t)!=this.sep;)t++;return this.pos=t,this.string.substring(e,t)}},h.trim=function(e,t){for(var n=0,a=e.length-1;n<e.length&&e.charAt(n)==t;)n++;if(n==e.length)return"";for(;a>n&&e.charAt(a)==t;)a--;return e.substring(n,a+1)},m.pow10=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14],m.rndval=[.5,.05,.005,5e-4,5e-5,5e-6,5e-7,5e-8,5e-9,5e-10,5e-11,5e-12,5e-13,5e-14,5e-14],m.format=function(e,t){if(t<=0)return Math.round(e).toString();var n=e.toString(),a=n.indexOf("."),o=a>=0?n.length-a-1:0;if(t>=o){a<0&&(n+="."),2==n.length&&(n="0"+n);for(var i=0;i<t-o;i++)n+="0";return n}return n=(e+m.rndval[t]).toString(),1==a&&(n="0"+n,a+=1),n.substr(0,a+t+1)},m.toSexagesimal=function(e,t,n){var a=e<0?"-":n?"+":"",o=Math.abs(e);switch(t){case 1:return a+(r=Math.round(o)).toString();case 2:default:return a+m.format(o,1);case 3:return a+(r=Math.floor(o))+" "+(i=Math.round(60*(o-r)));case 4:var i=60*(o-(r=Math.floor(o)));return a+r+" "+m.format(i,1);case 5:i=60*(o-(r=Math.floor(o)));return a+r+" "+(s=Math.floor(i))+" "+(l=Math.round(60*(i-s)));case 6:case 7:case 8:var r;(r=Math.floor(o))<10&&(r="0"+r);var s;i=60*(o-r);(s=Math.floor(i))<10&&(s="0"+s);var l=60*(i-s);return a+r+" "+s+" "+m.format(l,t-5)}};var v=function e(t,n){this.PROJECTION=e.PROJ_TAN,this.ROT=this.tr_oR(t,n),this.longitudeIsReversed=!1};v.PROJ_TAN=1,v.PROJ_TAN2=2,v.PROJ_STG=2,v.PROJ_SIN=3,v.PROJ_SIN2=4,v.PROJ_ZEA=4,v.PROJ_ARC=5,v.PROJ_SCHMIDT=5,v.PROJ_AITOFF=6,v.PROJ_AIT=6,v.PROJ_GLS=7,v.PROJ_MERCATOR=8,v.PROJ_MER=8,v.PROJ_LAM=9,v.PROJ_LAMBERT=9,v.PROJ_TSC=10,v.PROJ_QSC=11,v.PROJ_MOLLWEIDE=12,v.PROJ_HEALPIX=13,v.PROJ_LIST=["Mercator",v.PROJ_MERCATOR,"Gnomonic",v.PROJ_TAN,"Stereographic",v.PROJ_TAN2,"Orthographic",v.PROJ_SIN,"Zenithal",v.PROJ_ZEA,"Schmidt",v.PROJ_SCHMIDT,"Aitoff",v.PROJ_AITOFF,"Lambert",v.PROJ_LAMBERT],v.PROJ_NAME=["-","Gnomonic","Stereographic","Orthographic","Equal-area","Schmidt plates","Aitoff","Global sin","Mercator","Lambert"],v.prototype={setCenter:function(e,t){this.ROT=this.tr_oR(e,t)},reverseLongitude:function(e){this.longitudeIsReversed=e},setProjection:function(e){this.PROJECTION=e},project:function(e,t){var n=this.tr_ou(e,t),a=this.tr_uu(n,this.ROT),o=this.tr_up(this.PROJECTION,a);return null==o?null:this.longitudeIsReversed?{X:o[0],Y:-o[1]}:{X:-o[0],Y:-o[1]}},unproject:function(e,t){this.longitudeIsReversed||(e=-e),t=-t;var n=this.tr_pu(this.PROJECTION,e,t),a=this.tr_uu1(n,this.ROT),o=this.tr_uo(a);return{ra:o[0],dec:o[1]}},tr_up:function(e,t){var n,a,o,i,r,s=t[0],l=t[1],c=t[2];if(0==(n=d.hypot(s,l))&&0==c)return null;switch(e){default:o=null;break;case v.PROJ_AITOFF:a=Math.sqrt(n*(n+s)/2),i=Math.sqrt(2*n*(n-s)),i/=a=Math.sqrt((1+a)/2),l<0&&(i=-i),o=[i,r=c/a];break;case v.PROJ_GLS:r=Math.asin(c),o=[i=0!=n?Math.atan2(l,s)*n:0,r];break;case v.PROJ_MERCATOR:o=0!=n?[i=Math.atan2(l,s),r=d.atanh(c)]:null;break;case v.PROJ_TAN:o=s>0?[i=l/s,r=c/s]:null;break;case v.PROJ_TAN2:o=(a=(1+s)/2)>0?[i=l/a,r=c/a]:null;break;case v.PROJ_ARC:s<=-1?(i=Math.PI,r=0):(n=d.hypot(l,c),i=l*(a=s>0?d.asinc(n):Math.acos(s)/n),r=c*a),o=[i,r];break;case v.PROJ_SIN:o=s>=0?[i=l,r=c]:null;break;case v.PROJ_SIN2:0!=(a=Math.sqrt((1+s)/2))?(i=l/a,r=c/a):(i=2,r=0),o=[i,r];break;case v.PROJ_LAMBERT:r=c,i=0,0!=n&&(i=Math.atan2(l,s)),o=[i,r]}return o},tr_pu:function(e,t,n){var a,o,i,r,s;switch(e){default:return null;case v.PROJ_AITOFF:if((a=t*t/8+n*n/2)>1)return null;i=1-a,s=n*(o=Math.sqrt(1-a/2)),0!=(a=d.hypot(i,r=t*o/2))&&(i=((o=i)*o-r*r)/a,r=2*o*r/a);break;case v.PROJ_GLS:if((a=1-(s=Math.sin(n))*s)<0)return null;o=0!=(a=Math.sqrt(a))?t/a:0,i=a*Math.cos(o),r=a*Math.sin(o);break;case v.PROJ_MERCATOR:s=d.tanh(n),i=(a=1/d.cosh(n))*Math.cos(t),r=a*Math.sin(t);break;case v.PROJ_LAMBERT:if((a=1-(s=n)*s)<0)return null;i=(a=Math.sqrt(a))*Math.cos(t),r=a*Math.sin(t);break;case v.PROJ_TAN:r=t*(i=1/Math.sqrt(1+t*t+n*n)),s=n*i;break;case v.PROJ_TAN2:i=(1-(a=(t*t+n*n)/4))/(o=1+a),r=t/o,s=n/o;break;case v.PROJ_ARC:if((a=d.hypot(t,n))>Math.PI)return null;o=d.sinc(a),i=Math.cos(a),r=o*t,s=o*n;break;case v.PROJ_SIN:if((o=1-t*t-n*n)<0)return null;i=Math.sqrt(o),r=t,s=n;break;case v.PROJ_SIN2:if((a=(t*t+n*n)/4)>1)return null;i=1-2*a,r=(o=Math.sqrt(1-a))*t,s=o*n}return[i,r,s]},tr_oR:function(e,t){var n=new Array(3);return n[0]=new Array(3),n[1]=new Array(3),n[2]=new Array(3),n[2][2]=d.cosd(t),n[0][2]=d.sind(t),n[1][1]=d.cosd(e),n[1][0]=-d.sind(e),n[1][2]=0,n[0][0]=n[2][2]*n[1][1],n[0][1]=-n[2][2]*n[1][0],n[2][0]=-n[0][2]*n[1][1],n[2][1]=n[0][2]*n[1][0],n},tr_ou:function(e,t){var n=new Array(3),a=d.cosd(t);return n[0]=a*d.cosd(e),n[1]=a*d.sind(e),n[2]=d.sind(t),n},tr_uu:function(e,t){var n=new Array(3),a=e[0],o=e[1],i=e[2];return n[0]=t[0][0]*a+t[0][1]*o+t[0][2]*i,n[1]=t[1][0]*a+t[1][1]*o+t[1][2]*i,n[2]=t[2][0]*a+t[2][1]*o+t[2][2]*i,n},tr_uu1:function(e,t){var n=new Array(3),a=e[0],o=e[1],i=e[2];return n[0]=t[0][0]*a+t[1][0]*o+t[2][0]*i,n[1]=t[0][1]*a+t[1][1]*o+t[2][1]*i,n[2]=t[0][2]*a+t[1][2]*o+t[2][2]*i,n},tr_uo:function(e){var t,n,a=e[0],o=e[1],i=e[2],r=a*a+o*o;if(0==r){if(0==i)return null;t=0,n=i>0?90:-90}else n=d.atand(i/Math.sqrt(r)),(t=d.atan2d(o,a))<0&&(t+=360);return[t,n]}};var _,y={SYSTEMS:_={J2000:"J2000",GAL:"Galactic"},J2000:{label:"J2000",system:_.J2000},J2000d:{label:"J2000d",system:_.J2000},GAL:{label:"Galactic",system:_.GAL},fromString:function(e,t){return e?0==(e=e.toLowerCase().replace(/^\s+|\s+$/g,"")).indexOf("j2000d")||0==e.indexOf("icrsd")?y.J2000d:0==e.indexOf("j2000")||0==e.indexOf("icrs")?y.J2000:0==e.indexOf("gal")?y.GAL:t||null:t||null}},x={xyToView:function(e,t,n,a,o,i,r){return null==r&&(r=!0),r?{vx:x.myRound(o/2*(1+i*e)-(o-n)/2),vy:x.myRound(o/2*(1+i*t)-(o-a)/2)}:{vx:o/2*(1+i*e)-(o-n)/2,vy:o/2*(1+i*t)-(o-a)/2}},viewToXy:function(e,t,n,a,o,i){return{x:((2*e+(o-n))/o-1)/i,y:((2*t+(o-a))/o-1)/i}},radecToViewXy:function(e,t,n){return n.wasm.worldToScreen(e,t)},myRound:function(e){return e<0?-1*(0|-e):0|e},isInsideViewXy:function(e,t,n,a){return e>=0&&e<n&&t>=0&&t<a},isHpxPixVisible:function(e,t,n){for(var a=0;a<e.length;a++)if(e[a].vx>=-20&&e[a].vx<t+20&&e[a].vy>=-20&&e[a].vy<n+20)return!0;return!1},ipixToIpix:function(e,t,n){},counterClockwiseTriangle:function(e,t,n,a,o,i){return e*a+t*o+n*i-o*a-i*e-n*t>=0},grow2:function(e,t){for(var n=0,a=0;a<4;a++)null==e[a]&&n++;if(n>1)return e;var o=[];for(a=0;a<4;a++)o.push({vx:e[a].vx,vy:e[a].vy});for(a=0;a<2;a++){var i,r,s=1==a?1:0,l=1==a?3:2;if(null==o[s]&&(0==s||3==s?(i=1,r=2):(i=0,r=3),o[s]={vx:(o[i].vx+o[r].vx)/2,vy:(o[i].vy+o[r].vy)/2}),null==o[l]&&(0==l||3==l?(i=1,r=2):(i=0,r=3),o[l]={vx:(o[i].vx+o[r].vx)/2,vy:(o[i].vy+o[r].vy)/2}),null!=o[s]&&null!=o[l]){var c=Math.atan2(o[l].vy-o[s].vy,o[l].vx-o[s].vx),u=t*Math.cos(c);o[s].vx-=u,o[l].vx+=u,u=t*Math.sin(c),o[s].vy-=u,o[l].vy+=u}}return o},SVG_ICONS:{CATALOG:'<svg xmlns="http://www.w3.org/2000/svg"><polygon points="1,0,5,0,5,3,1,3"  fill="FILLCOLOR" /><polygon points="7,0,9,0,9,3,7,3"  fill="FILLCOLOR" /><polygon points="10,0,12,0,12,3,10,3"  fill="FILLCOLOR" /><polygon points="13,0,15,0,15,3,13,3"  fill="FILLCOLOR" /><polyline points="1,5,5,9"  stroke="FILLCOLOR" /><polyline points="1,9,5,5" stroke="FILLCOLOR" /><line x1="7" y1="7" x2="15" y2="7" stroke="FILLCOLOR" stroke-width="2" /><polyline points="1,11,5,15"  stroke="FILLCOLOR" /><polyline points="1,15,5,11"  stroke="FILLCOLOR" /><line x1="7" y1="13" x2="15" y2="13" stroke="FILLCOLOR" stroke-width="2" /></svg>',MOC:'<svg xmlns="http://www.w3.org/2000/svg"><polyline points="0.5,7,2.5,7,2.5,5,7,5,7,3,10,3,10,5,13,5,13,7,15,7,15,9,13,9,13,12,10,12,10,14,7,14,7,12,2.5,12,2.5,10,0.5,10,0.5,7" stroke-width="1" stroke="FILLCOLOR" fill="transparent" /><line x1="1" y1="10" x2="6" y2="5" stroke="FILLCOLOR" stroke-width="0.5" /><line x1="2" y1="12" x2="10" y2="4" stroke="FILLCOLOR" stroke-width="0.5" /><line x1="5" y1="12" x2="12" y2="5" stroke="FILLCOLOR" stroke-width="0.5" /><line x1="7" y1="13" x2="13" y2="7" stroke="FILLCOLOR" stroke-width="0.5" /><line x1="10" y1="13" x2="13" y2="10" stroke="FILLCOLOR" stroke-width="0.5" /></svg>',OVERLAY:'<svg xmlns="http://www.w3.org/2000/svg"><polygon points="10,5,10,1,14,1,14,14,2,14,2,9,6,9,6,5" fill="transparent" stroke="FILLCOLOR" stroke-width="2"/></svg>'},degreesToString:function(e){var t=0|e,n=Math.abs(e-t),a=60*n|0,o=(60*(60*n-a)).toPrecision(3);return 0!=t?e.toPrecision(3)+"°":0!=a?(60*n).toPrecision(3)+" arcmin":0!=o?o+" arcsec":"0°"}},g=function(){var e={MIRRORS:["https://alasky.cds.unistra.fr/cgi/simbad-flat/simbad-quick.py","https://alaskybis.cds.unistra.fr/cgi/simbad-flat/simbad-quick.py"],query:function(t,n,a,o){var i=new f(t,n,7),r={Ident:i.format("s/"),SR:a};u.loadFromMirrors(e.MIRRORS,{contentType:"text/plain",data:r}).then((function(e){return e.text()})).then((function(e){o.view.setCursor("pointer");var t=/(.*?)\/(.*?)\((.*?),(.*?)\)/g.exec(e);if(t){var n=new f;n.parse(t[1]);var r=t[2],s='<div class="aladin-sp-title"><a target="_blank" href="https://simbad.cds.unistra.fr/simbad/sim-id?Ident='+encodeURIComponent(r)+'">'+r+"</a></div>",l='<div class="aladin-sp-content">';l+="<em>Type: </em>"+t[4]+"<br>";var c=t[3];u.isNumber(c)&&(l+="<em>Mag: </em>"+c+"<br>"),l+='<br><a target="_blank" href="http://cdsportal.u-strasbg.fr/?target='+encodeURIComponent(r)+'">Query in CDS portal</a>',l+="</div>",o.showPopup(n.lon,n.lat,s,l)}else{var d='<div class="aladin-sp-content">No match was found on <a href="https://simbad.cds.unistra.fr/simbad">Simbad</a> in '+x.degreesToString(a)+" around this point.</div>";o.showPopup(i.lon,i.lat,'<div class="aladin-sp-title">Ohoh</div>',d)}})).catch((function(e){o.view.setCursor("pointer"),o.hidePopup()}))}};return e}();function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var C=function(){var e={MIRRORS:["https://alasky.cds.unistra.fr/planetary-features/cs"],PLANETS_RADIUS:{mercury:2439400,venus:6051e3,earth:6378137,mars:3396190,moon:1738100,ceres:473e3,titan:2575e3,titania:788400,dione:561400,enceladus:252100,iapetus:734500,mimas:198200,rhea:763800,tethys:533e3,callisto:2410300,ariel:578900,charon:606e3,triton:1353e3,pluto:1188300},HAS_WEST_INCREASING_LONGITUDES:["amalthea","callisto","deimos","dione","enceladus","epimetheus","eros","europa","ganymede","gaspra","hyperion","iapetus","io","janus","mathilde","mercury","mimas","phobos","phoebe","proteus","rhea","tethys","thebe","titan"],query:function(t,n,a,o,i){var r=t,s=n;e.HAS_WEST_INCREASING_LONGITUDES.includes(o)&&(r=360-r);var l={lon:r,lat:s,SR:a,format:"csv",body:o};function c(e){var t,n,a="",o=[""],i=[o],r=0,s=0,l=!0,c=b(e);try{for(c.s();!(n=c.n()).done;)'"'===(t=n.value)?(l&&t===a&&(o[r]+=t),l=!l):","===t&&l?t=o[++r]="":"\n"===t&&l?("\r"===a&&(o[r]=o[r].slice(0,-1)),o=i[++s]=[t=""],r=0):o[r]+=t,a=t}catch(u){c.e(u)}finally{c.f()}return i}u.loadFromMirrors(e.MIRRORS,{contentType:"text/plain",data:l}).then((function(e){return e.text()})).then((function(r){i.view.setCursor("pointer");var s=r.split("\n"),l=c(s[0])[0];if(s.length>1&&s[1].length>0){var u=c(s[1])[0],d=l.findIndex((function(e){return e.includes("longitude")})),f=l.findIndex((function(e){return e.includes("latitude")})),p=u[l.findIndex((function(e){return e.includes("feature_name")}))],h=u[l.indexOf("feature_id")],m='<div class="aladin-sp-title"><a target="_blank" href="https://planetarynames.wr.usgs.gov/Feature/'+h+'">'+p+"</a></div>",v='<div class="aladin-sp-content"> </div>';v+="<em>Type: </em>"+u[l.indexOf("feature_type")]+"<br><br>",v+='<a target="_blank" href="https://planetarynames.wr.usgs.gov/Feature/'+h+'">More information</a>';var _=parseFloat(u[d]),y=parseFloat(u[f]),g=!0,b=l.indexOf("coordinate_system");b>0&&u[b].includes("+West")&&(g=!1),g||(_=360-_);var w=void 0;try{var C=parseFloat(u[l.indexOf("diameter")]);if(o in e.PLANETS_RADIUS){var A=2*Math.PI*e.PLANETS_RADIUS[o]*Math.cos(y*Math.PI/8180);w=180*(2*Math.PI*(1e3*C/2)/A)/Math.PI}}catch(S){console.error(S)}i.showPopup(_,y,m,v,w)}else{var I='<div class="aladin-sp-content">No match was found on <a href="https://planetarynames.wr.usgs.gov">planetarynames.wr.usgs.gov</a> in '+x.degreesToString(a)+" around this point.</div>";i.showPopup(t,n,'<div class="aladin-sp-title">Ohoh</div>',I)}})).catch((function(e){i.view.setCursor("pointer"),i.hidePopup()}))}};return e}(),I=function(e,t){var n=e.imageCanvas.relMouseCoords(t),a=e.wasm.screenToWorld(n.x,n.y);if(a)if(!1===e.aladin.getBaseImageLayer().isPlanetaryBody()){var o=Math.min(1,15*e.fov/e.largestDim);console.log('queryRadius "generic pointer": ',o),g.query(a[0],a[1],o,e.aladin)}else{var i=e.aladin.getBaseImageLayer().properties.hipsBody;C.query(a[0],a[1],Math.min(80,e.fov/20),i,e.aladin)}else console.log("The location you clicked on is out of the view.")},S=function(){function e(e,t,n){var a,o,i;for(o=0;o<30;o++)for(a=0;a<73;a++)e[i=4*(a+74*o)]=e[i+4],e[i+1]=e[i+5],e[i+2]=e[i+6];for(o=0;o<30;o++)i=4*(73+74*o),o<t?(e[i]=L[n].bg.r,e[i+1]=L[n].bg.g,e[i+2]=L[n].bg.b):(e[i]=L[n].fg.r,e[i+1]=L[n].fg.g,e[i+2]=L[n].fg.b)}var t,n,a,o,i,r,s,l,c,u,d,f,p,h,m=0,v=2,_=0,y=(new Date).getTime(),x=y,g=y,b=0,w=1e3,C=0,A=0,I=1e3,S=0,k=0,T=1e3,O=0,L={fps:{bg:{r:16,g:16,b:48},fg:{r:0,g:255,b:255}},ms:{bg:{r:16,g:48,b:16},fg:{r:0,g:255,b:0}},mb:{bg:{r:48,g:16,b:26},fg:{r:255,g:0,b:128}}};(t=document.createElement("div")).style.cursor="pointer",t.style.width="80px",t.style.opacity="0.9",t.style.zIndex="10001",t.addEventListener("click",(function(){switch(++m==v&&(m=0),n.style.display="none",s.style.display="none",d.style.display="none",m){case 0:n.style.display="block";break;case 1:s.style.display="block";break;case 2:d.style.display="block"}}),!1),(n=document.createElement("div")).style.backgroundColor="rgb("+Math.floor(L.fps.bg.r/2)+","+Math.floor(L.fps.bg.g/2)+","+Math.floor(L.fps.bg.b/2)+")",n.style.padding="2px 0px 3px 0px",t.appendChild(n),(a=document.createElement("div")).style.fontFamily="Helvetica, Arial, sans-serif",a.style.textAlign="left",a.style.fontSize="9px",a.style.color="rgb("+L.fps.fg.r+","+L.fps.fg.g+","+L.fps.fg.b+")",a.style.margin="0px 0px 1px 3px",a.innerHTML='<span style="font-weight:bold">FPS</span>',n.appendChild(a),(o=document.createElement("canvas")).width=74,o.height=30,o.style.display="block",o.style.marginLeft="3px",n.appendChild(o),(i=o.getContext("2d")).fillStyle="rgb("+L.fps.bg.r+","+L.fps.bg.g+","+L.fps.bg.b+")",i.fillRect(0,0,o.width,o.height),r=i.getImageData(0,0,o.width,o.height),(s=document.createElement("div")).style.backgroundColor="rgb("+Math.floor(L.ms.bg.r/2)+","+Math.floor(L.ms.bg.g/2)+","+Math.floor(L.ms.bg.b/2)+")",s.style.padding="2px 0px 3px 0px",s.style.display="none",t.appendChild(s),(l=document.createElement("div")).style.fontFamily="Helvetica, Arial, sans-serif",l.style.textAlign="left",l.style.fontSize="9px",l.style.color="rgb("+L.ms.fg.r+","+L.ms.fg.g+","+L.ms.fg.b+")",l.style.margin="0px 0px 1px 3px",l.innerHTML='<span style="font-weight:bold">MS</span>',s.appendChild(l),(o=document.createElement("canvas")).width=74,o.height=30,o.style.display="block",o.style.marginLeft="3px",s.appendChild(o),(c=o.getContext("2d")).fillStyle="rgb("+L.ms.bg.r+","+L.ms.bg.g+","+L.ms.bg.b+")",c.fillRect(0,0,o.width,o.height),u=c.getImageData(0,0,o.width,o.height);try{performance&&performance.memory&&performance.memory.totalJSHeapSize&&(v=3)}catch(D){}return(d=document.createElement("div")).style.backgroundColor="rgb("+Math.floor(L.mb.bg.r/2)+","+Math.floor(L.mb.bg.g/2)+","+Math.floor(L.mb.bg.b/2)+")",d.style.padding="2px 0px 3px 0px",d.style.display="none",t.appendChild(d),(f=document.createElement("div")).style.fontFamily="Helvetica, Arial, sans-serif",f.style.textAlign="left",f.style.fontSize="9px",f.style.color="rgb("+L.mb.fg.r+","+L.mb.fg.g+","+L.mb.fg.b+")",f.style.margin="0px 0px 1px 3px",f.innerHTML='<span style="font-weight:bold">MB</span>',d.appendChild(f),(o=document.createElement("canvas")).width=74,o.height=30,o.style.display="block",o.style.marginLeft="3px",d.appendChild(o),(p=o.getContext("2d")).fillStyle="#301010",p.fillRect(0,0,o.width,o.height),h=p.getImageData(0,0,o.width,o.height),{domElement:t,update:function(){_++,y=(new Date).getTime(),A=y-x,I=Math.min(I,A),S=Math.max(S,A),e(u.data,Math.min(30,30-A/200*30),"ms"),l.innerHTML='<span style="font-weight:bold">'+A+" MS</span> ("+I+"-"+S+")",c.putImageData(u,0,0),x=y,y>g+1e3&&(b=Math.round(1e3*_/(y-g)),w=Math.min(w,b),C=Math.max(C,b),e(r.data,Math.min(30,30-b/100*30),"fps"),a.innerHTML='<span style="font-weight:bold">'+b+" FPS</span> ("+w+"-"+C+")",i.putImageData(r,0,0),3==v&&(k=954e-9*performance.memory.usedJSHeapSize,T=Math.min(T,k),O=Math.max(O,k),e(h.data,Math.min(30,30-k/2),"mb"),f.innerHTML='<span style="font-weight:bold">'+Math.round(k)+" MB</span> ("+Math.round(T)+"-"+Math.round(O)+")",p.putImageData(h,0,0)),g=y,_=0)}}},k=function(){var e=function(e,t){this.id="footprint-"+u.uuidv4(),this.source=t,this.shapes=e,this.isShowing=!0};return e.prototype.setCatalog=function(e){this.source&&this.source.setCatalog(e)},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.shapes.forEach((function(e){return e.show()})))},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.shapes.forEach((function(e){return e.hide()})))},e.prototype.select=function(){this.shapes.forEach((function(e){return e.select()}))},e.prototype.deselect=function(){this.shapes.forEach((function(e){return e.deselect()}))},e.prototype.setLineWidth=function(e){this.shapes.forEach((function(e){return e.setLineWidth()}))},e.prototype.setColor=function(e){this.shapes.forEach((function(t){return t.setColor(e)}))},e.prototype.setSelectionColor=function(e){this.shapes.forEach((function(t){return t.setSelectionColor(e)}))},e.prototype.isFootprint=function(){return!0},e.prototype.draw=function(e,t,n){this.shapes.forEach((function(a){return a.draw(e,t,n)}))},e.prototype.actionClicked=function(){this.source&&this.source.actionClicked(),this.shapes.forEach((function(e){return e.select()}))},e.prototype.actionOtherObjectClicked=function(){this.source&&this.source.actionOtherObjectClicked(),this.shapes.forEach((function(e){return e.deselect()}))},e.prototype.isInStroke=function(e,t,n,a){return this.shapes.some((function(o){return o.isInStroke(e,t,n,a)}))},e.prototype.getCatalog=function(){return this.source&&this.source.catalog},e.prototype.intersectsBBox=function(e,t,n,a,o){if(this.source){var i=this.source;if(!i.isShowing)return!1;var r=null;if(i.x&&i.y)r={x:i.x,y:i.y};else{var s=x.radecToViewXy(i.ra,i.dec,o);if(!s)return!1;r={x:s[0],y:s[1]}}if(r.x>=e&&r.x<=e+n&&r.y>=t&&r.y<=t+a)return!0}return!1},e}(),T=function(){var e=function(e,t,n,a){this.x1=e,this.y1=t,this.x2=n,this.y2=a};return e.prototype.isInsideView=function(t,n){if(this.x1>=0&&this.x1<=t&&this.y1>=0&&this.y1<=n)return!0;if(this.x2>=0&&this.x2<=t&&this.y2>=0&&this.y2<=n)return!0;var a=e.intersectLine(this.x1,this.y1,this.x2,this.y2,0,0,0,n),o=e.intersectLine(this.x1,this.y1,this.x2,this.y2,t,0,t,n),i=e.intersectLine(this.x1,this.y1,this.x2,this.y2,0,0,t,0),r=e.intersectLine(this.x1,this.y1,this.x2,this.y2,0,n,t,n);return!!(a||o||i||r)},e.prototype.isFootprint=function(){return!1},e.prototype.draw=function(e,t){t=!0===t||!1,e.beginPath(),e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2),t||e.stroke()},e.intersectLine=function(e,t,n,a,o,i,r,s){var l=((r-o)*(t-i)-(s-i)*(e-o))/((s-i)*(n-e)-(r-o)*(a-t)),c=((n-e)*(t-i)-(a-t)*(e-o))/((s-i)*(n-e)-(r-o)*(a-t));return l>=0&&l<=1&&c>=0&&c<=1},e.prototype.isInStroke=function(e,t,n,a){return this.draw(e,t,!0),e.isPointInStroke(n,a)},e.prototype.intersectsBBox=function(e,t,n,a){},e}(),O=function(){var e=function(e){e=e||{},this.uuid=u.uuidv4(),this.type="overlay",this.name=e.name||"overlay",this.color=e.color||Color.getNextColor(),this.lineWidth=e.lineWidth||2,this.overlayItems=[],this.isShowing=!0};return e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlayItems.forEach((function(e){return e.show()})),this.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlayItems.forEach((function(e){return e.hide()})),this.reportChange())},e.parseSTCS=function(e,t){t=t||{};for(var n=[],a=e.match(/\S+/g),o=0,i=a.length;o<i;){var r=a[o].toLowerCase();if("polygon"==r){var s=[];if(d=a[++o].toLowerCase(),u.isNumber(d)&&(d="icrs",o--),"icrs"==d||"j2000"==d||"fk5"==d){for(;o+2<i;){var l=parseFloat(a[o+1]);if(isNaN(l))break;var c=parseFloat(a[o+2]);s.push([l,c]),o+=2}t.closed=!0,n.push(A.polygon(s,t))}}else if("circle"==r){var d,f;if("icrs"==(d=a[++o].toLowerCase())||"j2000"==d||"fk5"==d)l=parseFloat(a[o+1]),c=parseFloat(a[o+2]),f=parseFloat(a[o+3]),n.push(A.circle(l,c,f,t)),o+=3}o++}return n},e.prototype.addFootprints=function(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t],!1)},e.prototype.add=function(e,t){t=void 0===t||t,this.overlayItems.push(e),e.setOverlay(this),t&&this.view.requestRedraw()},e.prototype.getFootprint=function(e){return e<this.footprints.length?this.footprints[e]:null},e.prototype.setView=function(e){this.view=e},e.prototype.removeAll=function(){this.overlayItems=[]},e.prototype.draw=function(e){if(this.isShowing){e.strokeStyle=this.color,e.lineWidth=this.lineWidth;for(var t=0;t<this.overlayItems.length;t++)this.overlayItems[t].draw(e,this.view)}},e.increaseBrightness=function(e,t){3==(e=e.replace(/^\s*#|\s*$/g,"")).length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(e.substr(0,2),16),a=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return"#"+(0|256+n+(256-n)*t/100).toString(16).substr(1)+(0|256+a+(256-a)*t/100).toString(16).substr(1)+(0|256+o+(256-o)*t/100).toString(16).substr(1)},e.prototype.reportChange=function(){this.view&&this.view.requestRedraw()},e}(),L=function(){var e=function(e,t,n){n=n||{},this.color=n.color||void 0,this.fillColor=n.fillColor||void 0,this.id="circle-"+u.uuidv4(),this.setCenter(e),this.setRadius(t),this.overlay=null,this.isShowing=!0,this.isSelected=!1,this.selectionColor=void 0};return e.prototype.setColor=function(e){this.color!=e&&(this.color=e,this.overlay&&this.overlay.reportChange())},e.prototype.setSelectionColor=function(e){this.selectionColor!=e&&(this.selectionColor=e,this.overlay&&this.overlay.reportChange())},e.prototype.setOverlay=function(e){this.overlay=e},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},e.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},e.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},e.prototype.isFootprint=function(){return!0},e.prototype.setCenter=function(e){this.centerRaDec=e,this.overlay&&this.overlay.reportChange()},e.prototype.setRadius=function(e){this.radiusDegrees=e,this.overlay&&this.overlay.reportChange()},e.prototype.draw=function(e,t,n){if(this.isShowing){n=!0===n||!1;var a=x.radecToViewXy(this.centerRaDec[0],this.centerRaDec[1],t);if(a){this.center={x:a[0],y:a[1]};var o=this.centerRaDec[0],i=this.centerRaDec[1]+(o>0?-this.radiusDegrees:this.radiusDegrees),r=x.radecToViewXy(o,i,t);if(r){var s=r[0]-this.center.x,l=r[1]-this.center.y;this.radius=Math.sqrt(s*s+l*l);var c=this.color;!c&&this.overlay&&(c=this.overlay.color),c||(c="#ff0000"),this.isSelected?this.selectionColor?e.strokeStyle=this.selectionColor:e.strokeStyle=O.increaseBrightness(c,50):e.strokeStyle=c,e.beginPath(),e.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI,!1),n||(this.fillColor&&(e.fillStyle=this.fillColor,e.fill()),e.stroke())}}}},e.prototype.isInStroke=function(e,t,n,a){return this.draw(e,t,!0),e.isPointInStroke(n,a)},e.prototype.intersectsBBox=function(e,t,n,a){var o=abs(this.center.x-e),i=abs(this.center.y-t);if(o>n/2+this.radius)return!1;if(i>a/2+this.radius)return!1;if(o<=n/2)return!0;if(i<=a/2)return!0;var r=o-n/2,s=i-a/2;return r*r+s*s<=this.radius*this.radius},e}(),D=function(){var e=function(e,t,n,a,o){o=o||{},this.color=o.color||void 0,this.fillColor=o.fillColor||void 0,this.id="ellipse-"+u.uuidv4(),this.setCenter(e),this.setRadiuses(t,n),this.setRotation(a),this.overlay=null,this.isShowing=!0,this.isSelected=!1};return e.prototype.setOverlay=function(e){this.overlay=e},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},e.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},e.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},e.prototype.setCenter=function(e){this.centerRaDec=e,this.overlay&&this.overlay.reportChange()},e.prototype.setRotation=function(e){var t=e*Math.PI/180;this.rotation=t,this.overlay&&this.overlay.reportChange()},e.prototype.setRadiuses=function(e,t){this.radiusXDegrees=e,this.radiusYDegrees=t,this.overlay&&this.overlay.reportChange()},e.prototype.isFootprint=function(){return!0},e.prototype.draw=function(e,t,n){if(this.isShowing){var a=x.radecToViewXy(this.centerRaDec[0],this.centerRaDec[1],t);if(a){var o=x.radecToViewXy(this.centerRaDec[0]+this.radiusXDegrees,this.centerRaDec[1],t),i=x.radecToViewXy(this.centerRaDec[0],this.centerRaDec[1]+this.radiusYDegrees,t);if(o&&i){var r=o[0]-a[0],s=o[1]-a[1],l=Math.sqrt(r*r+s*s),c=i[0]-a[0],u=i[1]-a[1],d=Math.sqrt(c*c+u*u);if(!(r*u-c*s<=0)){n=!0===n||!1;var f=this.color;!f&&this.overlay&&(f=this.overlay.color),f||(f="#ff0000"),this.isSelected?e.strokeStyle=O.increaseBrightness(f,50):e.strokeStyle=f;var p=this.centerRaDec,h=[this.centerRaDec[0],this.centerRaDec[1]+.001],m=this.overlay.view.wasm.worldToScreen(p[0],p[1]),v=this.overlay.view.wasm.worldToScreen(h[0],h[1]),_=[v[0]-m[0],v[1]-m[1]],y=Math.sqrt(_[0]*_[0]+_[1]*_[1]);_=[_[0]/y,_[1]/y];var g=[1,0],b=g[0],w=g[1],C=_[0],A=_[1],I=Math.atan2(b*A-w*C,b*C+w*A),S=-this.rotation+I;e.beginPath(),e.ellipse(a[0],a[1],l,d,S,0,2*Math.PI,!1),n||(this.fillColor&&(e.fillStyle=this.fillColor,e.fill()),e.stroke())}}}}},e.prototype.isInStroke=function(e,t,n,a){return this.draw(e,t,!0),e.isPointInStroke(n,a)},e.prototype.intersectsBBox=function(e,t,n,a){},e}(),M=function(){var e=function(e,t){t=t||{},this.color=t.color||void 0,this.lineWidth=t.lineWidth||2,t.closed?this.closed=t.closed:this.closed=!1,this.id="polyline-"+u.uuidv4(),this.radecArray=e,this.overlay=null,this.isShowing=!0,this.isSelected=!1,this.selectionColor=void 0};return e.prototype.setOverlay=function(e){this.overlay=e},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.overlay&&this.overlay.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.overlay&&this.overlay.reportChange())},e.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.overlay&&this.overlay.reportChange())},e.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.overlay&&this.overlay.reportChange())},e.prototype.setLineWidth=function(e){this.lineWidth!=e&&(this.lineWidth=e,this.overlay&&this.overlay.reportChange())},e.prototype.setColor=function(e){this.color!=e&&(this.color=e,this.overlay&&this.overlay.reportChange())},e.prototype.setSelectionColor=function(e){this.selectionColor!=e&&(this.selectionColor=e,this.overlay&&this.overlay.reportChange())},e.prototype.isFootprint=function(){return this.closed},e.prototype.draw=function(e,t,n){if(this.isShowing&&this.radecArray&&!(this.radecArray.length<2)){n=!0===n||!1;var a=this.color;!a&&this.overlay&&(a=this.overlay.color),a||(a="#ff0000"),this.isSelected?this.selectionColor?e.strokeStyle=this.selectionColor:e.strokeStyle=O.increaseBrightness(a,50):e.strokeStyle=a;for(var o=[],i=0,r=this.radecArray.length;i<r;i++){var s=x.radecToViewXy(this.radecArray[i][0],this.radecArray[i][1],t);if(!s)return;o.push(s)}e.lineWidth=this.lineWidth,e.beginPath();var l=o.length-1;e.moveTo(o[0][0],o[0][1]);for(i=0,r=l;i<r;i++){var c=new T(o[i][0],o[i][1],o[i+1][0],o[i+1][1]);c.isInsideView(t.width,t.height)&&c.draw(e)}if(this.closed){var u=new T(o[l][0],o[l][1],o[0][0],o[0][1]);u.isInsideView(t.width,t.height)&&u.draw(e)}n||e.stroke()}},e.prototype.isInStroke=function(e,t,n,a){for(var o=[],i=0;i<this.radecArray.length;i++){var r=x.radecToViewXy(this.radecArray[i][0],this.radecArray[i][1],t);if(!r)return!1;o.push({x:r[0],y:r[1]})}for(var s=o.length-1,l=0;l<s;l++){if(new T(o[l].x,o[l].y,o[l+1].x,o[l+1].y).draw(e,!0),e.isPointInStroke(n,a))return!0}if(this.closed&&(new T(o[s].x,o[s].y,o[0].x,o[0].y).draw(e,!0),e.isPointInStroke(n,a)))return!0;return!1},e.prototype.intersectsBBox=function(e,t,n,a){},e}(),E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,z=l(825),R=l.n(z),P=l(614),N=l.n(P),j=l(831),F=l.n(j),q=l(494),H=l.n(q),U=l(892),G=l.n(U),B=l(610),V=l.n(B),Y=l(418),Z=l.n(Y),W=l(585),J=l.n(W),K=l(624),X=l.n(K),Q=l(652),ee=l.n(Q),te=l(820),ne=l.n(te),ae=l(579),oe=l.n(ae),ie=l(371),re=l.n(ie),se=l(783),le=l.n(se),ce=l(935),ue=l.n(ce),de=l(187),fe=l.n(de),pe=l(726),he=l.n(pe),me=l(90),ve=l.n(me),_e=l(20),ye=l.n(_e),xe=l(943),ge=l.n(xe),be=l(627),we=l.n(be),Ce=l(378),Ae=l.n(Ce),Ie=l(593),Se=l.n(Ie),ke=l(567),Te=l.n(ke),Oe=l(206),Le=l.n(Oe),De=l(55),Me=l.n(De),Ee=l(174),ze=l.n(Ee),Re=l(262),Pe=l.n(Re),Ne=l(171),je=l.n(Ne),Fe=l(698),qe=l.n(Fe),He=l(607),Ue=l.n(He),Ge=[{id:"CatalogAitoffVS",content:R()},{id:"CatalogHEALPixVS",content:V()},{id:"CatalogMercatVS",content:N()},{id:"CatalogArcVS",content:F()},{id:"CatalogTanVS",content:H()},{id:"CatalogMollVS",content:G()},{id:"CatalogOrthoVS",content:Z()},{id:"CatalogOrthoFS",content:J()},{id:"CatalogFS",content:X()},{id:"ColormapCatalogVS",content:ee()},{id:"ColormapCatalogFS",content:ne()},{id:"GridVS_CPU",content:oe()},{id:"GridFS_CPU",content:re()},{id:"RayTracerVS",content:le()},{id:"RayTracerColorFS",content:ue()},{id:"RayTracerGrayscale2ColormapFS",content:fe()},{id:"RayTracerGrayscale2ColormapIntegerFS",content:he()},{id:"RayTracerGrayscale2ColormapUnsignedFS",content:ve()},{id:"RayTracerFontVS",content:ye()},{id:"RayTracerFontFS",content:ge()},{id:"RasterizerVS",content:we()},{id:"RasterizerColorFS",content:Ae()},{id:"RasterizerGrayscale2ColormapFS",content:Se()},{id:"RasterizerGrayscale2ColormapIntegerFS",content:Te()},{id:"RasterizerGrayscale2ColormapUnsignedFS",content:Le()},{id:"PostVS",content:Me()},{id:"PostFS",content:ze()},{id:"FitsVS",content:Pe()},{id:"FitsFS",content:je()},{id:"FitsFSUnsigned",content:qe()},{id:"FitsFSInteger",content:Ue()}];function Be(){return Ge}const Ve=l.p+"ccdb93d24585bd08a4261722b95e9e3d.png",Ye=l.p+"7538bf853f9b14029f986310747a9aad.png",Ze=JSON.parse('{"0":{"x_min":58,"x_max":67,"y_min":130,"y_max":143,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.6640625,"bound_ymin":-0.1953125},"1":{"x_min":99,"x_max":104,"y_min":105,"y_max":117,"x_advance":8,"y_advance":0,"w":5,"h":12,"bound_xmin":1.7421875,"bound_ymin":0},"2":{"x_min":67,"x_max":76,"y_min":0,"y_max":12,"x_advance":8,"y_advance":0,"w":9,"h":12,"bound_xmin":0.484375,"bound_ymin":0},"3":{"x_min":58,"x_max":67,"y_min":117,"y_max":130,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.671875,"bound_ymin":-0.203125},"4":{"x_min":67,"x_max":76,"y_min":12,"y_max":24,"x_advance":8,"y_advance":0,"w":9,"h":12,"bound_xmin":0.203125,"bound_ymin":0},"5":{"x_min":58,"x_max":67,"y_min":91,"y_max":104,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.6640625,"bound_ymin":-0.1953125},"6":{"x_min":58,"x_max":67,"y_min":13,"y_max":26,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.6015625,"bound_ymin":-0.1953125},"7":{"x_min":67,"x_max":76,"y_min":24,"y_max":36,"x_advance":8,"y_advance":0,"w":9,"h":12,"bound_xmin":0.7578125,"bound_ymin":0},"8":{"x_min":39,"x_max":48,"y_min":173,"y_max":186,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.6484375,"bound_ymin":-0.1953125},"9":{"x_min":49,"x_max":58,"y_min":182,"y_max":195,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.6640625,"bound_ymin":-0.1953125},"I":{"x_min":104,"x_max":107,"y_min":65,"y_max":77,"x_advance":4,"y_advance":0,"w":3,"h":12,"bound_xmin":1.4921875,"bound_ymin":0},"}":{"x_min":92,"x_max":97,"y_min":211,"y_max":227,"x_advance":5,"y_advance":0,"w":5,"h":16,"bound_xmin":0.3671875,"bound_ymin":-3.3671875},"+":{"x_min":67,"x_max":76,"y_min":115,"y_max":124,"x_advance":9,"y_advance":0,"w":9,"h":9,"bound_xmin":0.890625,"bound_ymin":1.8515625},"­":{"x_min":99,"x_max":104,"y_min":144,"y_max":146,"x_advance":5,"y_advance":0,"w":5,"h":2,"bound_xmin":0.5078125,"bound_ymin":3.4375},"z":{"x_min":84,"x_max":92,"y_min":120,"y_max":129,"x_advance":8,"y_advance":0,"w":8,"h":9,"bound_xmin":0.3125,"bound_ymin":0},"":{"x_min":99,"x_max":103,"y_min":223,"y_max":235,"x_advance":4,"y_advance":0,"w":4,"h":12,"bound_xmin":0.2734375,"bound_ymin":0},"":{"x_min":84,"x_max":91,"y_min":227,"y_max":240,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"Ê":{"x_min":39,"x_max":48,"y_min":144,"y_max":159,"x_advance":10,"y_advance":0,"w":9,"h":15,"bound_xmin":1.265625,"bound_ymin":0},"¤":{"x_min":67,"x_max":76,"y_min":97,"y_max":106,"x_advance":8,"y_advance":0,"w":9,"h":9,"bound_xmin":0.578125,"bound_ymin":1.8359375},"÷":{"x_min":67,"x_max":76,"y_min":124,"y_max":131,"x_advance":8,"y_advance":0,"w":9,"h":7,"bound_xmin":0.609375,"bound_ymin":2.4921875},"C":{"x_min":28,"x_max":39,"y_min":0,"y_max":13,"x_advance":11,"y_advance":0,"w":11,"h":13,"bound_xmin":0.796875,"bound_ymin":-0.1953125},"¯":{"x_min":28,"x_max":39,"y_min":61,"y_max":63,"x_advance":8,"y_advance":0,"w":11,"h":2,"bound_xmin":-0.2421875,"bound_ymin":12.234375},"\\u0004":{"x_min":84,"x_max":92,"y_min":110,"y_max":120,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"ö":{"x_min":39,"x_max":48,"y_min":186,"y_max":199,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"":{"x_min":16,"x_max":28,"y_min":28,"y_max":42,"x_advance":10,"y_advance":0,"w":12,"h":14,"bound_xmin":-0.0234375,"bound_ymin":0},"õ":{"x_min":58,"x_max":67,"y_min":182,"y_max":195,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"£":{"x_min":49,"x_max":58,"y_min":130,"y_max":143,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.2109375,"bound_ymin":-0.21875},"":{"x_min":84,"x_max":92,"y_min":80,"y_max":90,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"f":{"x_min":99,"x_max":104,"y_min":81,"y_max":93,"x_advance":4,"y_advance":0,"w":5,"h":12,"bound_xmin":0.1484375,"bound_ymin":0},"G":{"x_min":16,"x_max":28,"y_min":95,"y_max":108,"x_advance":12,"y_advance":0,"w":12,"h":13,"bound_xmin":0.8515625,"bound_ymin":-0.1953125},"N":{"x_min":39,"x_max":49,"y_min":0,"y_max":12,"x_advance":11,"y_advance":0,"w":10,"h":12,"bound_xmin":1.21875,"bound_ymin":0},"Ð":{"x_min":16,"x_max":28,"y_min":146,"y_max":158,"x_advance":11,"y_advance":0,"w":12,"h":12,"bound_xmin":-0.0234375,"bound_ymin":0},"ë":{"x_min":49,"x_max":58,"y_min":156,"y_max":169,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"¨":{"x_min":99,"x_max":104,"y_min":141,"y_max":144,"x_advance":5,"y_advance":0,"w":5,"h":3,"bound_xmin":0.4765625,"bound_ymin":9.921875},"\\u0019":{"x_min":76,"x_max":84,"y_min":104,"y_max":114,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Â":{"x_min":0,"x_max":12,"y_min":195,"y_max":210,"x_advance":10,"y_advance":0,"w":12,"h":15,"bound_xmin":-0.0234375,"bound_ymin":0},"D":{"x_min":39,"x_max":49,"y_min":24,"y_max":36,"x_advance":11,"y_advance":0,"w":10,"h":12,"bound_xmin":1.234375,"bound_ymin":0},"À":{"x_min":0,"x_max":12,"y_min":165,"y_max":180,"x_advance":10,"y_advance":0,"w":12,"h":15,"bound_xmin":-0.0234375,"bound_ymin":0},"X":{"x_min":28,"x_max":39,"y_min":37,"y_max":49,"x_advance":10,"y_advance":0,"w":11,"h":12,"bound_xmin":0.0703125,"bound_ymin":0},"":{"x_min":58,"x_max":67,"y_min":78,"y_max":91,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"?":{"x_min":58,"x_max":67,"y_min":195,"y_max":207,"x_advance":8,"y_advance":0,"w":9,"h":12,"bound_xmin":0.703125,"bound_ymin":0},"":{"x_min":49,"x_max":58,"y_min":221,"y_max":234,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"\\f":{"x_min":76,"x_max":84,"y_min":124,"y_max":134,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"\\u0001":{"x_min":76,"x_max":84,"y_min":234,"y_max":244,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"-":{"x_min":99,"x_max":104,"y_min":146,"y_max":148,"x_advance":5,"y_advance":0,"w":5,"h":2,"bound_xmin":0.5078125,"bound_ymin":3.4375},"[":{"x_min":99,"x_max":103,"y_min":148,"y_max":164,"x_advance":4,"y_advance":0,"w":4,"h":16,"bound_xmin":1.0859375,"bound_ymin":-3.1796875}," ":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":4,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"²":{"x_min":92,"x_max":98,"y_min":175,"y_max":182,"x_advance":5,"y_advance":0,"w":6,"h":7,"bound_xmin":0.1953125,"bound_ymin":5.7265625},"":{"x_min":49,"x_max":58,"y_min":65,"y_max":78,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"":{"x_min":58,"x_max":67,"y_min":52,"y_max":65,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"\\u0015":{"x_min":76,"x_max":84,"y_min":214,"y_max":224,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"R":{"x_min":28,"x_max":39,"y_min":13,"y_max":25,"x_advance":11,"y_advance":0,"w":11,"h":12,"bound_xmin":1.2578125,"bound_ymin":0},"y":{"x_min":76,"x_max":84,"y_min":0,"y_max":13,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.2578125,"bound_ymin":-3.3671875},"Á":{"x_min":0,"x_max":12,"y_min":180,"y_max":195,"x_advance":10,"y_advance":0,"w":12,"h":15,"bound_xmin":-0.0234375,"bound_ymin":0},"\\u0000":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":0,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"@":{"x_min":0,"x_max":16,"y_min":0,"y_max":16,"x_advance":16,"y_advance":0,"w":16,"h":16,"bound_xmin":0.8671875,"bound_ymin":-3.3671875},"\\\\":{"x_min":99,"x_max":104,"y_min":43,"y_max":56,"x_advance":4,"y_advance":0,"w":5,"h":13,"bound_xmin":0,"bound_ymin":-0.1953125},"Î":{"x_min":92,"x_max":98,"y_min":122,"y_max":137,"x_advance":4,"y_advance":0,"w":6,"h":15,"bound_xmin":-0.25,"bound_ymin":0},"¹":{"x_min":104,"x_max":108,"y_min":12,"y_max":19,"x_advance":5,"y_advance":0,"w":4,"h":7,"bound_xmin":0.8359375,"bound_ymin":5.7265625},"Q":{"x_min":16,"x_max":28,"y_min":121,"y_max":134,"x_advance":12,"y_advance":0,"w":12,"h":13,"bound_xmin":0.6875,"bound_ymin":-0.890625},"q":{"x_min":67,"x_max":75,"y_min":204,"y_max":217,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.5625,"bound_ymin":-3.1796875},"b":{"x_min":67,"x_max":75,"y_min":178,"y_max":191,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":1.046875,"bound_ymin":-0.1875},"\\u0017":{"x_min":76,"x_max":84,"y_min":114,"y_max":124,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"\\u0010":{"x_min":76,"x_max":84,"y_min":174,"y_max":184,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"L":{"x_min":76,"x_max":84,"y_min":52,"y_max":64,"x_advance":8,"y_advance":0,"w":8,"h":12,"bound_xmin":1.171875,"bound_ymin":0},"=":{"x_min":67,"x_max":76,"y_min":137,"y_max":143,"x_advance":9,"y_advance":0,"w":9,"h":6,"bound_xmin":0.890625,"bound_ymin":3.2578125},"¶":{"x_min":39,"x_max":48,"y_min":36,"y_max":52,"x_advance":8,"y_advance":0,"w":9,"h":16,"bound_xmin":0.0078125,"bound_ymin":-3.1796875},"\\u0018":{"x_min":84,"x_max":92,"y_min":30,"y_max":40,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"ü":{"x_min":84,"x_max":91,"y_min":188,"y_max":201,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"ì":{"x_min":99,"x_max":103,"y_min":235,"y_max":247,"x_advance":4,"y_advance":0,"w":4,"h":12,"bound_xmin":0.2734375,"bound_ymin":0},"·":{"x_min":104,"x_max":107,"y_min":108,"y_max":111,"x_advance":4,"y_advance":0,"w":3,"h":3,"bound_xmin":1.4453125,"bound_ymin":4.8359375},"ô":{"x_min":58,"x_max":67,"y_min":169,"y_max":182,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"":{"x_min":49,"x_max":58,"y_min":234,"y_max":247,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"þ":{"x_min":67,"x_max":75,"y_min":146,"y_max":162,"x_advance":8,"y_advance":0,"w":8,"h":16,"bound_xmin":1.0546875,"bound_ymin":-3.1796875},"¢":{"x_min":39,"x_max":48,"y_min":68,"y_max":84,"x_advance":8,"y_advance":0,"w":9,"h":16,"bound_xmin":0.8359375,"bound_ymin":-3.1953125},"\\u0003":{"x_min":84,"x_max":92,"y_min":50,"y_max":60,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"ñ":{"x_min":92,"x_max":99,"y_min":39,"y_max":51,"x_advance":8,"y_advance":0,"w":7,"h":12,"bound_xmin":1.0546875,"bound_ymin":0},"":{"x_min":84,"x_max":91,"y_min":240,"y_max":253,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"|":{"x_min":104,"x_max":106,"y_min":129,"y_max":145,"x_advance":4,"y_advance":0,"w":2,"h":16,"bound_xmin":1.46875,"bound_ymin":-3.3671875},"½":{"x_min":0,"x_max":14,"y_min":79,"y_max":92,"x_advance":13,"y_advance":0,"w":14,"h":13,"bound_xmin":0.8359375,"bound_ymin":-0.4453125},"\\n":{"x_min":84,"x_max":92,"y_min":90,"y_max":100,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Ý":{"x_min":16,"x_max":27,"y_min":220,"y_max":235,"x_advance":10,"y_advance":0,"w":11,"h":15,"bound_xmin":0.046875,"bound_ymin":0},"":{"x_min":92,"x_max":98,"y_min":149,"y_max":161,"x_advance":4,"y_advance":0,"w":6,"h":12,"bound_xmin":-0.1328125,"bound_ymin":0},"l":{"x_min":104,"x_max":106,"y_min":145,"y_max":157,"x_advance":3,"y_advance":0,"w":2,"h":12,"bound_xmin":1.0234375,"bound_ymin":0},"\\u0002":{"x_min":84,"x_max":92,"y_min":40,"y_max":50,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"¬":{"x_min":67,"x_max":76,"y_min":131,"y_max":137,"x_advance":9,"y_advance":0,"w":9,"h":6,"bound_xmin":0.890625,"bound_ymin":3.3125},"E":{"x_min":58,"x_max":67,"y_min":231,"y_max":243,"x_advance":10,"y_advance":0,"w":9,"h":12,"bound_xmin":1.265625,"bound_ymin":0},"ó":{"x_min":58,"x_max":67,"y_min":156,"y_max":169,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"\\u000e":{"x_min":76,"x_max":84,"y_min":134,"y_max":144,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Ì":{"x_min":99,"x_max":103,"y_min":196,"y_max":211,"x_advance":4,"y_advance":0,"w":4,"h":15,"bound_xmin":0.421875,"bound_ymin":0},"ò":{"x_min":58,"x_max":67,"y_min":143,"y_max":156,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"Í":{"x_min":104,"x_max":107,"y_min":25,"y_max":40,"x_advance":4,"y_advance":0,"w":3,"h":15,"bound_xmin":1.1015625,"bound_ymin":0},"a":{"x_min":67,"x_max":76,"y_min":48,"y_max":58,"x_advance":8,"y_advance":0,"w":9,"h":10,"bound_xmin":0.578125,"bound_ymin":-0.1875},"ú":{"x_min":92,"x_max":99,"y_min":13,"y_max":26,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"^":{"x_min":84,"x_max":92,"y_min":155,"y_max":162,"x_advance":7,"y_advance":0,"w":8,"h":7,"bound_xmin":0.421875,"bound_ymin":5.390625},"":{"x_min":58,"x_max":67,"y_min":0,"y_max":13,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"å":{"x_min":49,"x_max":58,"y_min":26,"y_max":39,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"s":{"x_min":76,"x_max":84,"y_min":244,"y_max":254,"x_advance":8,"y_advance":0,"w":8,"h":10,"bound_xmin":0.4921875,"bound_ymin":-0.1875},"\\u001b":{"x_min":76,"x_max":84,"y_min":194,"y_max":204,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"±":{"x_min":67,"x_max":76,"y_min":68,"y_max":78,"x_advance":8,"y_advance":0,"w":9,"h":10,"bound_xmin":0.609375,"bound_ymin":0},"{":{"x_min":99,"x_max":104,"y_min":0,"y_max":16,"x_advance":5,"y_advance":0,"w":5,"h":16,"bound_xmin":0.4453125,"bound_ymin":-3.3671875},"":{"x_min":49,"x_max":58,"y_min":208,"y_max":221,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"(":{"x_min":92,"x_max":97,"y_min":195,"y_max":211,"x_advance":5,"y_advance":0,"w":5,"h":16,"bound_xmin":0.96875,"bound_ymin":-3.3671875},":":{"x_min":104,"x_max":107,"y_min":89,"y_max":98,"x_advance":4,"y_advance":0,"w":3,"h":9,"bound_xmin":1.4453125,"bound_ymin":0},"A":{"x_min":16,"x_max":28,"y_min":134,"y_max":146,"x_advance":10,"y_advance":0,"w":12,"h":12,"bound_xmin":-0.0234375,"bound_ymin":0},"o":{"x_min":67,"x_max":76,"y_min":58,"y_max":68,"x_advance":8,"y_advance":0,"w":9,"h":10,"bound_xmin":0.53125,"bound_ymin":-0.1875},"ã":{"x_min":49,"x_max":58,"y_min":169,"y_max":182,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"g":{"x_min":76,"x_max":84,"y_min":26,"y_max":39,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.515625,"bound_ymin":-3.3671875},"":{"x_min":49,"x_max":58,"y_min":0,"y_max":13,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"\\u000b":{"x_min":76,"x_max":84,"y_min":84,"y_max":94,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"³":{"x_min":92,"x_max":98,"y_min":168,"y_max":175,"x_advance":5,"y_advance":0,"w":6,"h":7,"bound_xmin":0.2578125,"bound_ymin":5.5859375},"à":{"x_min":49,"x_max":58,"y_min":143,"y_max":156,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"Ø":{"x_min":16,"x_max":28,"y_min":69,"y_max":82,"x_advance":12,"y_advance":0,"w":12,"h":13,"bound_xmin":0.6484375,"bound_ymin":-0.4609375},"w":{"x_min":16,"x_max":28,"y_min":170,"y_max":179,"x_advance":11,"y_advance":0,"w":12,"h":9,"bound_xmin":0.046875,"bound_ymin":0},"H":{"x_min":39,"x_max":49,"y_min":12,"y_max":24,"x_advance":11,"y_advance":0,"w":10,"h":12,"bound_xmin":1.28125,"bound_ymin":0},"Z":{"x_min":28,"x_max":38,"y_min":197,"y_max":209,"x_advance":9,"y_advance":0,"w":10,"h":12,"bound_xmin":0.3203125,"bound_ymin":0},"<":{"x_min":67,"x_max":76,"y_min":106,"y_max":115,"x_advance":9,"y_advance":0,"w":9,"h":9,"bound_xmin":0.875,"bound_ymin":1.765625},".":{"x_min":104,"x_max":107,"y_min":111,"y_max":113,"x_advance":4,"y_advance":0,"w":3,"h":2,"bound_xmin":1.453125,"bound_ymin":0},"\\u0016":{"x_min":76,"x_max":84,"y_min":154,"y_max":164,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Ã":{"x_min":0,"x_max":12,"y_min":240,"y_max":254,"x_advance":10,"y_advance":0,"w":12,"h":14,"bound_xmin":-0.0234375,"bound_ymin":0},"¿":{"x_min":67,"x_max":75,"y_min":217,"y_max":230,"x_advance":9,"y_advance":0,"w":8,"h":13,"bound_xmin":1.234375,"bound_ymin":-3.3515625},"":{"x_min":58,"x_max":67,"y_min":65,"y_max":78,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"":{"x_min":58,"x_max":67,"y_min":39,"y_max":52,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"û":{"x_min":92,"x_max":99,"y_min":26,"y_max":39,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"":{"x_min":99,"x_max":104,"y_min":69,"y_max":81,"x_advance":4,"y_advance":0,"w":5,"h":12,"bound_xmin":0.0703125,"bound_ymin":0},"ø":{"x_min":84,"x_max":92,"y_min":10,"y_max":20,"x_advance":9,"y_advance":0,"w":8,"h":10,"bound_xmin":1.0078125,"bound_ymin":-0.6171875},"\\u0006":{"x_min":84,"x_max":92,"y_min":20,"y_max":30,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Ò":{"x_min":0,"x_max":12,"y_min":118,"y_max":134,"x_advance":12,"y_advance":0,"w":12,"h":16,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"ð":{"x_min":58,"x_max":67,"y_min":104,"y_max":117,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5703125,"bound_ymin":-0.1953125},"Ú":{"x_min":28,"x_max":38,"y_min":81,"y_max":97,"x_advance":11,"y_advance":0,"w":10,"h":16,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"h":{"x_min":92,"x_max":99,"y_min":63,"y_max":75,"x_advance":8,"y_advance":0,"w":7,"h":12,"bound_xmin":1.0546875,"bound_ymin":0},",":{"x_min":104,"x_max":107,"y_min":98,"y_max":103,"x_advance":4,"y_advance":0,"w":3,"h":5,"bound_xmin":1.328125,"bound_ymin":-2.265625},"":{"x_min":84,"x_max":91,"y_min":214,"y_max":227,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"¸":{"x_min":99,"x_max":104,"y_min":136,"y_max":141,"x_advance":5,"y_advance":0,"w":5,"h":5,"bound_xmin":0.8359375,"bound_ymin":-3.2890625},"ý":{"x_min":67,"x_max":75,"y_min":162,"y_max":178,"x_advance":8,"y_advance":0,"w":8,"h":16,"bound_xmin":0.2578125,"bound_ymin":-3.3671875},"¦":{"x_min":104,"x_max":106,"y_min":113,"y_max":129,"x_advance":4,"y_advance":0,"w":2,"h":16,"bound_xmin":1.46875,"bound_ymin":-3.3671875},"»":{"x_min":92,"x_max":99,"y_min":114,"y_max":122,"x_advance":8,"y_advance":0,"w":7,"h":8,"bound_xmin":1.09375,"bound_ymin":0.5625},"Ï":{"x_min":99,"x_max":104,"y_min":16,"y_max":30,"x_advance":4,"y_advance":0,"w":5,"h":14,"bound_xmin":0.03125,"bound_ymin":0},"°":{"x_min":99,"x_max":104,"y_min":126,"y_max":131,"x_advance":6,"y_advance":0,"w":5,"h":5,"bound_xmin":1,"bound_ymin":7.3125},"æ":{"x_min":0,"x_max":14,"y_min":92,"y_max":102,"x_advance":14,"y_advance":0,"w":14,"h":10,"bound_xmin":0.53125,"bound_ymin":-0.1875},"ä":{"x_min":39,"x_max":48,"y_min":225,"y_max":238,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"Ó":{"x_min":0,"x_max":12,"y_min":134,"y_max":150,"x_advance":12,"y_advance":0,"w":12,"h":16,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"\\b":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":0,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"p":{"x_min":67,"x_max":75,"y_min":230,"y_max":243,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":1.0546875,"bound_ymin":-3.1796875},"":{"x_min":67,"x_max":75,"y_min":191,"y_max":204,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.625,"bound_ymin":-3.1328125},"":{"x_min":28,"x_max":38,"y_min":143,"y_max":157,"x_advance":11,"y_advance":0,"w":10,"h":14,"bound_xmin":1.21875,"bound_ymin":0},"ï":{"x_min":99,"x_max":104,"y_min":93,"y_max":105,"x_advance":4,"y_advance":0,"w":5,"h":12,"bound_xmin":0.0703125,"bound_ymin":0},"%":{"x_min":0,"x_max":14,"y_min":40,"y_max":53,"x_advance":14,"y_advance":0,"w":14,"h":13,"bound_xmin":0.9296875,"bound_ymin":-0.421875},"\\"":{"x_min":99,"x_max":104,"y_min":131,"y_max":136,"x_advance":5,"y_advance":0,"w":5,"h":5,"bound_xmin":0.734375,"bound_ymin":7.3984375},"k":{"x_min":92,"x_max":99,"y_min":51,"y_max":63,"x_advance":8,"y_advance":0,"w":7,"h":12,"bound_xmin":1.0625,"bound_ymin":0},"U":{"x_min":28,"x_max":38,"y_min":171,"y_max":184,"x_advance":11,"y_advance":0,"w":10,"h":13,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"©":{"x_min":16,"x_max":28,"y_min":82,"y_max":95,"x_advance":11,"y_advance":0,"w":12,"h":13,"bound_xmin":0.0234375,"bound_ymin":-0.140625},"\\u0011":{"x_min":76,"x_max":84,"y_min":184,"y_max":194,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Y":{"x_min":28,"x_max":39,"y_min":49,"y_max":61,"x_advance":10,"y_advance":0,"w":11,"h":12,"bound_xmin":0.046875,"bound_ymin":0},"\\u000f":{"x_min":76,"x_max":84,"y_min":144,"y_max":154,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"~":{"x_min":67,"x_max":76,"y_min":143,"y_max":146,"x_advance":9,"y_advance":0,"w":9,"h":3,"bound_xmin":0.6796875,"bound_ymin":4.3515625},"\\u001c":{"x_min":76,"x_max":84,"y_min":204,"y_max":214,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"V":{"x_min":28,"x_max":39,"y_min":25,"y_max":37,"x_advance":10,"y_advance":0,"w":11,"h":12,"bound_xmin":0.0703125,"bound_ymin":0},"\\u001a":{"x_min":76,"x_max":84,"y_min":164,"y_max":174,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"]":{"x_min":99,"x_max":103,"y_min":180,"y_max":196,"x_advance":4,"y_advance":0,"w":4,"h":16,"bound_xmin":0.3046875,"bound_ymin":-3.1796875},"":{"x_min":39,"x_max":48,"y_min":238,"y_max":251,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"\\t":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":4,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"¥":{"x_min":28,"x_max":38,"y_min":221,"y_max":233,"x_advance":8,"y_advance":0,"w":10,"h":12,"bound_xmin":-0.0234375,"bound_ymin":0},"â":{"x_min":49,"x_max":58,"y_min":104,"y_max":117,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"È":{"x_min":39,"x_max":48,"y_min":84,"y_max":99,"x_advance":10,"y_advance":0,"w":9,"h":15,"bound_xmin":1.265625,"bound_ymin":0},"M":{"x_min":16,"x_max":28,"y_min":158,"y_max":170,"x_advance":13,"y_advance":0,"w":12,"h":12,"bound_xmin":1.1875,"bound_ymin":0},"Û":{"x_min":28,"x_max":38,"y_min":65,"y_max":81,"x_advance":11,"y_advance":0,"w":10,"h":16,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"n":{"x_min":92,"x_max":99,"y_min":97,"y_max":106,"x_advance":8,"y_advance":0,"w":7,"h":9,"bound_xmin":1.0546875,"bound_ymin":0},"i":{"x_min":104,"x_max":106,"y_min":157,"y_max":169,"x_advance":3,"y_advance":0,"w":2,"h":12,"bound_xmin":1.0625,"bound_ymin":0},"":{"x_min":39,"x_max":48,"y_min":114,"y_max":129,"x_advance":10,"y_advance":0,"w":9,"h":15,"bound_xmin":1.265625,"bound_ymin":0},"Õ":{"x_min":0,"x_max":12,"y_min":225,"y_max":240,"x_advance":12,"y_advance":0,"w":12,"h":15,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"§":{"x_min":39,"x_max":48,"y_min":52,"y_max":68,"x_advance":8,"y_advance":0,"w":9,"h":16,"bound_xmin":0.6328125,"bound_ymin":-3.3671875},")":{"x_min":92,"x_max":97,"y_min":227,"y_max":243,"x_advance":5,"y_advance":0,"w":5,"h":16,"bound_xmin":0.96875,"bound_ymin":-3.3671875},">":{"x_min":67,"x_max":76,"y_min":88,"y_max":97,"x_advance":9,"y_advance":0,"w":9,"h":9,"bound_xmin":0.875,"bound_ymin":1.765625},"j":{"x_min":99,"x_max":103,"y_min":164,"y_max":180,"x_advance":3,"y_advance":0,"w":4,"h":16,"bound_xmin":-0.734375,"bound_ymin":-3.3671875},"B":{"x_min":58,"x_max":67,"y_min":207,"y_max":219,"x_advance":10,"y_advance":0,"w":9,"h":12,"bound_xmin":1.171875,"bound_ymin":0},"Å":{"x_min":16,"x_max":28,"y_min":0,"y_max":14,"x_advance":10,"y_advance":0,"w":12,"h":14,"bound_xmin":-0.0234375,"bound_ymin":0},"W":{"x_min":0,"x_max":15,"y_min":28,"y_max":40,"x_advance":15,"y_advance":0,"w":15,"h":12,"bound_xmin":0.1953125,"bound_ymin":0},"\\u0007":{"x_min":84,"x_max":92,"y_min":0,"y_max":10,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"¾":{"x_min":0,"x_max":14,"y_min":53,"y_max":66,"x_advance":13,"y_advance":0,"w":14,"h":13,"bound_xmin":0.2578125,"bound_ymin":-0.4453125},"\\u0013":{"x_min":84,"x_max":92,"y_min":70,"y_max":80,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"¼":{"x_min":0,"x_max":14,"y_min":66,"y_max":79,"x_advance":13,"y_advance":0,"w":14,"h":13,"bound_xmin":0.8359375,"bound_ymin":-0.4453125},"K":{"x_min":28,"x_max":38,"y_min":209,"y_max":221,"x_advance":10,"y_advance":0,"w":10,"h":12,"bound_xmin":1.171875,"bound_ymin":0},"!":{"x_min":104,"x_max":107,"y_min":53,"y_max":65,"x_advance":4,"y_advance":0,"w":3,"h":12,"bound_xmin":1.375,"bound_ymin":0},"v":{"x_min":84,"x_max":92,"y_min":138,"y_max":147,"x_advance":8,"y_advance":0,"w":8,"h":9,"bound_xmin":0.203125,"bound_ymin":0},"":{"x_min":16,"x_max":27,"y_min":204,"y_max":220,"x_advance":11,"y_advance":0,"w":11,"h":16,"bound_xmin":0.796875,"bound_ymin":-3.2890625},"c":{"x_min":76,"x_max":84,"y_min":94,"y_max":104,"x_advance":8,"y_advance":0,"w":8,"h":10,"bound_xmin":0.625,"bound_ymin":-0.1875},"¡":{"x_min":104,"x_max":107,"y_min":40,"y_max":53,"x_advance":5,"y_advance":0,"w":3,"h":13,"bound_xmin":1.8125,"bound_ymin":-3.15625},"":{"x_min":49,"x_max":58,"y_min":13,"y_max":26,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"Æ":{"x_min":0,"x_max":16,"y_min":16,"y_max":28,"x_advance":16,"y_advance":0,"w":16,"h":12,"bound_xmin":0.0078125,"bound_ymin":0},"Ô":{"x_min":0,"x_max":12,"y_min":102,"y_max":118,"x_advance":12,"y_advance":0,"w":12,"h":16,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"Ä":{"x_min":16,"x_max":28,"y_min":14,"y_max":28,"x_advance":10,"y_advance":0,"w":12,"h":14,"bound_xmin":-0.0234375,"bound_ymin":0},"é":{"x_min":49,"x_max":58,"y_min":78,"y_max":91,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"P":{"x_min":67,"x_max":76,"y_min":36,"y_max":48,"x_advance":10,"y_advance":0,"w":9,"h":12,"bound_xmin":1.234375,"bound_ymin":0},"_":{"x_min":28,"x_max":39,"y_min":63,"y_max":65,"x_advance":8,"y_advance":0,"w":11,"h":2,"bound_xmin":-0.2421875,"bound_ymin":-3.1796875},"Ñ":{"x_min":28,"x_max":38,"y_min":157,"y_max":171,"x_advance":11,"y_advance":0,"w":10,"h":14,"bound_xmin":1.21875,"bound_ymin":0},"î":{"x_min":92,"x_max":98,"y_min":137,"y_max":149,"x_advance":4,"y_advance":0,"w":6,"h":12,"bound_xmin":-0.1328125,"bound_ymin":0},"":{"x_min":28,"x_max":38,"y_min":128,"y_max":143,"x_advance":11,"y_advance":0,"w":10,"h":15,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"í":{"x_min":104,"x_max":108,"y_min":0,"y_max":12,"x_advance":4,"y_advance":0,"w":4,"h":12,"bound_xmin":1.4765625,"bound_ymin":0},"t":{"x_min":99,"x_max":104,"y_min":56,"y_max":69,"x_advance":4,"y_advance":0,"w":5,"h":13,"bound_xmin":0.28125,"bound_ymin":-0.109375},"Ù":{"x_min":28,"x_max":38,"y_min":97,"y_max":113,"x_advance":11,"y_advance":0,"w":10,"h":16,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"S":{"x_min":28,"x_max":38,"y_min":184,"y_max":197,"x_advance":10,"y_advance":0,"w":10,"h":13,"bound_xmin":0.71875,"bound_ymin":-0.1953125},"`":{"x_min":104,"x_max":108,"y_min":22,"y_max":25,"x_advance":5,"y_advance":0,"w":4,"h":3,"bound_xmin":0.6953125,"bound_ymin":9.328125},"$":{"x_min":39,"x_max":48,"y_min":99,"y_max":114,"x_advance":8,"y_advance":0,"w":9,"h":15,"bound_xmin":0.5703125,"bound_ymin":-1.6484375},"\'":{"x_min":104,"x_max":107,"y_min":103,"y_max":108,"x_advance":3,"y_advance":0,"w":3,"h":5,"bound_xmin":0.703125,"bound_ymin":7.3984375},"\\u0012":{"x_min":76,"x_max":84,"y_min":64,"y_max":74,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"\\u001d":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":0,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"\\u0014":{"x_min":84,"x_max":92,"y_min":100,"y_max":110,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"Ö":{"x_min":0,"x_max":12,"y_min":150,"y_max":165,"x_advance":12,"y_advance":0,"w":12,"h":15,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"×":{"x_min":84,"x_max":92,"y_min":147,"y_max":155,"x_advance":9,"y_advance":0,"w":8,"h":8,"bound_xmin":1.2578125,"bound_ymin":2.25},"x":{"x_min":84,"x_max":92,"y_min":129,"y_max":138,"x_advance":8,"y_advance":0,"w":8,"h":9,"bound_xmin":0.1171875,"bound_ymin":0},"#":{"x_min":49,"x_max":58,"y_min":39,"y_max":52,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.1640625,"bound_ymin":-0.1953125},"*":{"x_min":92,"x_max":98,"y_min":189,"y_max":195,"x_advance":6,"y_advance":0,"w":6,"h":6,"bound_xmin":0.5,"bound_ymin":6.7734375},"\\u0005":{"x_min":84,"x_max":92,"y_min":60,"y_max":70,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"":{"x_min":99,"x_max":103,"y_min":211,"y_max":223,"x_advance":4,"y_advance":0,"w":4,"h":12,"bound_xmin":1.4765625,"bound_ymin":0},"O":{"x_min":16,"x_max":28,"y_min":108,"y_max":121,"x_advance":12,"y_advance":0,"w":12,"h":13,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"":{"x_min":16,"x_max":28,"y_min":42,"y_max":56,"x_advance":10,"y_advance":0,"w":12,"h":14,"bound_xmin":-0.0234375,"bound_ymin":0},"Þ":{"x_min":58,"x_max":67,"y_min":219,"y_max":231,"x_advance":10,"y_advance":0,"w":9,"h":12,"bound_xmin":1.234375,"bound_ymin":0},"r":{"x_min":99,"x_max":104,"y_min":117,"y_max":126,"x_advance":5,"y_advance":0,"w":5,"h":9,"bound_xmin":1.0390625,"bound_ymin":0},";":{"x_min":104,"x_max":107,"y_min":77,"y_max":89,"x_advance":4,"y_advance":0,"w":3,"h":12,"bound_xmin":1.328125,"bound_ymin":-2.265625},"e":{"x_min":67,"x_max":76,"y_min":78,"y_max":88,"x_advance":8,"y_advance":0,"w":9,"h":10,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"®":{"x_min":16,"x_max":28,"y_min":56,"y_max":69,"x_advance":11,"y_advance":0,"w":12,"h":13,"bound_xmin":0.0234375,"bound_ymin":-0.140625},"d":{"x_min":76,"x_max":84,"y_min":39,"y_max":52,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.546875,"bound_ymin":-0.1875},"´":{"x_min":104,"x_max":108,"y_min":19,"y_max":22,"x_advance":5,"y_advance":0,"w":4,"h":3,"bound_xmin":1.734375,"bound_ymin":9.328125},"É":{"x_min":39,"x_max":48,"y_min":129,"y_max":144,"x_advance":10,"y_advance":0,"w":9,"h":15,"bound_xmin":1.265625,"bound_ymin":0},"ª":{"x_min":92,"x_max":98,"y_min":182,"y_max":189,"x_advance":5,"y_advance":0,"w":6,"h":7,"bound_xmin":0.3671875,"bound_ymin":5.828125},"F":{"x_min":58,"x_max":67,"y_min":243,"y_max":255,"x_advance":9,"y_advance":0,"w":9,"h":12,"bound_xmin":1.3125,"bound_ymin":0}," ":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":4,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"Ü":{"x_min":28,"x_max":38,"y_min":113,"y_max":128,"x_advance":11,"y_advance":0,"w":10,"h":15,"bound_xmin":1.2578125,"bound_ymin":-0.1953125},"è":{"x_min":49,"x_max":58,"y_min":52,"y_max":65,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"\\u001e":{"x_min":76,"x_max":84,"y_min":74,"y_max":84,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"á":{"x_min":49,"x_max":58,"y_min":117,"y_max":130,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"/":{"x_min":99,"x_max":104,"y_min":30,"y_max":43,"x_advance":4,"y_advance":0,"w":5,"h":13,"bound_xmin":0,"bound_ymin":-0.1953125},"T":{"x_min":28,"x_max":38,"y_min":233,"y_max":245,"x_advance":9,"y_advance":0,"w":10,"h":12,"bound_xmin":0.375,"bound_ymin":0},"":{"x_min":39,"x_max":48,"y_min":199,"y_max":212,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"":{"x_min":39,"x_max":48,"y_min":212,"y_max":225,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.53125,"bound_ymin":-0.1875},"":{"x_min":84,"x_max":91,"y_min":201,"y_max":214,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"µ":{"x_min":84,"x_max":91,"y_min":175,"y_max":188,"x_advance":9,"y_advance":0,"w":7,"h":13,"bound_xmin":1.25,"bound_ymin":-3.1796875},"Ç":{"x_min":16,"x_max":27,"y_min":188,"y_max":204,"x_advance":11,"y_advance":0,"w":11,"h":16,"bound_xmin":0.796875,"bound_ymin":-3.2890625},"J":{"x_min":92,"x_max":99,"y_min":0,"y_max":13,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":0.4609375,"bound_ymin":-0.1953125},"":{"x_min":0,"x_max":12,"y_min":210,"y_max":225,"x_advance":12,"y_advance":0,"w":12,"h":15,"bound_xmin":0.7734375,"bound_ymin":-0.1953125},"&":{"x_min":16,"x_max":27,"y_min":235,"y_max":248,"x_advance":10,"y_advance":0,"w":11,"h":13,"bound_xmin":0.6875,"bound_ymin":-0.265625},"":{"x_min":58,"x_max":67,"y_min":26,"y_max":39,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.578125,"bound_ymin":-0.1875},"m":{"x_min":16,"x_max":28,"y_min":179,"y_max":188,"x_advance":13,"y_advance":0,"w":12,"h":9,"bound_xmin":1.0546875,"bound_ymin":0},"ê":{"x_min":49,"x_max":58,"y_min":91,"y_max":104,"x_advance":8,"y_advance":0,"w":9,"h":13,"bound_xmin":0.5859375,"bound_ymin":-0.1875},"\\u001f":{"x_min":76,"x_max":84,"y_min":224,"y_max":234,"x_advance":12,"y_advance":0,"w":8,"h":10,"bound_xmin":2,"bound_ymin":0},"º":{"x_min":92,"x_max":98,"y_min":161,"y_max":168,"x_advance":5,"y_advance":0,"w":6,"h":7,"bound_xmin":0.3515625,"bound_ymin":5.78125},"Ë":{"x_min":39,"x_max":48,"y_min":159,"y_max":173,"x_advance":10,"y_advance":0,"w":9,"h":14,"bound_xmin":1.265625,"bound_ymin":0},"ç":{"x_min":76,"x_max":84,"y_min":13,"y_max":26,"x_advance":8,"y_advance":0,"w":8,"h":13,"bound_xmin":0.625,"bound_ymin":-3.1328125},"":{"x_min":92,"x_max":99,"y_min":75,"y_max":87,"x_advance":8,"y_advance":0,"w":7,"h":12,"bound_xmin":1.0546875,"bound_ymin":0},"«":{"x_min":92,"x_max":99,"y_min":106,"y_max":114,"x_advance":8,"y_advance":0,"w":7,"h":8,"bound_xmin":1.046875,"bound_ymin":0.5625},"\\r":{"x_min":104,"x_max":104,"y_min":169,"y_max":169,"x_advance":4,"y_advance":0,"w":0,"h":0,"bound_xmin":0,"bound_ymin":0},"ß":{"x_min":49,"x_max":58,"y_min":195,"y_max":208,"x_advance":9,"y_advance":0,"w":9,"h":13,"bound_xmin":1.1953125,"bound_ymin":-0.1953125},"ù":{"x_min":84,"x_max":91,"y_min":162,"y_max":175,"x_advance":8,"y_advance":0,"w":7,"h":13,"bound_xmin":1.0234375,"bound_ymin":-0.1875},"u":{"x_min":92,"x_max":99,"y_min":87,"y_max":97,"x_advance":8,"y_advance":0,"w":7,"h":10,"bound_xmin":1.0234375,"bound_ymin":-0.1875}}');var We=function(e,t){var n=Be(),a=JSON.stringify(Ze);this.webclient=new e.WebClient(t,n,{kernel:Ve,letters:Ye,letters_metadata:a})},Je={};function Ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Je.log=function(e,n){try{var a="";n&&(a=JSON.stringify(n)),t().ajax({url:"//alasky.unistra.fr/cgi/AladinLiteLogger/log.py",data:{action:e,params:a,pageUrl:window.location.href,referer:document.referrer?document.referrer:""},method:"GET",dataType:"json"})}catch(o){window.console&&console.log("Exception: "+o)}};var Qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t}var t,n,a;return t=e,n=[{key:"dispatchedTo",value:function(e,t){t?e.dispatchEvent(new CustomEvent(this.name,{detail:t})):e.dispatchEvent(new CustomEvent(this.name))}},{key:"listenedBy",value:function(e,t){e.addEventListener(this.name,t)}},{key:"remove",value:function(e,t){e.removeEventListener(this.name,t)}}],n&&Ke(t.prototype,n),a&&Ke(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();Xe(Qe,"AL_USE_WASM",new Qe("AL:Wasm")),Xe(Qe,"LOADING_STATE",new Qe("AL:Layer.loading")),Xe(Qe,"BACKGROUND_COLOR_CHANGED",new Qe("AL:BackgroundColor.changed")),Xe(Qe,"COO_GRID_ENABLED",new Qe("AL:cooGrid.enabled")),Xe(Qe,"COO_GRID_DISABLED",new Qe("AL:cooGrid.disabled")),Xe(Qe,"COO_GRID_UPDATED",new Qe("AL:cooGrid.updated")),Xe(Qe,"PROJECTION_CHANGED",new Qe("AL:projection.changed")),Xe(Qe,"HIPS_LAYER_ADDED",new Qe("AL:HiPSLayer.added")),Xe(Qe,"HIPS_LAYER_REMOVED",new Qe("AL:HiPSLayer.removed")),Xe(Qe,"HIPS_LAYER_RENAMED",new Qe("AL:HiPSLayer.renamed")),Xe(Qe,"HIPS_LAYER_SWAP",new Qe("AL:HiPSLayer.swap")),Xe(Qe,"HIPS_LAYER_CHANGED",new Qe("AL:HiPSLayer.changed")),Xe(Qe,"GRAPHIC_OVERLAY_LAYER_ADDED",new Qe("AL:GraphicOverlayLayer.added")),Xe(Qe,"GRAPHIC_OVERLAY_LAYER_REMOVED",new Qe("AL:GraphicOverlayLayer.removed")),Xe(Qe,"GRAPHIC_OVERLAY_LAYER_CHANGED",new Qe("AL:GraphicOverlayLayer.changed"));var $e=function(){function e(e){this.opacity=e&&e.opacity||1,this.colormap=e&&e.colormap||"native",this.colormap=t(this.colormap),this.stretch=e&&e.stretch||"linear",this.stretch=this.stretch.toLowerCase(),this.reversed=!1,e&&!0===e.reversed&&(this.reversed=!0),this.minCut=e&&e.minCut||0,this.maxCut=e&&e.maxCut||1,this.additiveBlending=e&&e.additive,void 0===this.additiveBlending&&(this.additiveBlending=!1),this.kGamma=e&&e.gamma||1,this.kSaturation=e&&e.saturation||0,this.kBrightness=e&&e.brightness||0,this.kContrast=e&&e.contrast||0}e.prototype.get=function(){var e={srcColorFactor:"SrcAlpha",dstColorFactor:"OneMinusSrcAlpha",func:"FuncAdd"};return this.additiveBlending&&(e={srcColorFactor:"SrcAlpha",dstColorFactor:"One",func:"FuncAdd"}),{blendCfg:e,opacity:this.opacity,color:{kGamma:this.kGamma,kSaturation:this.kSaturation,kBrightness:this.kBrightness,kContrast:this.kContrast,stretch:this.stretch,minCut:this.minCut,maxCut:this.maxCut,reversed:this.reversed,cmapName:this.colormap}}},e.prototype.setBrightness=function(e){e=+e||0,this.kBrightness=Math.max(-1,Math.min(e,1))},e.prototype.getBrightness=function(){return this.kBrightness},e.prototype.setContrast=function(e){e=+e||0,this.kContrast=Math.max(-1,Math.min(e,1))},e.prototype.getContrast=function(){return this.kContrast},e.prototype.setSaturation=function(e){e=+e||0,this.kSaturation=Math.max(-1,Math.min(e,1))},e.prototype.getSaturation=function(){return this.kSaturation},e.prototype.setGamma=function(e){e=+e,this.kGamma=Math.max(.1,Math.min(e,10))},e.prototype.getGamma=function(){return this.kGamma},e.prototype.setOpacity=function(e){e=+e,this.opacity=Math.max(0,Math.min(e,1))},e.prototype.setAlpha=e.prototype.setOpacity,e.prototype.getOpacity=function(){return this.opacity},e.prototype.getAlpha=e.prototype.getOpacity,e.prototype.setBlendingConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.additiveBlending=e},e.prototype.getBlendingConfig=function(){return this.additiveBlending};var t=function(t){return t=t.toLowerCase(),e.COLORMAPS.includes(t)||(console.warn("The colormap '"+t+"' is not supported. You should use one of the following: "+e.COLORMAPS+"\n'grayscale' has been chosen by default."),t="grayscale"),t};return e.prototype.setColormap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"native",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t(e),o=n&&n.stretch||this.stretch||"linear";o=o.toLowerCase();var i=!1;n&&!0===n.reversed&&(i=!0),this.colormap=a,this.stretch=o,this.reversed=i},e.prototype.getColormap=function(){return this.colormap},e.prototype.setCuts=function(e,t){this.minCut=e,this.maxCut=t},e.COLORMAPS=[],e}();function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function at(){at=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),r=new C(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var r=n.delegate;if(r){var s=g(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function d(){}function f(){}function p(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,o)&&(h=v);var _=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,r,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==et(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):t.resolve(d).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){a(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(_,"constructor",p),s(p,"constructor",f),f.displayName=s(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,r,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var r=new x(l(t,n,a,o),i);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(_),s(_,r,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var o=a.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ot(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,o)}var it=function(){function e(t,i,r,l,c){var d=this;this.aladin=t,this.options=t.options,this.aladinDiv=this.aladin.aladinDiv,this.popup=new n(this.aladinDiv,this),this.createCanvases(),this.loadingState=!1;var f,p=this;try{var h=new We(Qn.wasmLibs.core,this.aladinDiv.id);this.aladin.wasm=h.webclient,this.wasm=this.aladin.wasm,Qe.AL_USE_WASM.listenedBy(document.body,(function(e){(0,e.detail.callback)(p.wasm)})),$e.COLORMAPS=this.wasm.getAvailableColormapList()}catch(g){console.error(g),alert("Problem initializing Aladin Lite. Please contact the support by contacting Matthieu Baumann (baumannmatthieu0@gmail.com) or Thomas Boch (thomas.boch@astro.unistra.fr). You can also open an issue on the Aladin Lite github repository here: https://github.com/cds-astro/aladin-lite. Message error:"+g)}this.aladinDiv.ondrop=function(e){u.getDroppedFilesHandler(e).forEach((function(e){var n=URL.createObjectURL(e);try{var a=p.aladin.createImageFITS(n,e.name,void 0,(function(e,n,a,o){t.gotoRaDec(e,n),t.setFoV(1.1*a)}),void 0);p.setOverlayImageLayer(a,e.name)}catch(g){var o=A.MOCFromURL(n);throw p.aladin.addMOC(o),console.error("Only valid fits files supported (i.e. containig a WCS)",g),g}}))},this.aladinDiv.ondragover=u.dragOverHandler,this.location=i,this.fovDiv=r,this.mustClearCatalog=!0,this.mode=e.PAN,this.minFOV=this.maxFOV=null,this.healpixGrid=new a,this.then=Date.now(),f=0,this.projection=o.SIN,this.zoomFactor=this.wasm.getClipZoomFactor(),this.viewCenter={lon:f,lat:0},this.cooFrame=l||y.GAL,this.changeFrame(this.cooFrame);this.fovLimit=void 0;var m=c||180;this.pinchZoomParameters={isPinching:!1,initialFov:void 0,initialDistance:void 0,initialAccDelta:Math.pow(5e5/m,1/40)},this.setZoom(m),this.imageLayers=new Map,this.overlayLayers=[],this.catalogs=[];var v=document.createElement("canvas");v.width=v.height=24;var _=v.getContext("2d");_.lineWidth=6,_.beginPath(),_.strokeStyle="#eee",_.arc(12,12,8,0,2*Math.PI,!0),_.stroke(),_.lineWidth=3,_.beginPath(),_.strokeStyle="#c38",_.arc(12,12,8,0,2*Math.PI,!0),_.stroke(),this.catalogForPopup=A.catalog({shape:v,sourceSize:24}),this.catalogForPopup.hide(),this.catalogForPopup.setView(this),this.overlayForPopup=A.graphicOverlay({color:"#ee2345",lineWidth:3}),this.overlayForPopup.hide(),this.overlayForPopup.setView(this),this.overlays=[],this.mocs=[],this.allOverlayLayers=[],this.empty=!0,this.promises=[],this.firstHiPS=!0,this.curNorder=1,this.realNorder=1,this.imageLayersBeingQueried=new Map,this.dragging=!1,this.dragx=null,this.dragy=null,this.rightclickx=null,this.rightclicky=null,this.selectedLayer="base",this.needRedraw=!0,this.fingersRotationParameters={initialViewAngleFromCenter:void 0,initialFingerAngle:void 0,rotationInitiated:!1},this.fadingLatestUpdate=null,this.dateRequestRedraw=null,s(this),this.resizeTimer=null;var x=new ResizeObserver((function(){p.fixLayoutDimensions(),p.requestRedraw()}));this.throttledPositionChanged=u.throttle((function(){var e=d.aladin.callbacksByEventName.positionChanged;if("function"==typeof e){var t=d.aladin.pix2world(d.width/2,d.height/2);void 0!==t&&e({ra:t[0],dec:t[1],dragging:!0})}}),e.CALLBACKS_THROTTLE_TIME_MS),this.throttledZoomChanged=u.throttle((function(){var e=d.fov;if(e!==d.oldFov){var t=d.aladin.callbacksByEventName.zoomChanged;"function"==typeof t&&t(e),d.oldFov=e}}),e.CALLBACKS_THROTTLE_TIME_MS),x.observe(this.aladinDiv),p.fixLayoutDimensions(),p.requestRedraw()}e.PAN=0,e.SELECT=1,e.TOOL_SIMBAD_POINTER=2,e.DRAW_SOURCES_WHILE_DRAGGING=!0,e.DRAW_MOCS_WHILE_DRAGGING=!0,e.CALLBACKS_THROTTLE_TIME_MS=100,e.prototype.createCanvases=function(){var e=t()(this.aladinDiv);e.find(".aladin-imageCanvas").remove(),e.find(".aladin-catalogCanvas").remove(),this.imageCanvas=t()("<canvas class='aladin-imageCanvas'></canvas>").appendTo(this.aladinDiv)[0],this.catalogCanvas=t()("<canvas class='aladin-catalogCanvas'></canvas>").appendTo(this.aladinDiv)[0]},e.prototype.fixLayoutDimensions=function(){u.cssScale=void 0;var e=t()(this.aladinDiv).width(),n=t()(this.aladinDiv).height();this.width=Math.max(e,1),this.height=Math.max(n,1),this.cx=this.width/2,this.cy=this.height/2,this.largestDim=Math.max(this.width,this.height),this.smallestDim=Math.min(this.width,this.height),this.ratio=this.largestDim/this.smallestDim,this.mouseMoveIncrement=160/this.largestDim,this.imageCtx=this.imageCanvas.getContext("webgl2"),this.wasm.resize(this.width,this.height),this.catalogCtx=this.catalogCanvas.getContext("2d"),this.catalogCtx.canvas.width=this.width,this.catalogCtx.canvas.height=this.height,i(this.imageCtx,this.aladin.options.pixelateCanvas),this.logoDiv||(this.logoDiv=t()(this.aladinDiv).find(".aladin-logo")[0]),this.width>800?(t()(this.logoDiv).removeClass("aladin-logo-small"),t()(this.logoDiv).addClass("aladin-logo-large"),t()(this.logoDiv).css("width","90px")):(t()(this.logoDiv).addClass("aladin-logo-small"),t()(this.logoDiv).removeClass("aladin-logo-large"),t()(this.logoDiv).css("width","32px")),this.computeNorder(),this.redraw()};var i=function(e,t){var n=!t;e.imageSmoothingEnabled=n,e.webkitImageSmoothingEnabled=n,e.mozImageSmoothingEnabled=n,e.msImageSmoothingEnabled=n,e.oImageSmoothingEnabled=n};e.prototype.setMode=function(n){this.mode=n,this.mode==e.SELECT?this.setCursor("crosshair"):this.mode==e.TOOL_SIMBAD_POINTER?(this.popup.hide(),this.catalogCanvas.style.cursor="",t()(this.catalogCanvas).addClass("aladin-sp-cursor")):this.setCursor("default")},e.prototype.setCursor=function(t){this.catalogCanvas.style.cursor!=t&&this.mode!=e.TOOL_SIMBAD_POINTER&&(this.catalogCanvas.style.cursor=t)},e.prototype.getCanvasDataURL=function(){var e,t=(e=at().mark((function e(t,n,a){var o,i=this;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("could not load image"))}}))},e.abrupt("return",o("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABTCAMAAAB+g8/LAAACx1BMVEVMaXGBYYSWk5i7ur1fGUW0Fzbi4OP////Qz9K2s7f////qyseffX7TxczMytBXU1ndrahOWXi0o7RaH0v///+1GjfYkY29srb///+1GTe0Fzajn6RgFkFdHkni3+GLV3PU0dXMubr6+vpmIktUJVKiGDqGcX7p5ujLwMJgFkFgFkFNOWnp1tZaHUi0FzaEZohkX2VVKVXUwcvy8vI4U4tQMWBXIk+NGT9ZIEx+Wn5vF0EUYqF3c3lgFkL5+PkUYqH///////9lFkG0FzYUYqFeNF/BwMs2WpP6+vrBv8JSJ1TNy85TJlO0FzaJhYsUYqF5GEEUYqF2Zo60FzazFza0FzYUYqGWdIsrWpWTGj6jGDp3Kk58Y4S0FzZgFkFXIU2OiY+vmqVhGENlGEJqQ2z///9SKFJTJlP///9pF0GOjpd0Ol6rFzi9sbm0Fza0FzYUYqGXmLp3TXJmHkhLSXy/jJBVK1ivrLDu7e7l5OYLCw6AYYRpFkGCIUYVYqGAZoqJfofez9hZPGtcW4phFkIUYqGVbG1BToTFw8ZqZGr4+PmIGkAWYqD6+vpaHUoUYqGEZoh5ZH2ceYAbGyCmFzmgGjsUYqGAYIOuiJJ3SW1PZJlNM0OliJ+MQF5uF0Gcmp8kXZpSKFWEZojDwcXq1tQzVY9pN2CyFzbZlZFHbKOZgpWjnaRlMlsUYqGHGD9FRElaHUiZfpfW1dddW2HMtsJ3k8NTJlPDT1WlMElcGkY6UYjMa2tDSH3IpKOEZoiFTWqni54DAwQsLDGsqa3Pu8cUFBnEtr8gHyU4Nz3cwsMKDA/GV1tGRUtCKjDczM7NfXzMvcza1Nv///+9PUmhfZRxY2y2KT/15eLo4ud5fKXCXmTnu7ekZ3pgFkFTJlOEZoiUGT5aHkp8GEBzF0G0FzadGDtKQnNeJ1JqJk5fGEReGkaDGT8UYqGlSw8iAAAAwXRSTlMA87vu8R/SwN6iQP7+/vf9/J75s4DT/v0gokr33vzj++7+9/Hz8/3u1tFw9P4f5nP9cvl0/vb+/vL79HH9++WPMFA7s1r++vRhscXEiWT9PvLQ+Ffzih/9/vb+9z3Enn7N/cWI/RDWPND+9/38gTx6uPj5/fn+/efauu7k8fnl0+ro/f33wvj7meDU2PeaZquWH9jJ1O0QrPfC0vXo+uHj+J7ETZvkpfzI+6e44qCorUr22cpX3xDd9VdUvtb6V9z+sGF5dwAACP1JREFUeF7s011r01AcBvATON8gFCgkV+2AFrKSm5MGCEKlDIqCgEgpXYUaOkanQLrtpupgCxTY8A3EDWToYBNlgFeiIOIX+f/z0pe96IcwSZtRxY0ByXaT3204nIfnPCHXLJFIJBKJgoe8LLyp/+fbPXJ16mvW3k7XsjiOs3xGd+1FoVAn12Hh1g7HqcYqMsdxGAZ0K8B15avOUkGPQymFvm0Plb6InrKOuqEbqoHVd1vPSfxk+fvT/VZRpBQ0aoLPtRW7VptRKD0VGTKcmNva/0biJPmVjDZUtXN8egKBXIM3IeC64NEohHlGvV6WxOcTj4hHhmq015dHyASh0ciXSKjUhAka5in21AMSi0ev3v7UEfEEjM5Rtbd+mPssSeQfz8JEIgZoR7VIHB6ubFvj4WqQ4xvnTqIkgE+j6KPQiSHOe54vlx0Krj38BYJ08bp27UUAcZyHQibiOJIsV9DXV4a1mrKYk8jFSndn+qCJwXuJZmYt2mKy6HvyemlJ8Zd7iSO3Bx8ANKCITDONQpTVtNCzam2vfHVBOK+OvLek/FRpmy4ABWBIob0X5TsF1Th6FY/NHC9NN5BOzadvzg5m06ldmGiSiQYAOCYwBpmNHyQaX+QW+ljbPDjkH5CJheCnnx+MDZU7j+FMcyqOSDU0Ye5jNL1UshhwaNvwo4SK4mYqNQjZGvzl/lkck1GKsPz7xiUu+0Nq2b+2VYVx/NDZJTYmnV2TpuvMsiJNhbSUZmMwSpssENJl7XSmrrDNpkpn3dqO4eraoqXFMmddBWcVncImDpgOMKiiImJu3t+Wl9a54UiccOxA8keY+5xzc25ugiTx+9s5fHL55D7nPM9dk5FY6NpO1wVgJ8g0pVIpv793mWLP31JEeiMKiCa5yeu8CRIeP8STySzLIMv5VSrl+e1YLne0Ap3BMMcnNE/XdV5Ybyer+lcOZyGeIsyKn+AxSDR8qcVwq9X6Lj+sDuwlm8FMJsiJ4o2fSX9fyeeXuY2D6MrpvDz1KEtylmIG/uh2Y6ZDlOomGxBaxx86CzovybniRG12VEEMUaCXLGV03svSPPaMXsBG8jKCDssHc3aE1BgLOj9OCzoshoYKdExxYL3zpTpuODZbo6+f7hKw0A5e5sBDqQ63MGcfwkxnHZXqeL+pQEd7kbpLdY5kwebt0f1HeGwbwYy8zsGMC7Ain9UfmE5va32pDqfXVuCjCwB73Vys0wUy+0f3fV6EeWLqkRn0U13QR9MTEOql4HXI5nZE304Ilo2E6KmkWnYCh9eKdMhI2LpxwU2xaYp10lZsdWKsbj138klVD/X55Q+Mnc/mOyC0bKLjvf3c4sBJB7mX8ekKdCb0rFpMh7ThrcPCNJhRK9kVrG/txkKGkMvHQe48wOpdu1dop6Q6j6N8Glxs8R9pgNAyXDSLdIJZyE4B+zkWS4QE7Fw33oyRYKxGyEWLYVTXmz/5jn+kGY0FRQYT8kp0tJPNfDb6AI6bpDrURtt/U6PRzArYTX5IaXZo+NzDGI+g99NE5/ivu5ebIbKxv1rEBhXpmL6F0yYn1YrqpDpjFHsHsCaKJUR9JwI66Dp5cY2fHaL3SZ75p3qd1QV4yLSDlkEr0mE2XcYQYF9RbHyzSMeaR66SpnS6GcmFrvzIVq2OthMgn9YyTP6cSawj2LhPJGCnrYAlxTrOeoROXSKH52umc2FfVTqsCFE9QgagAw6RztNuavNG8i7s5DE9wSIiHesuNNONP/ZKdFS5RXm1Oqtwo8KDhbGun0DIRXUKNlNGKab8HXRo8x5xYkyP8m1LQWcAVauj1QEz/AVC5jOkDHbk7mAzi9hsklr1ibAk04GBOksb4by2y8bRn1elw2rFqWACwLwOda6/WqTjXpnCyR6GGQAL7FWfuspuFk7aomRK9L+40lKzzhwUIQBNfzAOvOpgRqxzaOVvjCMi7HJc6N91gs7DE+M+OrWW9mSequ3tsFo19svymWwjFdlT0OF3dRGFIpkog1kEnZag0hfmSO4YX9u6UrOOqYcrSWic6LB4H5TDHENwdooSMB6/AfepNh2olTTpEh1jOUyJS3QCCU/uygCqUQfmeGmGz0p0wvfLYjGpTih9/ti1F1CtOvCVU5qwR/KZd7etLDbbIcHaz+euIVS7jiPAlYsKziiLr688tsSwhU877tu+XDyK/ofOxIZMHH3KD4m0D6q2QVpINu4p8lHyiQCRUCh6lYb2tUkZRJdI+5v+fCs38BGCyGgQaofHqC7DtrD4tx07aGkbDAM4/hTmB5gFhqAILAFs0SHYpqaMwkwRhtBWtmp0FobFURqw1uJlaQdO6SVMB0zZmNCeelLmbd1p32CXIjj2BNNkZUnyIZa0tKlujAFtveR3ed/b++fhvbwv/JcvDVFDmaSQg7YzSrkhile6MjW3OQQt4Ekkxp/PhsPJmRgDvZQp3mdlXVE4Bdo8tP36pqI0z/MP8d1T6FIdVWeXxEDW9TICPRUXfFwFzRzliZ0T/UnV63XqyhqL5Y77EXR58D5dW/KryUXXIfTY6TzBss2cNTsHdVlOIVIcRSPi3vq1lmNXdrx2guF548NbgJ4PR02lsG7mjEDHKCJP0/wen5hITEK3Y5crvY1oxRRC0HMHMyparudA1T0x0SmxTbqzaTTtzhvCaRx6blLwYTtnCv5paHPkbNSKGcuVDCF4BH1QXg50cuzx/GlzZO3iG5nO1jBcNIxCEPpjoyFhE0WSCgd/88IzZ/26kT++tq6MEItAv2yI2u4YoqZpiKR+8x+9ulB+TIiSTHKsjL+aVybGHEH/lEXMhRElUULUFZ1f94DlzfT0gntjJ5kVTX5JRZ0lKyclI8NAX00TGiKqhN9cUmSF06Mpmq7L2wHRxq5UFOXzyetMKA79RgQQ0TycCEgqpnRdJ/NsXkaU8kvnH4fvnSe9Oe9qfnXZ2I/DAHwq5cY0QrT4Ec0d4feLor5y8X14a+vycnExFotlQgwMSkQo+cRWD2EuLTve3LIh7L86fAaDFr/rbRgzXsuOz+fzFnNFo3AQZODWMJmCYdsPReDWMXEm2NTd4nA4HA6H4zc5mbo+QO8AVQAAAABJRU5ErkJggg==").then((function(e){t=t||"image/png";var o=i.wasm.canvas(),r=document.createElement("canvas"),s=window.devicePixelRatio;r.width=n||i.width*s,r.height=a||i.height*s;var l=r.getContext("2d");l.drawImage(o,0,0,r.width,r.height),l.drawImage(i.catalogCanvas,0,0,r.width,r.height);var c=r.width-e.width,u=r.height-e.height;return l.drawImage(e,c,u),r.toDataURL(t)})));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){ot(i,a,o,r,s,"next",e)}function s(e){ot(i,a,o,r,s,"throw",e)}r(void 0)}))});return function(e,n,a){return t.apply(this,arguments)}}(),e.prototype.setActiveHiPSLayer=function(e){if(!this.imageLayers.has(e))throw e+" does not exists. So cannot be selected";this.selectedLayer=e};var r=function(n){var a=!1;"ontouchstart"in window&&(a=!0);a||t()(n.catalogCanvas).dblclick((function(e){var t=n.imageCanvas.relMouseCoords(e);n.deselectObjects();try{var a=n.wasm.screenToWorld(t.x,t.y),o=n.wasm.viewToICRSCooSys(a[0],a[1]);n.pointTo(o[0],o[1],{forceAnimation:!0})}catch(i){return}})),t()(n.catalogCanvas).bind("contextmenu",(function(e){e.preventDefault()}),!1);var o,i=null,r=null;t()(n.catalogCanvas).bind("mousedown touchstart",(function(t){t.preventDefault(),t.stopPropagation();var a=n.imageCanvas.relMouseCoords(t);if(3!==t.which&&2!==t.button){if("touchstart"===t.type&&t.originalEvent&&t.originalEvent.targetTouches&&2==t.originalEvent.targetTouches.length){n.dragging=!1,n.pinchZoomParameters.isPinching=!0;var o=n.wasm.getFieldOfView();return n.pinchZoomParameters.initialFov=o,n.pinchZoomParameters.initialDistance=Math.sqrt(Math.pow(t.originalEvent.targetTouches[0].clientX-t.originalEvent.targetTouches[1].clientX,2)+Math.pow(t.originalEvent.targetTouches[0].clientY-t.originalEvent.targetTouches[1].clientY,2)),n.fingersRotationParameters.initialViewAngleFromCenter=n.wasm.getRotationAroundCenter(),void(n.fingersRotationParameters.initialFingerAngle=180*Math.atan2(t.originalEvent.targetTouches[1].clientY-t.originalEvent.targetTouches[0].clientY,t.originalEvent.targetTouches[1].clientX-t.originalEvent.targetTouches[0].clientX)/Math.PI)}return n.dragx=a.x,n.dragy=a.y,n.dragging=!0,n.mode==e.PAN?n.setCursor("move"):n.mode==e.SELECT&&(n.selectStartCoo={x:n.dragx,y:n.dragy}),n.wasm.pressLeftMouseButton(n.dragx,n.dragy),!1}n.rightClick=!0,n.rightClickTimeStart=Date.now(),n.rightclickx=a.x,n.rightclicky=a.y;var s=n.imageLayers.get(n.selectedLayer);s&&("fits"===s.imgFormat?(i=s.properties.minCutout||s.getColorCfg().minCut||0,r=s.properties.maxCutout||s.getColorCfg().maxCut||1):(i=s.getColorCfg().minCut||0,r=s.getColorCfg().maxCut||1))})),t()(n.catalogCanvas).bind("mouseup",(function(e){if(n.rightClick)return Date.now()-n.rightClickTimeStart<300&&n.aladin.contextMenu&&n.aladin.contextMenu._showMenu(e),n.rightClick=!1,n.rightclickx=null,n.rightclicky=null,void(n.rightClickTimeStart=void 0)})),t()(n.catalogCanvas).bind("click mouseout touchend",(function(t){if("touchend"===t.type&&n.pinchZoomParameters.isPinching)return n.pinchZoomParameters.isPinching=!1,void(n.pinchZoomParameters.initialFov=n.pinchZoomParameters.initialDistance=void 0);if("touchend"===t.type&&n.fingersRotationParameters.rotationInitiated)return n.fingersRotationParameters.initialViewAngleFromCenter=void 0,n.fingersRotationParameters.initialFingerAngle=void 0,void(n.fingersRotationParameters.rotationInitiated=!1);var a=!0===n.realDragging,o=n.mode===e.SELECT&&n.dragging;if(n.dragging&&(n.setCursor("default"),n.dragging=!1,a&&(n.realDragging=!1)),o){n.deselectObjects();var i=n.getObjectsInBBox(n.selectStartCoo.x,n.selectStartCoo.y,n.dragx-n.selectStartCoo.x,n.dragy-n.selectStartCoo.y);if(i.forEach((function(e){e.forEach((function(e){return e.select()}))})),i.length>0){var r={},s=i.map((function(e){var t=e[0].getCatalog(),n=e.map((function(e){return e instanceof k?e.source:e})),a={name:t.name,color:t.color,rows:n,fields:t.fields,fieldsClickedActions:t.fieldsClickedActions};return t.isObsCore&&t.isObsCore()&&(r.save=!0),a}));n.aladin.measurementTable.showMeasurement(s,r)}return n.selectedObjects=i,n.aladin.fire("selectend",i),void n.requestRedraw()}n.mustClearCatalog=!0,n.dragx=n.dragy=null;var l=n.imageCanvas.relMouseCoords(t);if("mouseout"!==t.type&&"touchend"!==t.type||(n.updateLocation(l.x,l.y,!0),"mouseout"!==t.type))if(n.mode!=e.TOOL_SIMBAD_POINTER){var c=n.closestObjects(l.x,l.y,5);if(!a&&c){n.deselectObjects();var u=c[0];if(u.marker?(n.popup.setTitle(u.popupTitle),n.popup.setText(u.popupDesc),n.popup.setSource(u),n.popup.show()):n.lastClickedObject&&n.lastClickedObject.actionOtherObjectClicked&&n.lastClickedObject.actionOtherObjectClicked(),u.actionClicked&&u.actionClicked(),"function"==typeof(f=n.aladin.callbacksByEventName.objectClicked)&&f(u),u.isFootprint()){var d=n.aladin.callbacksByEventName.footprintClicked;if("function"==typeof d&&u!=n.lastClickedObject)d(u)}n.lastClickedObject=u}else{var f;if(!a)if(n.deselectObjects(),n.lastClickedObject)n.aladin.measurementTable.hide(),n.popup.hide(),n.lastClickedObject instanceof D||n.lastClickedObject instanceof L||n.lastClickedObject instanceof M?n.lastClickedObject.deselect():n.lastClickedObject.actionOtherObjectClicked(),"function"==typeof(f=n.aladin.callbacksByEventName.objectClicked)&&f(null),n.lastClickedObject=null}var p=n.aladin.callbacksByEventName.click;if("function"==typeof p){var h=n.aladin.pix2world(l.x,l.y);void 0!==h&&p({ra:h[0],dec:h[1],x:l.x,y:l.y,isDragging:a})}n.refreshProgressiveCats(),n.wasm.releaseLeftButtonMouse()}else I(n,t);else n.mode===e.TOOL_SIMBAD_POINTER&&n.setMode(e.PAN)}));var s=null;t()(n.catalogCanvas).bind("mousemove touchmove",(function(t){t.preventDefault();var l=n.imageCanvas.relMouseCoords(t);if(n.rightClick){var c=n.aladin.callbacksByEventName.rightClickMove;if("function"==typeof c)return void c(l.x,l.y);if(n.selectedLayer){var u=n.imageLayers.get(n.selectedLayer),d={x:.5*n.catalogCanvas.clientWidth,y:.5*n.catalogCanvas.clientHeight},f=(l.x-d.x)/n.catalogCanvas.clientWidth,p=-(l.y-d.y)/n.catalogCanvas.clientHeight,h=(r-i)*f,m=h+(1-2*p)*i,v=h+(1+2*p)*r;m<=v&&u.setCuts(m,v)}}else if("touchmove"===t.type&&n.pinchZoomParameters.isPinching&&t.originalEvent&&t.originalEvent.touches&&2==t.originalEvent.touches.length){var _=180*Math.atan2(t.originalEvent.targetTouches[1].clientY-t.originalEvent.targetTouches[0].clientY,t.originalEvent.targetTouches[1].clientX-t.originalEvent.targetTouches[0].clientX)/Math.PI,y=n.fingersRotationParameters.initialFingerAngle-_;if(!n.fingersRotationParameters.rotationInitiated&&Math.abs(y)>=7&&(n.fingersRotationParameters.rotationInitiated=!0,n.fingersRotationParameters.initialFingerAngle=_,y=0),n.fingersRotationParameters.rotationInitiated){var x=n.fingersRotationParameters.initialViewAngleFromCenter;n.wasm.getLongitudeReversed()?x-=y:x+=y,n.wasm.setRotationAroundCenter(x)}var g=Math.sqrt(Math.pow(t.originalEvent.touches[0].clientX-t.originalEvent.touches[1].clientX,2)+Math.pow(t.originalEvent.touches[0].clientY-t.originalEvent.touches[1].clientY,2)),b=Math.min(Math.max(n.pinchZoomParameters.initialFov*n.pinchZoomParameters.initialDistance/g,2777777e-11),n.fovLimit);n.setZoom(b)}else{if(n.dragging||n.moving||n.updateObjectsLookup(),!n.dragging||a){n.updateLocation(l.x,l.y,!1);var w=n.aladin.callbacksByEventName.mouseMove;if("function"==typeof w){var C=n.aladin.pix2world(l.x,l.y);void 0!==C?w({ra:C[0],dec:C[1],x:l.x,y:l.y}):null!=s&&w({ra:null,dec:null,x:l.x,y:l.y}),s=C}if(!n.dragging&&!n.mode==e.SELECT){var A=n.closestObjects(l.x,l.y,5);if(A){var I=A[0],S=n.aladin.callbacksByEventName.objectHovered,k=n.aladin.callbacksByEventName.footprintHovered;if(n.setCursor("pointer"),"function"==typeof S&&I!=o)S(I);if(I.isFootprint()&&"function"==typeof k&&I!=o)k(I);o=I}else{n.setCursor("default");var T=n.aladin.callbacksByEventName.objectHoveredStop;if(o&&(o.isFootprint()&&n.requestRedraw(),"function"==typeof T))T(o);o=null}}if(!a)return}var O,L;if(n.dragging)if(O={x:n.dragx,y:n.dragy},L={x:l.x,y:l.y},n.dragx=l.x,n.dragy=l.y,n.mode!=e.SELECT){n.realDragging=!0,n.wasm.goFromTo(O.x,O.y,L.x,L.y);var D=tt(n.wasm.getCenter(),2),M=D[0],E=D[1];n.viewCenter.lon=M,n.viewCenter.lat=E,n.viewCenter.lon<0&&(n.viewCenter.lon+=360),n.throttledPositionChanged()}else n.requestRedraw()}})),t()(n.aladinDiv).onselectstart=function(){return!1};var l,c,d=0;t()(n.catalogCanvas).on("wheel",(function(e){if(e.preventDefault(),e.stopPropagation(),!n.rightClick){var t=e.deltaY;e.hasOwnProperty("originalEvent")&&(t=-e.originalEvent.deltaY);var a=c||void 0!==c;a||(0===d&&(l=(new Date).getTime()),d++,(new Date).getTime()-l>100&&(c=d>10,a=!0));var o=function(e){t>0?n.increaseZoom(e):n.decreaseZoom(e)};if(a&&(c?((new Date).getTime(),o(.002),(new Date).getTime()):o(.007)),!n.debounceProgCatOnZoom){var i=n;n.debounceProgCatOnZoom=u.debounce((function(){i.refreshProgressiveCats(),i.drawAllOverlays()}),300)}return n.debounceProgCatOnZoom(),n.throttledZoomChanged(),!1}}))},s=function(e){var n=new S;n.domElement.style.top="50px",t()("#aladin-statsDiv").length>0&&t()("#aladin-statsDiv")[0].appendChild(n.domElement),e.stats=n,r(e),e.displayHpxGrid=!1,e.displayCatalog=!1,e.displayReticle=!0};return e.prototype.updateLocation=function(e,t,n){if(n)this.location.update(this.viewCenter.lon,this.viewCenter.lat,this.cooFrame,!0);else{var a=this.wasm.screenToWorld(e,t);a&&(a[0]<0&&(a=[a[0]+360,a[1]]),this.location.update(a[0],a[1],this.cooFrame,!1))}},e.prototype.requestRedrawAtDate=function(e){this.dateRequestDraw=e},e.prototype.getViewParams=function(){var e=this.width>this.height?this.fov/this.width:this.fov/this.height;return{fov:[this.width*e,this.height*e],width:this.width,height:this.height}},e.FPS_INTERVAL=10,e.prototype.redraw=function(){E(this.redraw.bind(this));var t=Date.now(),n=t-this.then;if(n>=e.FPS_INTERVAL){this.then=t-n%e.FPS_INTERVAL;try{this.moving=this.wasm.update(n)}catch(a){console.warn(a)}(this.wasm.isRendering()||this.needRedraw)&&this.drawAllOverlays(),this.needRedraw=!1}},e.prototype.drawAllOverlays=function(){var t=this.catalogCtx,n=!1;if(this.mustClearCatalog&&(t.clearRect(0,0,this.width,this.height),n=!0,this.mustClearCatalog=!1),this.catalogs&&this.catalogs.length>0&&this.displayCatalog&&(!this.dragging||e.DRAW_SOURCES_WHILE_DRAGGING)){n||(t.clearRect(0,0,this.width,this.height),n=!0);for(var a=0;a<this.catalogs.length;a++){this.catalogs[a].draw(t,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor)}}this.catalogForPopup.isShowing&&this.catalogForPopup.sources.length>0&&(n||(t.clearRect(0,0,this.width,this.height),n=!0),this.catalogForPopup.draw(t,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor),this.overlayForPopup.isShowing&&this.overlayForPopup.draw(t,this.cooFrame,this.width,this.height,this.largestDim,this.zoomFactor));var i=this.catalogCtx;if(this.overlays&&this.overlays.length>0&&(!this.dragging||e.DRAW_SOURCES_WHILE_DRAGGING)){n||(t.clearRect(0,0,this.width,this.height),n=!0);for(a=0;a<this.overlays.length;a++)this.overlays[a].draw(i)}var r=t;if(this.displayHpxGrid){n||(t.clearRect(0,0,this.width,this.height),n=!0);var s=this.getVisibleCells(3),l=null;this.curNorder>=3&&(l=3==this.curNorder?s:this.getVisibleCells(this.curNorder)),l&&this.curNorder>3?this.healpixGrid.redraw(r,l,this.fov,this.curNorder):this.healpixGrid.redraw(r,s,this.fov,3)}var c=t;if(this.mode==e.SELECT){if(this.dragging){n||(c.clearRect(0,0,this.width,this.height),n=!0),c.fillStyle="rgba(100, 240, 110, 0.25)";var u=this.dragx-this.selectStartCoo.x,d=this.dragy-this.selectStartCoo.y;c.fillRect(this.selectStartCoo.x,this.selectStartCoo.y,u,d)}}else if(this.displayReticle){if(n||(t.clearRect(0,0,this.width,this.height),n=!0),!this.reticleCache){var f=document.createElement("canvas"),p=this.options.reticleSize;f.width=p,f.height=p;var h=f.getContext("2d");h.lineWidth=2,h.strokeStyle=this.options.reticleColor,h.beginPath(),h.moveTo(p/2,p/2+(p/2-1)),h.lineTo(p/2,p/2+2),h.moveTo(p/2,p/2-(p/2-1)),h.lineTo(p/2,p/2-2),h.moveTo(p/2+(p/2-1),p/2),h.lineTo(p/2+2,p/2),h.moveTo(p/2-(p/2-1),p/2),h.lineTo(p/2-2,p/2),h.stroke(),this.reticleCache=f}c.drawImage(this.reticleCache,this.width/2-this.reticleCache.width/2,this.height/2-this.reticleCache.height/2)}if(this.projection==o.SIN&&this.fov>=60&&!0===this.aladin.options.showAllskyRing){n||(c.clearRect(0,0,this.width,this.height),n=!0),c.strokeStyle=this.aladin.options.allskyRingColor;var m=this.aladin.options.allskyRingWidth;c.lineWidth=m,c.beginPath();var v=(this.cy-m/2+1)/this.zoomFactor;c.arc(this.cx,this.cy,v,0,2*Math.PI,!0),c.stroke()}},e.prototype.refreshProgressiveCats=function(){if(this.catalogs)for(var e=0;e<this.catalogs.length;e++)"progressivecat"==this.catalogs[e].type&&this.catalogs[e].loadNeededTiles()},e.prototype.getVisiblePixList=function(e){var t=[],n=this.wasm.screenToWorld(this.cx,this.cy),a=tt(this.wasm.viewToICRSCooSys(n[0],n[1]),2),o=a[0],i=a[1],r=.5*this.fov*this.ratio;return this.wasm.queryDisc(e,o,i,r).forEach((function(e){return t.push(Number(e))})),t},e.prototype.deselectObjects=function(){this.selectedObjects&&(this.selectedObjects.forEach((function(e){e.forEach((function(e){return e.deselect()}))})),this.aladin.measurementTable.hide(),this.selectedObjects=null)},e.prototype.getVisibleCells=function(e){return this.wasm.getVisibleCells(e)},e.prototype.setZoom=function(e){this.wasm.setFieldOfView(e),this.updateZoomState()},e.prototype.increaseZoom=function(e){var t=this.pinchZoomParameters.initialAccDelta+e,n=5e5/Math.pow(t,40);n<2777777e-11&&(n=2777777e-11),this.pinchZoomParameters.initialAccDelta=t,this.setZoom(n)},e.prototype.decreaseZoom=function(e){var t=this.pinchZoomParameters.initialAccDelta-e;t<=0&&(t=.001);var n=5e5/Math.pow(t,40);n>=this.fovLimit&&(n=this.fovLimit),this.pinchZoomParameters.initialAccDelta=t,this.setZoom(n)},e.prototype.setRotation=function(e){this.wasm.setRotationAroundCenter(e)},e.prototype.setGridConfig=function(e){this.wasm.setGridConfig(e),e&&(e.hasOwnProperty("enabled")&&(!0===e.enabled?Qe.COO_GRID_ENABLED.dispatchedTo(this.aladinDiv):Qe.COO_GRID_DISABLED.dispatchedTo(this.aladinDiv)),e.color&&Qe.COO_GRID_UPDATED.dispatchedTo(this.aladinDiv,{color:e.color,opacity:e.opacity})),this.requestRedraw()},e.prototype.updateZoomState=function(){this.zoomFactor=this.wasm.getClipZoomFactor();var e,t=this.wasm.getFieldOfView();(this.pinchZoomParameters.initialAccDelta=Math.pow(5e5/t,1/40),this.fov=t,this.computeNorder(),isNaN(this.fov))?this.fovDiv.html("FoV:"):(this.projection.fov<=t&&(t=this.projection.fov),e=t>1?Math.round(100*t)/100+"°":60*t>1?Math.round(60*t*100)/100+"'":Math.round(3600*t*100)/100+'"',this.fovDiv.html("FoV: "+e))},e.prototype.computeNorder=function(){var e=this.wasm.getNOrder();this.realNorder=e,this.fov<=50&&e<=2&&(e=3),this.curNorder=e},e.prototype.untaintCanvases=function(){this.createCanvases(),r(this),this.fixLayoutDimensions()},e.prototype.setOverlayImageLayer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overlay";return this.imageLayersBeingQueried.set(t,e),this.addImageLayer(e,t),e},e.prototype.addLayer=function(e){var t=e.layer;-1==this.overlayLayers.findIndex((function(e){return e==t}))&&this.overlayLayers.push(t),this.options.log&&Je.log("setImageLayer",e.url);var n=this.overlayLayers[this.overlayLayers.length-1];this.selectedLayer=n;var a=this.imageLayers.get(t);a&&(a.added=!1),this.imageLayers.set(t,e),Qe.HIPS_LAYER_ADDED.dispatchedTo(this.aladinDiv,{layer:e})},e.prototype.addImageLayer=function(e,t){var n=this,a=this,o=e.query;this.promises.push(o),Promise.allSettled(this.promises).then((function(){return o})).then((function(e){var o=e.add(t);return a.loadingState=!0,Qe.LOADING_STATE.dispatchedTo(n.aladinDiv,{loading:!0}),o})).then((function(e){n.empty=!1,e.children?e.children.forEach((function(e){n.addLayer(e)})):n.addLayer(e)})).catch((function(e){throw e})).finally((function(){a.loadingState=!1,Qe.LOADING_STATE.dispatchedTo(n.aladinDiv,{loading:!1}),a.imageLayersBeingQueried.delete(t);var e=n.promises.findIndex((function(e){return e==o}));if(n.promises.splice(e,1),0===n.promises.length)if(a.empty){var i=Math.round(Math.random()),r=Qn.DEFAULT_OPTIONS.surveyUrl[i];a.aladin.setBaseImageLayer(r)}else a.renameLayer(n.overlayLayers[0],"base")}))},e.prototype.renameLayer=function(e,t){if(e!==t){this.wasm.renameLayer(e,t);var n=this.imageLayers.get(e);n.layer=t;var a=this.overlayLayers.findIndex((function(t){return t==e}));this.overlayLayers[a]=t,this.imageLayers.delete(e),this.imageLayers.set(t,n),this.selectedLayer===e&&(this.selectedLayer=t),Qe.HIPS_LAYER_RENAMED.dispatchedTo(this.aladinDiv,{layer:e,newLayer:t})}},e.prototype.swapLayers=function(e,t){this.wasm.swapLayers(e,t);var n=this.overlayLayers.findIndex((function(t){return t==e})),a=this.overlayLayers.findIndex((function(e){return e==t})),o=this.overlayLayers[n];this.overlayLayers[n]=this.overlayLayers[a],this.overlayLayers[a]=o,Qe.HIPS_LAYER_SWAP.dispatchedTo(this.aladinDiv,{firstLayer:e,secondLayer:t})},e.prototype.removeImageLayer=function(e){var t=this.imageLayers.get(e);if(void 0!==t){t.added&&this.wasm.removeLayer(e),t.added=!1;var n=this.overlayLayers.findIndex((function(t){return t==e}));if(-1!=n){if(this.imageLayers.delete(e),this.overlayLayers.splice(n,1),0===this.overlayLayers.length)this.empty=!0,this.selectedLayer="base";else if(this.selectedLayer===e){var a=this.overlayLayers[this.overlayLayers.length-1];this.selectedLayer=a}if(Qe.HIPS_LAYER_REMOVED.dispatchedTo(this.aladinDiv,{layer:e}),0===this.promises.length&&this.empty){var o=Math.round(Math.random()),i=Qn.DEFAULT_OPTIONS.surveyUrl[o];this.aladin.setBaseImageLayer(i)}}}},e.prototype.setHiPSUrl=function(e,t){try{this.wasm.setHiPSUrl(e,t)}catch(n){console.error(n)}},e.prototype.getImageLayer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"base",t=this.imageLayersBeingQueried.get(e),n=this.imageLayers.get(e);return t||n},e.prototype.requestRedraw=function(){this.needRedraw=!0},e.prototype.setProjection=function(e){switch(this.fovLimit=1e3,e){case"TAN":this.projection=o.TAN,this.fovLimit=180;break;case"STG":this.projection=o.STG;break;case"SIN":this.projection=o.SIN;break;case"ZEA":case"ZEA":this.projection=o.ZEA;break;case"FEYE":this.projection=o.FEYE;break;case"AIR":this.projection=o.AIR;break;case"ARC":case"ARC":this.projection=o.ARC;break;case"NCP":this.projection=o.NCP;break;case"MOL":this.projection=o.MOL;break;case"AIT":this.projection=o.AIT;break;case"MER":this.projection=o.MER,this.fovLimit=360;break;case"CAR":this.projection=o.CAR,this.fovLimit=360;break;case"CEA":this.projection=o.CEA,this.fovLimit=360;break;case"CYP":this.projection=o.CYP,this.fovLimit=360;break;case"COD":this.projection=o.COD;break;case"HPX":this.projection=o.HPX,this.fovLimit=360}this.wasm.setProjection(e),this.updateZoomState(),this.requestRedraw()},e.prototype.changeFrame=function(e){this.cooFrame=e,this.cooFrame.system==y.SYSTEMS.GAL?this.wasm.setCooSystem(Qn.wasmLibs.core.CooSystem.GAL):this.cooFrame.system==y.SYSTEMS.J2000&&this.wasm.setCooSystem(Qn.wasmLibs.core.CooSystem.ICRS),"J2000d"==this.cooFrame.label?this.setGridConfig({fmt:"HMS"}):this.setGridConfig({fmt:"DMS"});var t=tt(this.wasm.getCenter(),2),n=t[0],a=t[1];this.viewCenter.lon=n,this.viewCenter.lat=a,this.viewCenter.lon<0&&(this.viewCenter.lon+=360),this.location.update(this.viewCenter.lon,this.viewCenter.lat,this.cooFrame,!0),this.requestRedraw()},e.prototype.showHealpixGrid=function(e){this.displayHpxGrid=e,this.displayHpxGrid||(this.mustClearCatalog=!0),this.requestRedraw()},e.prototype.showSurvey=function(e){this.getImageLayer().setAlpha(e?1:0),this.requestRedraw()},e.prototype.showCatalog=function(e){this.displayCatalog=e,this.displayCatalog||(this.mustClearCatalog=!0),this.requestRedraw()},e.prototype.showReticle=function(e){this.displayReticle=e,this.displayReticle||(this.mustClearCatalog=!0),this.requestRedraw()},e.prototype.pointTo=function(e,t,n){if(n=n||{},e=parseFloat(e),t=parseFloat(t),!isNaN(e)&&!isNaN(t)){this.viewCenter.lon=e,this.viewCenter.lat=t,this.viewCenter.lon<0&&(this.viewCenter.lon+=360),this.location.update(this.viewCenter.lon,this.viewCenter.lat,this.cooFrame,!0),this.wasm.setCenter(this.viewCenter.lon,this.viewCenter.lat),this.requestRedraw();var a=this;setTimeout((function(){a.refreshProgressiveCats()}),1e3)}},e.prototype.makeUniqLayerName=function(e){if(!this.layerNameExists(e))return e;for(var t=1;;++t){var n=e+"_"+t;if(!this.layerNameExists(n))return n}},e.prototype.layerNameExists=function(e){for(var t=this.allOverlayLayers,n=0;n<t.length;n++)if(e==t[n].name)return!0;return!1},e.prototype.removeLayers=function(){this.catalogs=[],this.overlays=[],this.mocs=[],this.allOverlayLayers=[],this.requestRedraw()},e.prototype.removeLayer=function(e){var t=this.allOverlayLayers.indexOf(e);if(this.allOverlayLayers.splice(t,1),"catalog"==e.type||"progressivecat"==e.type)t=this.catalogs.indexOf(e),this.catalogs.splice(t,1);else if("moc"==e.type){t=this.mocs.indexOf(e),this.mocs.splice(t,1)[0].delete()}else"overlay"==e.type&&(t=this.overlays.indexOf(e),this.overlays.splice(t,1));Qe.GRAPHIC_OVERLAY_LAYER_REMOVED.dispatchedTo(this.aladinDiv,{layer:e}),this.requestRedraw()},e.prototype.addCatalog=function(e){e.name=this.makeUniqLayerName(e.name),this.allOverlayLayers.push(e),this.catalogs.push(e),"catalog"==e.type?e.setView(this):"progressivecat"==e.type&&e.init(this)},e.prototype.addOverlay=function(e){e.name=this.makeUniqLayerName(e.name),this.overlays.push(e),this.allOverlayLayers.push(e),e.setView(this)},e.prototype.addMOC=function(e){e.name=this.makeUniqLayerName(e.name),e.setView(this)},e.prototype.getObjectsInBBox=function(e,t,n,a){n<0&&(e+=n,n=-n),a<0&&(t+=a,a=-a);var o,i,r,s,l,c=[],u=[];if(this.catalogs)for(var d=0;d<this.catalogs.length;d++)if((o=this.catalogs[d]).isShowing){i=o.getSources();for(var f=0;f<i.length;f++)(r=i[f]).isShowing&&r.x&&r.y&&r.x>=e&&r.x<=e+n&&r.y>=t&&r.y<=t+a&&u.push(r);if(s=o.getFootprints())for(f=0;f<s.length;f++)(l=s[f]).intersectsBBox(e,t,n,a,this)&&u.push(l);u.length>0&&c.push(u),u=[]}return c},e.prototype.updateObjectsLookup=function(){var e,t,n,a,o;if(this.objLookup=[],this.catalogs)for(var i=0;i<this.catalogs.length;i++)if((e=this.catalogs[i]).isShowing){t=e.getSources();for(var r=0;r<t.length;r++)(n=t[r]).isShowing&&n.x&&n.y&&(a=Math.round(n.x),o=Math.round(n.y),void 0===this.objLookup[a]&&(this.objLookup[a]=[]),void 0===this.objLookup[a][o]&&(this.objLookup[a][o]=[]),this.objLookup[a][o].push(n))}},e.prototype.closestFootprints=function(e,t,n,a){var o=this;if(!e)return null;var i=null;return e.forEach((function(e){e.isShowing&&e.isInStroke(t,o,n,a)&&(i=e)})),i},e.prototype.closestObjects=function(e,t,n){var a,o,i,r=this.catalogCanvas.getContext("2d"),s=r.lineWidth;if(r.lineWidth=6,this.overlays)for(var l=0;l<this.overlays.length;l++){a=this.overlays[l];var c=this.closestFootprints(a.overlayItems,r,e,t);if(c)return r.lineWidth=s,[c]}if(this.catalogs)for(l=0;l<this.catalogs.length;l++){var u=this.catalogs[l],d=this.closestFootprints(u.footprints,r,e,t);if(d)return r.lineWidth=s,[d]}if(!this.objLookup)return r.lineWidth=s,null;r.lineWidth=s;for(var f=0;f<=n;f++){o=i=null;for(var p=-n;p<=n;p++)if(this.objLookup[e+p])for(var h=-n;h<=n;h++)if(this.objLookup[e+p][t+h]){var m=p*p+h*h;(!o||m<i)&&(o=this.objLookup[e+p][t+h],i=m)}if(o)return o}return null},e}(),rt=l(756),st=function(){var e=function(e){this.uuid=u.uuidv4(),this.type="moc",e=e||{},this.name=e.name||"MOC",this.color=e.color||rt.I.getNextColor(),this.color=rt.I.standardizeColor(this.color),this.opacity=e.opacity||1,this.opacity=Math.max(0,Math.min(1,this.opacity)),this.lineWidth=e.lineWidth||1,this.adaptativeDisplay=!1!==e.adaptativeDisplay,this.isShowing=!0,this.ready=!1,this.skyFrac=void 0};return e.prototype.skyFraction=function(){return this.skyFrac},e.prototype.dataFromJSON=function(e){this.dataJSON=e},e.prototype.dataFromFITSURL=function(e,t){this.dataURL=e,this.promiseFetchData=fetch(this.dataURL).then((function(e){return e.arrayBuffer()})),this.successCallback=t},e.prototype.setView=function(e){var t=this,n=this;this.view=e,this.mocParams=new Qn.wasmLibs.core.MOC(this.uuid,this.opacity,this.lineWidth,this.isShowing,this.color,this.adaptativeDisplay),this.dataURL?this.promiseFetchData.then((function(e){n.view.wasm.addFITSMoc(n.mocParams,new Uint8Array(e)),n.ready=!0,n.successCallback&&n.successCallback(n),n.skyFrac=n.view.wasm.mocSkyFraction(t.mocParams),n.view.mocs.push(n),n.view.allOverlayLayers.push(n),Qe.GRAPHIC_OVERLAY_LAYER_ADDED.dispatchedTo(n.view.aladinDiv,{layer:n}),n.view.requestRedraw()})):this.dataFromJSON&&(n.view.wasm.addJSONMoc(n.mocParams,n.dataJSON),n.ready=!0,n.skyFrac=n.view.wasm.mocSkyFraction(n.mocParams),n.view.mocs.push(n),n.view.allOverlayLayers.push(n),Qe.GRAPHIC_OVERLAY_LAYER_ADDED.dispatchedTo(n.view.aladinDiv,{layer:n}),n.view.requestRedraw())},e.prototype.reportChange=function(){this.view&&(this.mocParams=new Qn.wasmLibs.core.MOC(this.uuid,this.opacity,this.lineWidth,this.isShowing,this.color,this.adaptativeDisplay),this.view.wasm.setMocParams(this.mocParams),this.view.requestRedraw())},e.prototype.delete=function(){this.view&&(this.view.wasm.removeMoc(this.mocParams),this.view.requestRedraw())},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.reportChange())},e.prototype.contains=function(e,t){if(!this.ready)throw this.name+" is not yet ready, either because it has not been downloaded yet or because it has not been added to the aladin instance.";return this.view.wasm.mocContains(this.mocParams,e,t)},e}(),lt=function(){var e=function(e,t,n,a){this.ra=e,this.dec=t,this.data=n,this.catalog=null,this.marker=a&&a.marker||!1,this.marker&&(this.popupTitle=a&&a.popupTitle?a.popupTitle:"",this.popupDesc=a&&a.popupDesc?a.popupDesc:"",this.useMarkerDefaultIcon=!a||void 0===a.useMarkerDefaultIcon||a.useMarkerDefaultIcon),this.isShowing=!0,this.isSelected=!1};return e.prototype.setCatalog=function(e){this.catalog=e},e.prototype.getCatalog=function(){return this.catalog},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.catalog&&this.catalog.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.catalog&&this.catalog.reportChange())},e.prototype.select=function(){this.isSelected||(this.isSelected=!0,this.catalog&&this.catalog.reportChange())},e.prototype.deselect=function(){this.isSelected&&(this.isSelected=!1,this.catalog&&this.catalog.reportChange())},e.prototype.actionClicked=function(){if(this.catalog&&this.catalog.onClick){var e=this.catalog.view;if("showTable"==this.catalog.onClick){this.select();var t={rows:[this],fields:this.catalog.fields,fieldsClickedActions:this.catalog.fieldsClickedActions,name:this.catalog.name,color:this.catalog.color},n={save:!0};e.aladin.measurementTable.hide(),e.aladin.measurementTable.showMeasurement([t],n)}else if("showPopup"==this.catalog.onClick){e.popup.setTitle("<br><br>");var a='<div class="aladin-marker-measurement">';for(var o in a+="<table>",this.data)a+="<tr><td>"+o+"</td><td>"+this.data[o]+"</td></tr>";a+="</table>",a+="</div>",e.popup.setText(a),e.popup.setSource(this),e.popup.show()}else"function"==typeof this.catalog.onClick&&(this.catalog.onClick(this),e.lastClickedObject=this)}},e.prototype.isFootprint=function(){return!1},e.prototype.actionOtherObjectClicked=function(){this.catalog&&this.catalog.onClick&&this.deselect()},e}();function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var dt=function(){function e(){}return e.handleActions=function(e,t){pt.parse(e,(function(n,a){var o=[];a.forEach((function(e){for(var t={},a=0,i=Object.entries(n);a<i.length;a++){var r=ct(i[a],2),s=(r[0],r[1]);t[s.name]=e[s.idx]}o.push({data:t})}));var i={name:"Datalink:"+e,color:"purple",rows:o,fields:n,fieldsClickedActions:{access_url:function(e){var n=e.access_url,a=e.content_type,o=e.content_qualifier,i=function(){var e=t.createImageFITS(n,n,{},(function(e,n,a,o){t.gotoRaDec(e,n),t.setFoV(a)}));t.setOverlayImageLayer(e,u.uuidv4())};switch(a){case"application/hips":var r=t.newImageSurvey(n);t.setOverlayImageLayer(r,u.uuidv4());break;case"application/fits":case"image/fits":"cube"===o&&console.warn("Cube not handled, only first slice downloaded"),i();break;default:u.download(n)}}}};t.measurementTable.showMeasurement([i],{save:!0})}))},e}(),ft=function(){function e(){}return e.MANDATORY_FIELDS={dataproduct_type:{name:"dataproduct_type",ucd:"meta.id",utype:"ObsDataset.dataProductType",units:null},calib_level:{name:"calib_level",ucd:"meta.code;obs.calib",utype:"ObsDataset.calibLevel",units:null},obs_collection:{name:"obs_collection",ucd:"meta.id",utype:"DataID.collection",units:null},obs_id:{name:"obs_id",ucd:"meta.id",utype:"DataID.observationID",units:null},obs_publisher_did:{name:"obs_publisher_did",ucd:"meta.ref.uri;meta.curation",utype:"Curation.publisherDID",units:null},access_url:{name:"access_url",ucd:"meta.ref.url",utype:"Access.reference",units:null},access_format:{name:"access_format",ucd:"meta.code.mime",utype:"Access.format",units:null},access_estsize:{name:"access_estsize",ucd:"phys.size;meta.file",utype:"Access.size",units:"kbyte"},target_name:{name:"target_name",ucd:"meta.id;src",utype:"Target.name",units:null},s_ra:{name:"s_ra",ucd:"pos.eq.ra",utype:"Char.SpatialAxis.Coverage.Location.Coord.Position2D.Value2.C1",units:"deg"},s_dec:{name:"s_dec",ucd:"pos.eq.dec",utype:"Char.SpatialAxis.Coverage.Location.Coord.Position2D.Value2.C2",units:"deg"},s_fov:{name:"s_fov",ucd:"phys.angSize;instr.fov",utype:"Char.SpatialAxis.Coverage.Bounds.Extent.diameter",units:"deg"},s_region:{name:"s_region",ucd:"pos.outline;obs.field",utype:"Char.SpatialAxis.Coverage.Support.Area",units:null},s_resolution:{name:"s_resolution",ucd:"pos.angResolution",utype:"Char.SpatialAxis.Resolution.Refval.value",units:"arcsec"},s_xel1:{name:"s_xel1",ucd:"meta.number",utype:"Char.SpatialAxis.numBins1",units:null},s_xel2:{name:"s_xel2",ucd:"meta.number",utype:"Char.SpatialAxis.numBins2",units:null},t_min:{name:"t_min",ucd:"time.start;obs.exposure",utype:"Char.TimeAxis.Coverage.Bounds.Limits.StartTime",units:"d"},t_max:{name:"t_max",ucd:"time.end;obs.exposure",utype:"Char.TimeAxis.Coverage.Bounds.Limits.StopTime",units:"d"},t_exptime:{name:"t_exptime",ucd:"time.duration;obs.exposure",utype:"Char.TimeAxis.Coverage.Support.Extent",units:"s"},t_resolution:{name:"t_resolution",ucd:"time.resolution",utype:"Char.TimeAxis.Resolution.Refval.value",units:"s"},t_xel:{name:"t_xel",ucd:"meta.number",utype:"Char.TimeAxis.numBins",units:null},em_min:{name:"em_min",ucd:"em.wl;stat.min",utype:"Char.SpectralAxis.Coverage.Bounds.Limits.LoLimit",units:"m"},em_max:{name:"em_max",ucd:"em.wl;stat.max",utype:"Char.SpectralAxis.Coverage.Bounds.Limits.HiLimit",units:"m"},em_res_power:{name:"em_res_power",ucd:"spect.resolution",utype:"Char.SpectralAxis.Resolution.ResolPower.refVal",units:null},em_xel:{name:"em_xel",ucd:"meta.number",utype:"Char.SpectralAxis.numBins",units:null},o_ucd:{name:"o_ucd",ucd:"meta.ucd",utype:"Char.ObservableAxis.ucd",units:null},pol_states:{name:"pol_states",ucd:"meta.code;phys.polarization",utype:"Char.PolarizationAxis.stateList",units:null},pol_xel:{name:"pol_xel",ucd:"meta.number",utype:"Char.PolarizationAxis.numBins",units:null},facility_name:{name:"facility_name",ucd:"meta.id;instr.tel",utype:"Provenance.ObsConfig.Facility.name",units:null},instrument_name:{name:"instrument_name",ucd:"meta.id;instr",utype:"Provenance.ObsConfig.Instrument.name",units:null}},e.clickOnAccessUrlAction=function(e){pt.parse(e,(function(e,t){console.log(e)}))},e.COLOR="#004500",e.parseFields=function(t){var n={},a=e.MANDATORY_FIELDS.s_ra,o=e.MANDATORY_FIELDS.s_dec,i=e.MANDATORY_FIELDS.s_region,r=e.MANDATORY_FIELDS.access_url,s=e.MANDATORY_FIELDS.access_format,l=e.findMandatoryField(t,a.name,a.ucd,a.utype),c=e.findMandatoryField(t,o.name,o.ucd,o.utype),u=e.findMandatoryField(t,i.name,i.ucd,i.utype),d=e.findMandatoryField(t,r.name,r.ucd,r.utype),f=e.findMandatoryField(t,s.name,s.ucd,s.utype),p=0;return t.forEach((function(e){var t=e.name?e.name:e.id;n[p==l?"s_ra":p==c?"s_dec":p==u?"s_region":p==d?"access_url":p==f?"access_format":t]={name:t,idx:p},p++})),n},e.findMandatoryField=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(u.isInt(t)&&t<e.length)return t;if(t)for(var o=0,i=e.length;o<i;o++){if((l=e[o]).ID&&l.ID===t||l.name&&l.name===t)return o}if(n){var r=n.replace(".","_");for(o=0,i=e.length;o<i;o++){if((l=e[o]).ucd){var s=$.trim(l.ucd.toLowerCase());if(0==s.indexOf(n)||0==s.indexOf(r))return o}}}if(a)for(o=0,i=e.length;o<i;o++){var l;if((l=e[o]).utype){var c=$.trim(l.utype.toLowerCase());if(c===a)return o}}throw"Mandatory field "+t+" not found"},e.handleActions=function(e){var t=e.fields,n=e.view.aladin;e.addFieldClickCallback("access_url",(function(e){var a=t.access_url.name,o=t.access_format.name,i=e[a],r=e[o],s=function(){var a=t.obs_id&&e[t.obs_id.name]||i,o=n.createImageFITS(i,a,{},(function(e,t,a,o){n.gotoRaDec(e,t),n.setFoV(a)}));n.setOverlayImageLayer(o,u.uuidv4())};switch(r){case"application/x-votable+xml;content=datalink":dt.handleActions(i,n);break;case"image/fits":case"application/fits":case"application/x-fits-mef":s();break;default:console.warn("Access format ",r," not yet implemented or not recognized. Download the file triggered"),u.download(i)}}))},e}(),pt=function(){function e(e,t,n){fetch(e).then((function(e){return e.text()})).then((function(e){Qe.AL_USE_WASM.dispatchedTo(document.body,{callback:function(n){var a=n.parseVOTable(e);t(a)}})})).catch((function(e){return n(e)}))}return e.parse=function(e,t,n,a,o,i){a&&(e=u.handleCORSNotSameOrigin(e)),fetch(e).then((function(e){return e.text()})).then((function(e){Qe.AL_USE_WASM.dispatchedTo(document.body,{callback:function(n){n.parseVOTable(e).votable.get("resources").forEach((function(e){var n=e.get("tables");n&&n.forEach((function(e){var n=e.get("elems").filter((function(e){return"Field"===(e.elem_type||e.get("elem_type"))})).map((function(e){return Object.fromEntries(e)}));try{(n=ft.parseFields(n)).subtype="ObsCore"}catch(s){n=vt.parseFields(n,o,i)}var a=e.get("data");if(a){var r=a.get("rows");r&&t(n,r)}}))}))}})})).catch((function(e){if(!n)throw e;n(e)}))},e}();function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var vt=function(){function e(e){e=e||{},this.uuid=u.uuidv4(),this.type="catalog",this.name=e.name||"catalog",this.color=e.color||rt.I.getNextColor(),this.sourceSize=e.sourceSize||8,this.markerSize=e.sourceSize||12,this.selectSize=this.sourceSize,this.shape=e.shape||"square",this.maxNbSources=e.limit||void 0,this.onClick=e.onClick||void 0,this.raField=e.raField||void 0,this.decField=e.decField||void 0,this.fieldsClickedActions={},this.fields=void 0,this.indexationNorder=5,this.sources=[],this.ra=[],this.dec=[],this.footprints=[],this.displayLabel=e.displayLabel||!1,this.labelColor=e.labelColor||this.color,this.labelFont=e.labelFont||"10px sans-serif",this.displayLabel&&(this.labelColumn=e.labelColumn,this.labelColumn||(this.displayLabel=!1)),(this.shape instanceof Image||this.shape instanceof HTMLCanvasElement)&&(this.sourceSize=this.shape.width),this._shapeIsFunction=!1,"function"==typeof this.shape&&(this._shapeIsFunction=!0),this.selectionColor="#00ff00",this.updateShape(e),this.cacheMarkerCanvas=document.createElement("canvas"),this.cacheMarkerCanvas.width=this.markerSize,this.cacheMarkerCanvas.height=this.markerSize;var t=this.cacheMarkerCanvas.getContext("2d");t.fillStyle=this.color,t.beginPath();var n=this.markerSize/2;t.arc(n,n,n-2,0,2*Math.PI,!1),t.fill(),t.lineWidth=2,t.strokeStyle="#ccc",t.stroke(),this.isShowing=!0}return e.createShape=function(e,t,n){if(e instanceof Image||e instanceof HTMLCanvasElement)return e;var a=document.createElement("canvas");a.width=a.height=n;var o=a.getContext("2d");return o.beginPath(),o.strokeStyle=t,o.lineWidth=2,"plus"==e?(o.moveTo(n/2,0),o.lineTo(n/2,n),o.stroke(),o.moveTo(0,n/2),o.lineTo(n,n/2),o.stroke()):"cross"==e?(o.moveTo(0,0),o.lineTo(n-1,n-1),o.stroke(),o.moveTo(n-1,0),o.lineTo(0,n-1),o.stroke()):"rhomb"==e?(o.moveTo(n/2,0),o.lineTo(0,n/2),o.lineTo(n/2,n),o.lineTo(n,n/2),o.lineTo(n/2,0),o.stroke()):"triangle"==e?(o.moveTo(n/2,0),o.lineTo(0,n-1),o.lineTo(n-1,n-1),o.lineTo(n/2,0),o.stroke()):"circle"==e?(o.arc(n/2,n/2,n/2-1,0,2*Math.PI,!0),o.stroke()):(o.moveTo(1,0),o.lineTo(1,n-1),o.lineTo(n-1,n-1),o.lineTo(n-1,1),o.lineTo(1,1),o.stroke()),a},e.parseFields=function(e,n,a){var o=function(e,n,a){var o,i;if(o=i=null,n)for(var r=0,s=e.length;r<s;r++){var l=e[r];if(u.isInt(n)&&n<e.length){o=n;break}if(l.ID&&l.ID===n||l.name&&l.name===n){o=r;break}}if(a)for(r=0,s=e.length;r<s;r++){if(l=e[r],u.isInt(a)&&a<e.length){i=a;break}if(l.ID&&l.ID===a||l.name&&l.name===a){i=r;break}}for(r=0,s=e.length;r<s&&(null==o||null==i);r++){var c;l=e[r],o||!l.ucd||0!=(c=t().trim(l.ucd.toLowerCase())).indexOf("pos.eq.ra")&&0!=c.indexOf("pos_eq_ra")?i||!l.ucd||0!=(c=t().trim(l.ucd.toLowerCase())).indexOf("pos.eq.dec")&&0!=c.indexOf("pos_eq_dec")||(i=r):o=r}if(null==o&&null==i)for(r=0,s=e.length;r<s;r++){var d=(l=e[r]).name||l.ID||"";d=d.toLowerCase(),o||0!=d.indexOf("ra")&&0!=d.indexOf("_ra")&&0!=d.indexOf("ra(icrs)")&&0!=d.indexOf("_ra")&&0!=d.indexOf("alpha")?i||0!=d.indexOf("dej2000")&&0!=d.indexOf("_dej2000")&&0!=d.indexOf("de")&&0!=d.indexOf("de(icrs)")&&0!=d.indexOf("_de")&&0!=d.indexOf("delta")||(i=r):o=r}return null!=o&&null!=i||(o=0,i=1),[o,i]}(e,n,a),i=ht(o,2),r=i[0],s=i[1],l={},c=0;return e.forEach((function(e){var t=e.name?e.name:e.id;l[c==r?"ra":c==s?"dec":t]={name:t,idx:c},c++})),l},e.parseVOTable=function(e,t,n,a,o,i,r){pt.parse(e,(function(e,n){var o=[],i=[],r=new f;n.every((function(t){for(var n,s,l,c={},d=0,f=Object.entries(e);d<f.length;d++){var p=ht(f[d],2),h=p[0],m=p[1];"s_region"===h?l=t[m.idx]:"ra"===h||"s_ra"===h?n=t[m.idx]:"dec"!==h&&"s_dec"!==h||(s=t[m.idx]),c[m.name]=t[m.idx]}var v=null;n&&s&&(u.isNumber(n)&&u.isNumber(s)||(r.parse(n+" "+s),n=r.lon,s=r.lat),v=new lt(n,s,c));var _=null;if(l){var y=A.footprintsFromSTCS(l,{lineWidth:2});_=new k(y,v)}if(_)i.push(_);else if(v&&(o.push(v),a&&o.length==a))return!1;return!0})),t&&t(o,i,e)}),n,o,i,r)},e.prototype.updateShape=function(t){t=t||{},this.color=t.color||this.color||rt.I.getNextColor(),this.sourceSize=t.sourceSize||this.sourceSize||6,this.shape=t.shape||this.shape||"square",this.selectSize=this.sourceSize+2,this.cacheCanvas=e.createShape(this.shape,this.color,this.sourceSize),this.cacheSelectCanvas=e.createShape("square",this.selectionColor,this.selectSize),this.reportChange()},e.prototype.addSources=function(t){var n=this;if(0!==(t=[].concat(t)).length){if(!this.fields){var a=[];for(var o in t[0].data)a.push({name:o});a=e.parseFields(a,this.raField,this.decField),this.setFields(a)}this.sources=this.sources.concat(t);for(var i=0,r=t.length;i<r;i++)t[i].setCatalog(this),this.ra.push(t[i].ra),this.dec.push(t[i].dec);Qe.AL_USE_WASM.dispatchedTo(document.body,{callback:function(e){e.setCatalog(n),n.reportChange()}})}},e.prototype.addFootprints=function(e){e=[].concat(e),this.footprints=this.footprints.concat(e);for(var t=0,n=e.length;t<n;t++)e[t].setCatalog(this),e[t].setColor(this.color),e[t].setSelectionColor(this.selectionColor);this.reportChange()},e.prototype.setFields=function(e){this.fields=e},e.prototype.addFieldClickCallback=function(e,t){this.fieldsClickedActions[e]=t},e.prototype.isObsCore=function(){return this.fields&&"ObsCore"===this.fields.subtype},e.prototype.addSourcesAsArray=function(t,n){for(var a,o,i=[],r=0;r<t.length;r++)i.push({name:t[r]});i=e.parseFields(i,this.raField,this.decField),this.setFields(i),a=i.ra.idx,o=i.dec.idx;for(var s,l,c,d,p=[],h=new f,m=0;m<n.length;m++){c=n[m],u.isNumber(c[a])&&u.isNumber(c[o])?(s=parseFloat(c[a]),l=parseFloat(c[o])):(h.parse(c[a]+" "+c[o]),s=h.lon,l=h.lat),d={};for(r=0;r<t.length;r++)d[t[r]]=c[r];p.push(A.source(s,l,d))}this.addSources(p)},e.prototype.getSources=function(){return this.sources},e.prototype.getFootprints=function(){return this.footprints},e.prototype.selectAll=function(){if(this.sources)for(var e=0;e<this.sources.length;e++)this.sources[e].select()},e.prototype.deselectAll=function(){if(this.sources)for(var e=0;e<this.sources.length;e++)this.sources[e].deselect()},e.prototype.getSource=function(e){return e<this.sources.length?this.sources[e]:null},e.prototype.setView=function(e){this.view=e,this.reportChange()},e.prototype.remove=function(e){var t=this.sources.indexOf(e);t<0||(this.sources[t].deselect(),this.sources.splice(t,1),this.ra.splice(t,1),this.dec.splice(t,1),this.reportChange())},e.prototype.removeAll=e.prototype.clear=function(){this.sources=[],this.ra=[],this.dec=[],this.footprints=[]},e.prototype.draw=function(e,t,n,a,o,i){var r=this;if(this.isShowing){e.strokeStyle=this.color,this._shapeIsFunction&&e.save();var s=this.drawSources(e,n,a);this._shapeIsFunction&&e.restore(),this.displayLabel&&(e.fillStyle=this.labelColor,e.font=this.labelFont,s.forEach((function(t){r.drawSourceLabel(t,e)}))),this.drawFootprints(e)}},e.prototype.drawSources=function(e,t,n){if(this.sources){var a=[],o=this.view.wasm.worldToScreenVec(this.ra,this.dec),i=this;return this.sources.forEach((function(r,s){o[2*s]&&o[2*s+1]&&(i.filterFn&&!i.filterFn(r)||(r.x=o[2*s],r.y=o[2*s+1],i.drawSource(r,e,t,n),a.push(r)))})),a}},e.prototype.drawSource=function(e,t,n,a){return!!e.isShowing&&(e.x<=n&&e.x>=0&&e.y<=a&&e.y>=0&&(this._shapeIsFunction?this.shape(e,t,this.view.getViewParams()):e.marker&&e.useMarkerDefaultIcon?t.drawImage(this.cacheMarkerCanvas,e.x-this.sourceSize/2,e.y-this.sourceSize/2):e.isSelected?t.drawImage(this.cacheSelectCanvas,e.x-this.selectSize/2,e.y-this.selectSize/2):t.drawImage(this.cacheCanvas,e.x-this.cacheCanvas.width/2,e.y-this.cacheCanvas.height/2),e.popup&&e.popup.setPosition(e.x,e.y),!0))},e.prototype.drawSourceLabel=function(e,t){if(e&&e.isShowing&&e.x&&e.y){var n=e.data[this.labelColumn];n&&t.fillText(n,e.x,e.y)}},e.prototype.drawFootprints=function(e){var t=this;this.footprints.forEach((function(n){n.draw(e,t.view)}))},e.prototype.reportChange=function(){this.view&&this.view.requestRedraw()},e.prototype.show=function(){this.isShowing||(this.isShowing=!0,this.footprints&&this.footprints.forEach((function(e){return e.show()})),this.reportChange())},e.prototype.hide=function(){this.isShowing&&(this.isShowing=!1,this.view&&this.view.popup&&this.view.popup.source&&this.view.popup.source.catalog==this&&this.view.popup.hide(),this.footprints&&this.footprints.forEach((function(e){return e.hide()})),this.reportChange())},e}();var _t=function(){var e=function(e,t,n,a){a=a||{},this.uuid=u.uuidv4(),this.type="progressivecat",this.rootUrl=e,u.isHttpsContext()&&(/u-strasbg.fr/i.test(this.rootUrl)||/unistra.fr/i.test(this.rootUrl))&&(this.rootUrl=this.rootUrl.replace("http://","https://")),this.frameStr=t,this.frame=y.fromString(t)||y.J2000,this.maxOrder=parseInt(n),this.isShowing=!0,this.name=a.name||"progressive-cat",this.color=a.color||rt.I.getNextColor(),this.shape=a.shape||"square",this.sourceSize=a.sourceSize||6,this.selectSize=this.sourceSize+2,this.selectionColor="#00ff00",this.filterFn=a.filter||void 0,this.onClick=a.onClick||void 0,this.sourcesCache=new u.LRUCache(256),(this.shape instanceof Image||this.shape instanceof HTMLCanvasElement)&&(this.sourceSize=this.shape.width),this._shapeIsFunction=!1,"function"==typeof this.shape&&(this._shapeIsFunction=!0),this.updateShape(a),this.maxOrderAllsky=2,this.isReady=!1,this.tilesInView=[]};function n(e,n){var a=["name","ID","ucd","utype","unit","datatype","arraysize","width","precision"],o=[],i=0;return e.keyRa=e.keyDec=null,t()(n).find("FIELD").each((function(){for(var n={},r=0;r<a.length;r++){var s=a[r];t()(this).attr(s)&&(n[s]=t()(this).attr(s))}n.ID||(n.ID="col_"+i),e.keyRa||!n.ucd||0!=n.ucd.indexOf("pos.eq.ra")&&0!=n.ucd.indexOf("POS_EQ_RA")||(n.name?e.keyRa=n.name:e.keyRa=n.ID),e.keyDec||!n.ucd||0!=n.ucd.indexOf("pos.eq.dec")&&0!=n.ucd.indexOf("POS_EQ_DEC")||(n.name?e.keyDec=n.name:e.keyDec=n.ID),o.push(n),i++})),o}function a(e,t,n){if(!e.keyRa||!e.keyDec)return[];for(var a=t.split("\n"),o=[],i=0;i<n.length;i++)n[i].name?o.push(n[i].name):o.push(n[i].ID);for(var r,s=[],l=new f,c=2;c<a.length;c++){var d={},p=a[c].split("\t");if(!(p.length<o.length)){for(var h=0;h<o.length;h++)d[o[h]]=p[h];var m,v;u.isNumber(d[e.keyRa])&&u.isNumber(d[e.keyDec])?(m=parseFloat(d[e.keyRa]),v=parseFloat(d[e.keyDec])):(l.parse(d[e.keyRa]+" "+d[e.keyDec]),m=l.lon,v=l.lat),r=new lt(m,v,d),s.push(r),r.setCatalog(e)}}return s}return e.readProperties=function(e,n,a){if(n){var o=e+"/properties";t().ajax({url:o,method:"GET",dataType:"text",success:function(e){for(var a={},o=e.split("\n"),i=0;i<o.length;i++){var r=o[i],s=r.indexOf("="),l=t().trim(r.substring(0,s)),c=t().trim(r.substring(s+1));a[l]=c}n(a)},error:function(e){a&&a(e)}})}},e.prototype=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({init:function(t){var n=this;this.view=t,this.maxOrder&&this.frameStr?this._loadMetadata():e.readProperties(n.rootUrl,(function(e){n.properties=e,n.maxOrder=parseInt(n.properties.hips_order),n.frame=y.fromString(n.properties.hips_frame),n._loadMetadata()}),(function(e){console.log("Could not find properties for HiPS "+n.rootUrl)}))},updateShape:vt.prototype.updateShape,_loadMetadata:function(){var e=this;t().ajax({url:e.rootUrl+"/Metadata.xml",method:"GET",success:function(t){e.fields=n(e,t),e._loadAllskyNewMethod()},error:function(t){e._loadAllskyOldMethod()}})},_loadAllskyNewMethod:function(){var e=this;t().ajax({url:e.rootUrl+"/Norder1/Allsky.tsv",method:"GET",success:function(t){e.order1Sources=a(e,t,e.fields),e.order2Sources&&(e.isReady=!0,e._finishInitWhenReady())},error:function(e){console.log("Something went wrong: "+e)}}),t().ajax({url:e.rootUrl+"/Norder2/Allsky.tsv",method:"GET",success:function(t){e.order2Sources=a(e,t,e.fields),e.order1Sources&&(e.isReady=!0,e._finishInitWhenReady())},error:function(e){console.log("Something went wrong: "+e)}})},_loadAllskyOldMethod:function(){this.maxOrderAllsky=3,this._loadLevel2Sources(),this._loadLevel3Sources()},_loadLevel2Sources:function(){var e=this;t().ajax({url:e.rootUrl+"/Norder2/Allsky.xml",method:"GET",success:function(o){e.fields=n(e,o),e.order2Sources=a(e,t()(o).find("CSV").text(),e.fields),e.order3Sources&&(e.isReady=!0,e._finishInitWhenReady())},error:function(e){console.log("Something went wrong: "+e)}})},_loadLevel3Sources:function(){var e=this;t().ajax({url:e.rootUrl+"/Norder3/Allsky.xml",method:"GET",success:function(n){e.order3Sources=a(e,t()(n).find("CSV").text(),e.fields),e.order2Sources&&(e.isReady=!0,e._finishInitWhenReady())},error:function(e){console.log("Something went wrong: "+e)}})},_finishInitWhenReady:function(){this.view.requestRedraw(),this.loadNeededTiles()},draw:function(e,t,n,a,o,i){var r,s,l=this;this.isShowing&&this.isReady&&(this._shapeIsFunction&&e.save(),this.drawSources(this.order1Sources,e,n,a),this.view.realNorder>=1&&this.drawSources(this.order2Sources,e,n,a),3===this.maxOrderAllsky&&this.view.realNorder>=2&&this.drawSources(this.order3Sources,e,n,a),this.tilesInView.forEach((function(t){r=t[0]+"-"+t[1],(s=l.sourcesCache.get(r))&&l.drawSources(s,e,n,a)})),this._shapeIsFunction&&e.restore())},drawSources:function(e,t,n,a){if(e){var o=[],i=[];e.forEach((function(e){o.push(e.ra),i.push(e.dec)}));var r=this.view.wasm.worldToScreenVec(o,i),s=this;e.forEach((function(e,o){r[2*o]&&r[2*o+1]&&(s.filterFn&&!s.filterFn(e)||(e.x=r[2*o],e.y=r[2*o+1],s.drawSource(e,t,n,a)))}))}},drawSource:vt.prototype.drawSource,getSources:function(){var e=[];if(this.order1Sources&&(e=e.concat(this.order1Sources)),this.order2Sources&&(e=e.concat(this.order2Sources)),this.order3Sources&&(e=e.concat(this.order3Sources)),this.tilesInView)for(var t,n,a,o=0;o<this.tilesInView.length;o++)n=(a=this.tilesInView[o])[0]+"-"+a[1],(t=this.sourcesCache.get(n))&&(e=e.concat(t));return e},deselectAll:function(){if(this.order1Sources)for(var e=0;e<this.order1Sources.length;e++)this.order1Sources[e].deselect();if(this.order2Sources)for(e=0;e<this.order2Sources.length;e++)this.order2Sources[e].deselect();if(this.order3Sources)for(e=0;e<this.order3Sources.length;e++)this.order3Sources[e].deselect();var t=this.sourcesCache.keys();for(key in t)if(this.sourcesCache[key]){var n=this.sourcesCache[key];for(e=0;e<n.length;e++)n[e].deselect()}},show:function(){this.isShowing||(this.isShowing=!0,this.loadNeededTiles(),this.reportChange())},hide:function(){this.isShowing&&(this.isShowing=!1,this.reportChange())},reportChange:function(){this.view.requestRedraw()},getTileURL:function(e,t){var n=1e4*Math.floor(t/1e4);return this.rootUrl+"/Norder"+e+"/Dir"+n+"/Npix"+t+".tsv"},getFootprints:function(){return null},loadNeededTiles:function(){if(this.isShowing){this.tilesInView=[];var e=this.view.realNorder;e>this.maxOrder&&(e=this.maxOrder);for(var n=this.view.getVisibleCells(e),o=e;n.length>12&&o>this.maxOrderAllsky;)o--,n=this.view.getVisibleCells(o);if(!((e=o)<=this.maxOrderAllsky)){for(var i,r,s,l,c=this.maxOrderAllsky+1;c<=e;c++){i=[];for(var u=0;u<n.length;u++)r=Math.floor(n[u].ipix/Math.pow(4,e-c)),i.indexOf(r)<0&&i.push(r);for(var d=0;d<i.length;d++)this.tilesInView.push([c,i[d]])}for(u=0;u<this.tilesInView.length;u++)l=(s=this.tilesInView[u])[0]+"-"+s[1],this.sourcesCache.get(l)||function(e,n,o){var i=n+"-"+o;t().ajax({url:e.getTileURL(n,o),method:"GET",success:function(t){e.sourcesCache.set(i,a(e,t,e.fields)),e.view.requestRedraw()},error:function(){e.sourcesCache.set(i,[])}})}(this,s[0],s[1])}}}},"reportChange",(function(){this.view&&this.view.requestRedraw()})),e}(),yt=function(){var e={cache:{},SESAME_URL:"http://cds.u-strasbg.fr/cgi-bin/nph-sesame.jsonp",getTargetRADec:function(t,n,a){if(n)if(/[a-zA-Z]/.test(t))e.resolve(t,(function(e){n({ra:e.Target.Resolver.jradeg,dec:e.Target.Resolver.jdedeg})}),(function(e){a&&a()}));else{var o=new Coo;o.parse(t),n&&n({ra:o.lon,dec:o.lat})}},resolve:function(n,a,o){var i=e.SESAME_URL;u.isHttpsContext()&&(i=i.replace("http://","https://")),t().ajax({url:i,data:{object:n},method:"GET",dataType:"jsonp",success:function(e){e.Target&&e.Target.Resolver&&e.Target.Resolver?a(e):o(e)},error:o})}};return e}();function xt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var bt=function(){var e={};function n(e){var t,n,a="",o=[""],i=[o],r=0,s=0,l=!0,c=xt(e);try{for(c.s();!(n=c.n()).done;)'"'===(t=n.value)?(l&&t===a&&(o[r]+=t),l=!l):","===t&&l?t=o[++r]="":"\n"===t&&l?("\r"===a&&(o[r]=o[r].slice(0,-1)),o=i[++s]=[t=""],r=0):o[r]+=t,a=t}catch(u){c.e(u)}finally{c.f()}return i}return e.cache={},e.URL="https://alasky.cds.unistra.fr/planetary-features/resolve",e.resolve=function(a,o,i,r){var s=e.URL;t().ajax({url:s,data:{identifier:a,body:o,threshold:.7,format:"csv"},method:"GET",dataType:"text",success:function(e){var t=e.split("\n"),a=n(t[0])[0];if(t.length>1&&t[1].length>0){var o=n(t[1])[0],s=a.findIndex((function(e){return e.includes("longitude")})),l=a.findIndex((function(e){return e.includes("latitude")})),c=parseFloat(o[s]),u=parseFloat(o[l]),d=!0,f=a.indexOf("coordinate_system");f>0&&o[f].includes("+West")&&(d=!1),d||(c=360-c),i({lon:c,lat:u})}else r(data)},error:r})},e}();function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var At=function(){function e(e){this.isShowing=!1;var t=document.createElement("div");t.setAttribute("class","aladin-measurement-div"),this.element=t,this.savedTablesIdx=0,this.savedTables=[],e.appendChild(this.element)}return e.prototype.updateRows=function(){var e=this.element.querySelector("tbody");e.innerHTML="";var t=this.tables[this.curTableIdx],n="";if(t.rows.forEach((function(e){for(var t in n+="<tr>",e.data){var a=e.data[t]||"--";if(n+='<td class="'+t+'">',"string"==typeof a)try{var o=new URL(a);n+="<a href="+o+' target="_blank">'+o+"</a>"}catch(i){n+=a}else n+=a;n+="</td>"}n+="</tr>"})),e.innerHTML=n,t.fieldsClickedActions){var a=function(n){e.querySelectorAll("."+n).forEach((function(e,a){e.addEventListener("click",(function(e){(0,t.fieldsClickedActions[n])(t.rows[a].data),e.preventDefault()}),!1)}))};for(var o in t.fieldsClickedActions)a(o)}},e.prototype.showPreviousMeasurement=function(){this.savedTablesIdx--,this.savedTablesIdx<0&&(this.savedTablesIdx=0);var e=this.savedTables[this.savedTablesIdx];e&&(this.update(e),this.updateStateNavigation())},e.prototype.showNextMeasurement=function(){this.savedTablesIdx++,this.savedTablesIdx>=this.savedTables.length&&(this.savedTablesIdx=this.savedTables.length-1);var e=this.savedTables[this.savedTablesIdx];e&&(this.update(e),this.updateStateNavigation())},e.prototype.showMeasurement=function(e,t){0!==e.length&&(this.update(e),t&&t.save&&(this.saveState(),this.updateStateNavigation()))},e.prototype.updateStateNavigation=function(){var e=this,t=this.element.querySelector(".tabs");if(this.savedTables.length>=2){var n=document.createElement("button");n.setAttribute("title","Go back to the previous table"),0==this.savedTablesIdx&&(n.disabled=!0),n.addEventListener("click",(function(){return e.showPreviousMeasurement()}),!1),n.innerText="<",t.appendChild(n);var a=document.createElement("button");a.setAttribute("title","Go to the next table"),0!=this.savedTables.length&&this.savedTablesIdx!=this.savedTables.length-1||(a.disabled=!0),a.addEventListener("click",(function(){return e.showNextMeasurement()}),!1),a.innerText=">",t.appendChild(a)}},e.prototype.saveState=function(){0===this.savedTables.length?this.savedTables.push(this.tables):this.tables!==this.savedTables[this.savedTablesIdx]&&(this.savedTables=this.savedTables.slice(0,this.savedTablesIdx+1),this.savedTables.push(this.tables),this.savedTablesIdx=this.savedTables.length-1)},e.prototype.update=function(t){this.tables=t,this.curTableIdx=0;var n=t[this.curTableIdx];this.element.innerHTML="";var a=this.createTabs();this.element.appendChild(a);var o=document.createElement("table");o.style.borderColor=n.color;var i=e.createTableHeader(n),r=document.createElement("tbody");o.appendChild(i),o.appendChild(r),this.element.appendChild(o),this.updateRows(),this.show()},e.prototype.createTabs=function(){var t=document.createElement("div");t.setAttribute("class","tabs");var n=[],a=this;return this.tables.forEach((function(o,i){var r=document.createElement("button");r.setAttribute("title",o.name),r.innerText=o.name,r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.style.whiteSpace="nowrap",r.style.maxWidth="20%",r.addEventListener("click",(function(){a.curTableIdx=i,a.element.querySelector("table").style.borderColor=o.color;var t=a.element.querySelector("thead");t.parentNode.replaceChild(e.createTableHeader(o),t),a.updateRows()}),!1),r.style.backgroundColor=o.color;var s=rt.I.standardizeColor(o.color),l=rt.I.hexToRgb(s);l="rgb("+l.r+", "+l.g+", "+l.b+")";var c=rt.I.getLabelColorForBackground(l);r.style.color=c,n.push(r),t.appendChild(r)})),t},e.createTableHeader=function(e){for(var t=document.createElement("thead"),n="<tr>",a=0,o=Object.entries(e.fields);a<o.length;a++){var i=wt(o[a],2);i[0];n+="<th>"+i[1].name+"</th>"}return n+="</thead>",t.innerHTML=n,t},e.prototype.show=function(){this.element.style.visibility="visible"},e.prototype.hide=function(){this.savedTables=[],this.savedTablesIdx=0,this.curTableIdx=0,this.element.style.visibility="hidden"},e}(),It=function(){function e(e){this.$div=t()(e)}return e.prototype.update=function(e,t,n,a){var o=new f(e,t,7);n==y.J2000?this.$div.html(o.format("s/")):(y.J2000d,this.$div.html(o.format("d/"))),this.$div.toggleClass("aladin-reticleColor",a)},e}();function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ot={update:function(e){var t=Ot.LAYERS.find((function(t){var n=t.id;return e.id.endsWith(n)})),n=kt(kt({},e.colorCfg.get()),{},{imgFormat:e.imgFormat,longitudeReversed:e.longitudeReversed});t?t.options=n:Ot.LAYERS.push({id:e.id,name:e.name,url:e.url,options:n,subtype:e.subtype})},LAYERS:[{id:"P/2MASS/color",name:"2MASS colored",url:"https://alasky.cds.unistra.fr/2MASS/Color",maxOrder:9,subtype:"survey"},{id:"P/DSS2/color",name:"DSS colored",url:"https://alasky.cds.unistra.fr/DSS/DSSColor",maxOrder:9,subtype:"survey"},{id:"P/DSS2/red",name:"DSS2 Red (F+R)",url:"https://alasky.cds.unistra.fr/DSS/DSS2Merged",maxOrder:9,subtype:"survey",options:{minCut:1e3,maxCut:1e4,colormap:"magma",stretch:"Linear",imgFormat:"fits"}},{id:"P/DM/I/350/gaiaedr3",name:"Density map for Gaia EDR3 (I/350/gaiaedr3)",url:"https://alasky.cds.unistra.fr/ancillary/GaiaEDR3/density-map",maxOrder:7,subtype:"survey",options:{minCut:0,maxCut:12e3,stretch:"asinh",colormap:"rdylbu",imgFormat:"fits"}},{id:"P/PanSTARRS/DR1/g",name:"PanSTARRS DR1 g",url:"https://alasky.cds.unistra.fr/Pan-STARRS/DR1/g",maxOrder:11,subtype:"survey",options:{minCut:-34,maxCut:7e3,stretch:"asinh",colormap:"redtemperature",imgFormat:"fits"}},{id:"P/PanSTARRS/DR1/color-z-zg-g",name:"PanSTARRS DR1 color",url:"https://alasky.cds.unistra.fr/Pan-STARRS/DR1/color-z-zg-g",maxOrder:11,subtype:"survey"},{id:"P/DECaPS/DR1/color",name:"DECaPS DR1 color",url:"https://alasky.cds.unistra.fr/DECaPS/DR1/color",maxOrder:11,subtype:"survey"},{id:"P/Fermi/color",name:"Fermi color",url:"https://alasky.cds.unistra.fr/Fermi/Color",maxOrder:3,subtype:"survey"},{id:"P/Finkbeiner",name:"Halpha",url:"https://alasky.cds.unistra.fr/FinkbeinerHalpha",maxOrder:3,subtype:"survey",options:{minCut:-10,maxCut:800,colormap:"rdbu",imgFormat:"fits"}},{id:"P/GALEXGR6_7/NUV",name:"GALEXGR6_7 NUV",url:"http://alasky.cds.unistra.fr/GALEX/GALEXGR6_7_NUV/",maxOrder:8,subtype:"survey"},{id:"P/IRIS/color",name:"IRIS colored",url:"https://alasky.cds.unistra.fr/IRISColor",maxOrder:3,subtype:"survey"},{id:"P/Mellinger/color",name:"Mellinger colored",url:"https://alasky.cds.unistra.fr/MellingerRGB",maxOrder:4,subtype:"survey"},{id:"P/SDSS9/color",name:"SDSS9 colored",url:"https://alasky.cds.unistra.fr/SDSS/DR9/color",maxOrder:10,subtype:"survey"},{id:"P/SDSS9/g",name:"SDSS9 band-g",url:"https://alasky.cds.unistra.fr/SDSS/DR9/band-g",maxOrder:10,subtype:"survey",options:{stretch:"asinh",colormap:"redtemperature",imgFormat:"fits"}},{id:"P/SPITZER/color",name:"IRAC color I1,I2,I4 - (GLIMPSE, SAGE, SAGE-SMC, SINGS)",url:"http://alasky.cds.unistra.fr/Spitzer/SpitzerI1I2I4color/",maxOrder:9,subtype:"survey"},{id:"P/VTSS/Ha",name:"VTSS-Ha",url:"https://alasky.cds.unistra.fr/VTSS/Ha",maxOrder:3,subtype:"survey",options:{minCut:-10,maxCut:100,colormap:"grayscale",imgFormat:"fits"}},{id:"xcatdb/P/XMM/PN/color",name:"XMM PN colored",url:"https://alasky.cds.unistra.fr/cgi/JSONProxy?url=https://saada.unistra.fr/PNColor",maxOrder:7,subtype:"survey"},{id:"P/allWISE/color",name:"AllWISE color",url:"https://alasky.cds.unistra.fr/AllWISE/RGB-W4-W2-W1/",maxOrder:8,subtype:"survey"},{id:"P/GLIMPSE360",name:"GLIMPSE360",url:"https://alasky.cds.unistra.fr/cgi/JSONProxy?url=https://www.spitzer.caltech.edu/glimpse360/aladin/data",subtype:"survey",options:{maxOrder:9,imgFormat:"jpg",minOrder:3}}],getAvailableLayers:function(){return Ot.LAYERS}},Lt=function(){function e(e){this.properties=e,this.id=this.getID(),this.obsTitle=e.obs_title,this.frame=e.hips_frame,this.order=parseInt(e.hips_order),this.clientSortKey=e.client_sort_key,this.tileFormats=e.hasOwnProperty("hips_tile_format")&&e.hips_tile_format.split(" "),this.urls=[],this.urls.push(e.hips_service_url);for(var t=1;e.hasOwnProperty("hips_service_url_"+t);)this.urls.push(e["hips_service_url_"+t]),t++;this.clientApplications=e.client_application}return e.prototype={getServiceURLs:function(e){e=!0===e},getID:function(){if(this.properties.hasOwnProperty("ID"))return this.properties.ID;var e=null;return this.properties.hasOwnProperty("creator_did")&&(e=this.properties.creator_did),null==e&&this.properties.hasOwnProperty("publisher_did")&&(e=this.properties.publisher_did),null!=e&&("ivo://"===e.slice(0,6)&&(e=e.slice(6)),e=e.replace(/\?/g,"/")),e}},e.parseHiPSProperties=function(e){if(null==e)return null;for(var n={},a=(e=e.replace(/[\r]/g,"")).split("\n"),o=0;o<a.length;o++){var i=t().trim(a[o]);if("#"!==i.slice(0,1)){var r=i.indexOf("=");if(!(r<0)){var s=t().trim(i.slice(0,r)),l=t().trim(i.slice(r+1));n[s]=l}}}return n},e.fromURL=function(t,n){var a,o;"properties"===t.slice(-10)?a=(o=t).slice(0,-11):("/"===t.slice(-1)&&(t=t.slice(0,-1)),o=(a=t)+"/properties");var i=function(t){var o=e.parseHiPSProperties(t);o.hasOwnProperty("hips_service_url")||(o.hips_service_url=a),"function"==typeof n&&n(new e(o))};u.getAjaxObject(o,"GET","text",!1).done((function(e){i(e)})).fail((function(){u.getAjaxObject(o,"GET","text",!0).done((function(e){i(e)})).fail((function(){"function"==typeof n&&n(null)}))}))},e.fromProperties=function(t){return new e(t)},e}();function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Mt(){Mt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),r=new C(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var r=n.delegate;if(r){var s=g(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function d(){}function f(){}function p(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,o)&&(h=v);var _=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,r,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Dt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):t.resolve(d).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){a(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(_,"constructor",p),s(p,"constructor",f),f.displayName=s(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,r,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var r=new x(l(t,n,a,o),i);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(_),s(_,r,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var o=a.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Et(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,o)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){Et(i,a,o,r,s,"next",e)}function s(e){Et(i,a,o,r,s,"throw",e)}r(void 0)}))}}function Rt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getAllHiPSes",value:function(){var t=this;return void 0===this._allHiPSes&&zt(Mt().mark((function n(){var a;return Mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={expr:"dataproduct_type=image||dataproduct_type=cube",get:"record",fmt:"json",fields:"ID,hips_initial_fov,hips_initial_ra,hips_initial_dec,hips_pixel_bitpix,hips_creator,hips_copyright,hips_frame,hips_order,hips_order_min,hips_tile_width,hips_tile_format,hips_pixel_cut,obs_title,obs_description,obs_copyright,obs_regime,hips_data_range,hips_service_url"},n.next=3,u.loadFromMirrors(e.MIRRORS_HTTPS,{data:a}).then((function(e){return e.json()}));case 3:t._allHiPSes=n.sent;case 4:case"end":return n.stop()}}),n)})))(),this._allHiPSes}},{key:"getAllCatalogHiPSes",value:function(){var t=this;return void 0===this._allCatalogHiPSes&&zt(Mt().mark((function n(){var a;return Mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={expr:"dataproduct_type=catalog",get:"record",fmt:"json",fields:"ID,hips_copyright,hips_order,hips_order_min,obs_title,obs_description,obs_copyright,obs_regime,cs_service_url,hips_service_url"},n.next=3,u.loadFromMirrors(e.MIRRORS_HTTPS,{data:a}).then((function(e){return e.json()}));case 3:t._allCatalogHiPSes=n.sent;case 4:case"end":return n.stop()}}),n)})))(),this._allCatalogHiPSes}}],(n=null)&&Rt(t.prototype,n),a&&Rt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Ft(){Ft=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),r=new C(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var r=n.delegate;if(r){var s=g(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function d(){}function f(){}function p(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,o)&&(h=v);var _=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,r,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==jt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):t.resolve(d).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){a(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(_,"constructor",p),s(p,"constructor",f),f.displayName=s(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,r,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var r=new x(l(t,n,a,o),i);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(_),s(_,r,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var o=a.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function qt(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,o)}function Ht(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){qt(i,a,o,r,s,"next",e)}function s(e){qt(i,a,o,r,s,"throw",e)}r(void 0)}))}}Pt(Nt,"MIRRORS_HTTP",["http://alaskybis.unistra.fr/MocServer/query","http://alasky.unistra.fr/MocServer/query"]),Pt(Nt,"MIRRORS_HTTPS",["https://alaskybis.unistra.fr/MocServer/query","https://alasky.unistra.fr/MocServer/query"]),Pt(Nt,"_allHiPSes",void 0),Pt(Nt,"_allCatalogHiPSes",void 0);var Ut={};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Jt(){Jt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),r=new C(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var r=n.delegate;if(r){var s=g(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function d(){}function f(){}function p(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,o)&&(h=v);var _=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,r,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Gt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):t.resolve(d).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){a(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(_,"constructor",p),s(p,"constructor",f),f.displayName=s(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,r,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var r=new x(l(t,n,a,o),i);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(_),s(_,r,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var o=a.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Kt(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,o)}function Xt(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){Kt(i,a,o,r,s,"next",e)}function s(e){Kt(i,a,o,r,s,"throw",e)}r(void 0)}))}}Ut.fetchFromID=function(){var e=Ht(Ft().mark((function e(t){var n,a,o,i;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={get:"record",fmt:"json",ID:"*"+t+"*"},e.next=3,u.loadFromMirrors(Nt.MIRRORS_HTTPS,{data:n}).then((function(e){return e.json()}));case 3:if((a=e.sent)&&0!=a.length){e.next=8;break}throw"No surveys matching have been found for the id: "+t;case 8:return a.length>1?(i=a.find((function(e){return e.ID===t})))?o=i:(o=a[0],console.warn("Multiple surveys are matching, please choose one. The chosen one is: "+o)):o=a[0],e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ut.fetchFromUrl=function(){var e=Ht(Ft().mark((function e(t){var n,a,o,i;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=new URL(t),e.next=14;break;case 4:e.prev=4,e.t0=e.catch(0),e.prev=6,t=u.getAbsoluteURL(t),t=new URL(t),e.next=14;break;case 11:throw e.prev=11,e.t1=e.catch(6),e.t1;case 14:return n=t.toString(),"/"===(a=n).slice(-1)&&(a=a.substr(0,a.length-1)),a+="/properties",a=u.getAbsoluteURL(a),a=u.fixURLForHTTPS(a),o={},u.requestCORSIfNotSameOrigin(a)&&(o={mode:"cors"}),e.next=24,fetch(a,o).then((function(e){return 404==e.status?Promise.reject("Url points to nothing"):e.text()})).then((function(e){var t=Lt.parseHiPSProperties(e);if(!t)throw"No surveys matching at this url: "+rootURL;return t.hips_service_url=n,t}));case 24:return i=e.sent,e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[0,4],[6,11]])})));return function(t){return e.apply(this,arguments)}}(),Ut.getFasterMirrorUrl=function(e){var t=function(e){e=u.fixURLForHTTPS(e);var t=new AbortController,n=Date.now(),a=setTimeout((function(){return t.abort()}),2e3);return fetch(e+"/properties",{cache:"no-store",signal:t.signal,mode:"cors"}).then((function(t){var o=Date.now()-n;return clearTimeout(a),{duration:o,baseUrl:e,validRequest:!0}})).catch((function(t){return{duration:2e3,baseUrl:e,validRequest:!1}}))},n=[];n.push(t(e.hips_service_url));for(var a=1;e.hasOwnProperty("hips_service_url_"+a.toString());){var o=e["hips_service_url_"+a.toString()];n.push(t(o)),a+=1}return Promise.all(n).then((function(e){var t,n,a=e.filter((function(e){return!0===e.validRequest}));return a.sort((function(e,t){return e.duration-t.duration})),a.length>=2&&(a[1].duration-a[0].duration)/a[0].duration<.2?a[(t=0,n=1,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t)].baseUrl:a[0].baseUrl})).then((function(e){return u.fixURLForHTTPS(e)}))};var Qt={tileSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.tileSize||t.hips_tile_width&&+t.hips_tile_width||512;return n&n-1!=0&&(n=512),n},frame:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.cooFrame||t.hips_body&&"ICRSd"||t.hips_frame;return"ICRS"==n||"ICRSd"==n||"equatorial"==n||"j2000"==n?n="ICRS":"galactic"==n?n="GAL":void 0===n?(n="ICRS",console.warn('No cooframe given. Coordinate systems supported: "ICRS", "ICRSd", "j2000" or "galactic". ICRS is chosen by default')):(n="ICRSd",console.warn("Invalid cooframe given: "+cooFrame+'. Coordinate systems supported: "ICRS", "ICRSd", "j2000" or "galactic". ICRS is chosen by default')),n},maxOrder:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.maxOrder||t.hips_order&&+t.hips_order;return n},minOrder:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e.minOrder||t.hips_order_min&&+t.hips_order_min||0;return n},formats:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hips_tile_format||"jpeg";return n=n.split(" ").map((function(e){return e.toLowerCase()}))},initialFov:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hips_initial_fov&&+t.hips_initial_fov;return n&&n<2777777e-11&&(n=360),n},skyFraction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.moc_sky_fraction&&+t.moc_sky_fraction||0;return n},cutouts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hips_pixel_cut&&t.hips_pixel_cut.split(" "),a=n&&parseFloat(n[0]),o=n&&parseFloat(n[1]);return[a,o]},bitpix:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hips_pixel_bitpix&&+t.hips_pixel_bitpix;return n},dataproductSubtype:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dataproduct_subtype||"color";return n=n.split(" ").map((function(e){return e.toLowerCase()}))},isPlanetaryBody:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==t.hips_body}},$t=function(){function e(e,t,n,a,o){this.view=a,this.wasm=a.wasm,this.added=!1,this.id=e,this.name=t,this.subtype="survey",this.colorCfg=new $e(o),this.properties={};var i=this;i.query=Xt(Jt().mark((function t(){var a,r,s,l,c,d,f,p,h,m,v,_,x,g,b,w,C,A,I,S,k;return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,t.next=4,Ut.fetchFromUrl(n).catch(function(){var t=Xt(Jt().mark((function t(n){return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ut.fetchFromID(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}());case 4:w=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),t.t0;case 10:if(i.name=i.name||w.obs_title,w.hips_service_url){t.next=13;break}throw"no valid service URL for retrieving the tiles";case 13:n=u.fixURLForHTTPS(w.hips_service_url),Ut.getFasterMirrorUrl(w).then((function(e){i.setUrl(e)})),a=Qt.maxOrder(o,w),s=Qt.tileSize(o,w),l=Qt.formats(o,w),h=Qt.minOrder(o,w),r=Qt.frame(o,w),p=Qt.skyFraction(o,w),m=Qt.initialFov(o,w),v=+w.hips_initial_ra,_=+w.hips_initial_dec,C=Qt.cutouts(o,w),A=Zt(C,2),c=A[0],d=A[1],f=Qt.bitpix(o,w),b=Qt.dataproductSubtype(o,w),g=Qt.isPlanetaryBody(o,w),w.hips_body&&(x=w.hips_body),void 0!==w.hips_body?i.view.options.showFrame&&(i.view.aladin.setFrame("J2000d"),document.querySelectorAll(".aladin-location > .aladin-frameChoice")[0].innerHTML='<option value="'+y.J2000d.label+'" selected="selected">J2000d</option>'):i.view.options.showFrame&&(I=y.fromString(i.view.options.cooFrame,y.J2000),document.querySelectorAll(".aladin-location > .aladin-frameChoice")[0].innerHTML='<option value="'+y.J2000.label+'" '+(I==y.J2000?'selected="selected"':"")+'>J2000</option><option value="'+y.J2000d.label+'" '+(I==y.J2000d?'selected="selected"':"")+'>J2000d</option><option value="'+y.GAL.label+'" '+(I==y.GAL?'selected="selected"':"")+">GAL</option>"),t.next=38;break;case 35:throw t.prev=35,t.t1=t.catch(0),t.t1;case 38:if(i.properties={url:n,maxOrder:a,frame:r,tileSize:s,formats:l,minCutout:c,maxCutout:d,bitpix:f,skyFraction:p,minOrder:h,hipsInitialFov:m,hipsInitialRa:v,hipsInitialDec:_,dataproductSubtype:b,isPlanetaryBody:g,hipsBody:x},S=!1,o&&!0===o.longitudeReversed&&(S=!0),i.properties.hipsBody&&(S=!0),i.longitudeReversed=S,!(k=o&&o.imgFormat)){t.next=57;break}if("jpg"===(k=k.toLowerCase())&&(k="jpeg"),!("fits"===k&&l.indexOf("fits")<0)){t.next=49;break}throw i.name+" does not provide fits tiles";case 49:if(!("webp"===k&&l.indexOf("webp")<0)){t.next=51;break}throw i.name+" does not provide webp tiles";case 51:if(!("png"===k&&l.indexOf("png")<0)){t.next=53;break}throw i.name+" does not provide png tiles";case 53:if(!("jpeg"===k&&l.indexOf("jpeg")<0)){t.next=55;break}throw i.name+" does not provide jpeg tiles";case 55:t.next=74;break;case 57:if(!(l.indexOf("png")>=0)){t.next=61;break}k="png",t.next=74;break;case 61:if(!(l.indexOf("webp")>=0)){t.next=65;break}k="webp",t.next=74;break;case 65:if(!(l.indexOf("jpeg")>=0)){t.next=69;break}k="jpeg",t.next=74;break;case 69:if(!(l.indexOf("fits")>=0)){t.next=73;break}k="fits",t.next=74;break;case 73:throw"Unsupported format(s) found in the properties: "+l;case 74:return i.imgFormat=k,Ot.update(i),t.abrupt("return",i);case 77:case"end":return t.stop()}}),t,null,[[0,35],[1,7]])})))()}e.prototype.isReady=function(){return this.added},e.prototype.setUrl=function(e){this.properties.url!==e&&(console.info("Change url of ",this.id," from ",this.properties.url," to ",e),this.added&&this.wasm.setHiPSUrl(this.properties.url,e),this.properties.url=e)},e.prototype.isPlanetaryBody=function(){return this.properties.isPlanetaryBody},e.prototype.setImageFormat=function(e){var n=this;n.query.then((function(){t(n,(function(){var t=e.toLowerCase();if("fits"!==t&&"png"!==t&&"jpg"!==t&&"jpeg"!==t&&"webp"!==t)throw'Formats must lie in ["fits", "png", "jpg", "webp"]';if("jpg"===t&&(t="jpeg"),n.imgFormat!==t){var a=n.properties.formats;if("fits"===t&&a.indexOf("fits")<0)throw n.id+" does not provide fits tiles";if("webp"===t&&a.indexOf("webp")<0)throw n.id+" does not provide webp tiles";if("png"===t&&a.indexOf("png")<0)throw n.id+" does not provide png tiles";if("jpeg"===t&&a.indexOf("jpeg")<0)throw n.id+" does not provide jpeg tiles";n.imgFormat=t}}))}))},e.prototype.setOpacity=function(e){var n=this;t(n,(function(){n.colorCfg.setOpacity(e)}))},e.prototype.setBlendingConfig=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(this,(function(){e.colorCfg.setBlendingConfig(n)}))},e.prototype.setColormap=function(e,n){var a=this;t(this,(function(){a.colorCfg.setColormap(e,n)}))},e.prototype.setCuts=function(e,n){var a=this;t(this,(function(){a.colorCfg.setCuts(e,n)}))},e.prototype.setGamma=function(e){var n=this;t(this,(function(){n.colorCfg.setGamma(e)}))},e.prototype.setSaturation=function(e){var n=this;t(this,(function(){n.colorCfg.setSaturation(e)}))},e.prototype.setBrightness=function(e){var n=this;t(this,(function(){n.colorCfg.setBrightness(e)}))},e.prototype.setContrast=function(e){var n=this;t(this,(function(){n.colorCfg.setContrast(e)}))},e.prototype.metadata=function(){return Vt(Vt({},this.colorCfg.get()),{},{longitudeReversed:this.longitudeReversed,imgFormat:this.imgFormat})};var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t&&t();try{if(e.added){var n=e.metadata();e.wasm.setImageMetadata(e.layer,n),Qe.HIPS_LAYER_CHANGED.dispatchedTo(e.view.aladinDiv,{layer:e})}}catch(a){console.error(a)}};return e.prototype.add=function(e){return this.layer=e,this.wasm.addImageSurvey({layer:this.layer,properties:this.properties,meta:this.metadata()}),this.added=!0,Promise.resolve(this)},e.prototype.toggle=function(){0!=this.colorCfg.getOpacity()?this.colorCfg.setOpacity(0):this.colorCfg.setOpacity(this.prevOpacity)},e.prototype.setAlpha=e.prototype.setOpacity,e.prototype.setColorCfg=function(e){var n=this;t(this,(function(){n.colorCfg=e}))},e.prototype.getColorCfg=function(){return this.colorCfg},e.prototype.getOpacity=function(){return this.colorCfg.getOpacity()},e.prototype.getAlpha=e.prototype.getOpacity,e.prototype.readPixel=function(e,t){return this.wasm.readPixel(e,t,this.layer)},e.DEFAULT_SURVEY_ID="P/DSS2/color",e}(),en=function(){var e={GALACTIC_TO_J2000:[-.0548755604024359,.4941094279435681,-.867666148981161,-.8734370902479237,-.4448296299195045,-.1980763734646737,-.4838350155267381,.7469822444763707,.4559837762325372],J2000_TO_GALACTIC:[-.0548755604024359,-.873437090247923,-.4838350155267381,.4941094279435681,-.4448296299195045,.7469822444763707,-.867666148981161,-.1980763734646737,.4559837762325372],Transform:function(e,t){e[0]=e[0]*Math.PI/180,e[1]=e[1]*Math.PI/180;var n=new Array(Math.cos(e[0])*Math.cos(e[1]),Math.sin(e[0])*Math.cos(e[1]),Math.sin(e[1])),a=new Array(n[0]*t[0]+n[1]*t[1]+n[2]*t[2],n[0]*t[3]+n[1]*t[4]+n[2]*t[5],n[0]*t[6]+n[1]*t[7]+n[2]*t[8]),o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),i=new Array(0,0);i[1]=Math.asin(a[2]/o);var r=a[0]/o/Math.cos(i[1]),s=a[1]/o/Math.cos(i[1]);return i[0]=Math.atan2(s,r),i[0]<0&&(i[0]=i[0]+2*Math.PI),i[0]=180*i[0]/Math.PI,i[1]=180*i[1]/Math.PI,i},GalacticToJ2000:function(t){return e.Transform(t,e.GALACTIC_TO_J2000)},J2000ToGalactic:function(t){return e.Transform(t,e.J2000_TO_GALACTIC)}};return e}();function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}var nn=function(){var e={buildSimbadCSURL:function(e,t){e&&"object"===tn(e)&&("ra"in e&&"dec"in e&&(e=new f(e.ra,e.dec,7).format("s")));return"https://alasky.unistra.fr/cgi/simbad-flat/simbad-cs.py?target="+encodeURIComponent(e)+"&SR="+t+"&format=votable&SRUNIT=deg&SORTBY=nbref"},buildNEDPositionCSURL:function(e,t,n){return"https://ned.ipac.caltech.edu/cgi-bin/nph-objsearch?search_type=Near+Position+Search&of=xml_main&RA="+e+"&DEC="+t+"&SR="+n},buildNEDObjectCSURL:function(e,t){return"https://ned.ipac.caltech.edu/cgi-bin/nph-objsearch?search_type=Near+Name+Search&radius="+60*t+"&of=xml_main&objname="+e},buildVizieRCSURL:function(e,t,n,a){t&&"object"===tn(t)&&("ra"in t&&"dec"in t&&(t=new f(t.ra,t.dec,7).format("s")));var o=1e5;a&&a.hasOwnProperty("limit")&&u.isNumber(a.limit)&&(o=parseInt(a.limit));var i="https://vizier.unistra.fr/viz-bin/votable?-source="+e+"&-c="+encodeURIComponent(t)+"&-out.max="+o+"&-c.rd="+n;return i+="&-out.add=s_region"},buildSkyBotCSURL:function(e,t,n,a,o){var i="http://vo.imcce.fr/webservices/skybot/skybotconesearch_query.php?-from=AladinLite";if(i+="&RA="+encodeURIComponent(e),i+="&DEC="+encodeURIComponent(t),i+="&SR="+encodeURIComponent(n),i+="&EPOCH="+encodeURIComponent(a),o)for(var r in o)o.hasOwnProperty(r)&&(i+="&"+r+"="+encodeURIComponent(o[r]));return i}};return e}(),an=function(e){var t=document.createElement("div");t.classList.add("aladin-logo-container");var n=document.createElement("a");n.href="https://aladin.cds.unistra.fr/",n.title="Powered by Aladin Lite",n.target="_blank";var a=document.createElement("div");a.classList.add("aladin-logo"),n.appendChild(a),t.appendChild(n),e.appendChild(t)};function on(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var rn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aladin=n,this.mainDiv=document.createElement("div"),this.mainDiv.classList.add("aladin-projection-select"),t.appendChild(this.mainDiv),this._createComponent(),this._addListeners()}var n,a,o;return n=e,(a=[{key:"_createComponent",value:function(){var e=this;t()(this.mainDiv).append('<select title="Projection" class="aladin-selector"></select>'),this.selectProjection=t()(this.mainDiv).find("select"),this.selectProjection.empty(),i.forEach((function(n){e.selectProjection.append(t()("<option />").val(n).text(n))}));var n=this;this.selectProjection.change((function(){n.aladin.setProjection(t()(this).val())}))}},{key:"_addListeners",value:function(){var e=this;Qe.PROJECTION_CHANGED.listenedBy(this.aladin.aladinDiv,(function(t){e.selectProjection.val(t.detail.projection)}))}},{key:"show",value:function(){this.mainDiv.style.display="block"}},{key:"hide",value:function(){this.mainDiv.style.display="none"}}])&&on(n.prototype,a),o&&on(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(),sn=l(338),ln=l.n(sn);function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function dn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var fn=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentDiv=t,this.aladin=n,this.fnIdSelected=a,this._createComponent()}var n,a,o;return n=e,a=[{key:"_createComponent",value:function(){var e=this;this.mainDiv=document.createElement("div"),this.mainDiv.classList.add("aladin-dialog","aladin-cb-list"),this.mainDiv.style.display="block";var n="autocomplete-"+u.uuidv4();this.mainDiv.insertAdjacentHTML("afterbegin",'<a class="aladin-closeBtn">&times;</a><div class="aladin-box-title">Select Catalogue:</div><div class="aladin-box-content"><div class="aladin-label" for="'+n+'">By ID, title, keyword</div><input class="aladin-input" style="width:100%;" name="'+n+'" id="'+n+'" type="text" placeholder="Type keyword or VOTable URL" /><div class="aladin-row cone-search" style="font-size: 12px;"><div><input class="aladin-input" type="number" value="1.0" style="width: 4em;" maxlength="5" size="5"> <select class="aladin-selector" style="padding: 4px 0!important;"><option>deg<option>arcmin<option>arcsec</select> around view center</div><div>Limit to <input class="aladin-input" type="number" min="1" max="10000" value="1000" style="width: 5em;"> sources</div></div><div class="aladin-row"><div class="aladin-col"><div><button class="aladin-btn">Load cone</button></div></div><div class="hips aladin-col"><button class="aladin-btn">Load catalogue HiPS</button></div></div><div class="aladin-box-separator"></div><div class="aladin-label" for="'+n+'">By VOTable URL</div><input class="aladin-input" style="width:100%;" name="'+n+'" id="'+n+'" type="text" placeholder="Enter VOTable URL" /><div class="votable"><button class="aladin-btn">Load VOTable</button></div></div>'),this.parentDiv.appendChild(this.mainDiv),this.idInput=e.mainDiv.querySelectorAll("input")[0],this.votInput=e.mainDiv.querySelectorAll("input")[3],t()(this.idInput).on("change",(function(){e.idInput.blur()})),t()(this.votInput).on("change",(function(){e.votInput.blur()}));var a=cn(this.mainDiv.querySelectorAll(".aladin-btn"),3),o=a[0],i=a[1],r=a[2];this.divCS=this.mainDiv.querySelector(".cone-search"),this.divLoadHiPS=this.mainDiv.querySelector(".hips"),this.divLoadHiPS.style.display="none",t()(o).click((function(){var t=parseFloat(e.divCS.querySelector("div:nth-child(1) > input").value),n=e.divCS.querySelector("div:nth-child(1) > select").value,a=t;"arcmin"==n?a/=60:"arcsec"==n&&(a/=3600);var o=parseInt(e.divCS.querySelector("div:nth-child(2) > input").value),i=e.selectedItem.cs_service_url,r=cn(e.aladin.getRaDec(),2),s=r[0],l=r[1];e.fnIdSelected&&e.fnIdSelected("coneSearch",{id:e.idInput.value,baseURL:i,limit:o,radiusDeg:a,ra:s,dec:l}),e.idInput.value=null})),t()(i).click((function(){e.fnIdSelected&&e.fnIdSelected("hips",{id:e.idInput.value,hipsURL:e.selectedItem.hips_service_url}),e.idInput.value=null})),t()(r).click((function(){e.fnIdSelected&&e.fnIdSelected("votable",{url:e.votInput.value}),e.votInput.value=null}));var s=document.getElementById(n);Nt.getAllCatalogHiPSes(),ln()({input:s,minLength:3,fetch:function(e,t){e=e.toLowerCase();var n=Nt.getAllCatalogHiPSes().filter((function(t){var n=t.ID,a=t.obs_title||"",o=t.obs_description||"";return n.toLowerCase().includes(e)||a.toLowerCase().includes(e)||o.toLowerCase().includes(e)}));n.sort((function(t,n){var a=0,o=0;return t.ID.toLowerCase().includes(e)&&(a+=100),n.ID.toLowerCase().includes(e)&&(o+=100),t.obs_title.toLowerCase().includes(e)&&(a+=50),n.obs_title.toLowerCase().includes(e)&&(o+=50),t.obs_description.toLowerCase().includes(e)&&(a+=10),n.obs_description.toLowerCase().includes(e)&&(o+=10),t.hips_service_url&&(a+=20),n.hips_service_url&&(o+=20),a>o?-1:o>a?1:0})),t(n.slice(0,50))},onSelect:function(n){n.cs_service_url?t()(e.divCS).show():t()(e.divCS).hide(),n.hips_service_url?t()(e.divLoadHiPS).show():t()(e.divLoadHiPS).hide(),s.value=n.ID,e.selectedItem=n,s.blur()},customize:function(t,n,a,o){e.aladin.fullScreenBtn.hasClass("aladin-restore")&&e.parentDiv.appendChild(a)},render:function(e,t){var n=document.createElement("div");return n.innerHTML=(e.obs_title||"")+' - <span style="color: #ae8de1">'+e.ID+"</span>",n}});var l=cn(this.mainDiv.querySelectorAll(".aladin-closeBtn"),1)[0];t()(l).click((function(){e.hide()}))}},{key:"show",value:function(){this.mainDiv.style.display="block"}},{key:"hide",value:function(){this.mainDiv.style.display="none"}}],a&&dn(n.prototype,a),o&&dn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var vn=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentDiv=t,this.fnIdSelected=n,this.aladin=a,this._createComponent()}var n,a,o;return n=e,a=[{key:"_createComponent",value:function(){var e=this;this.mainDiv=document.createElement("div"),this.mainDiv.style.display="block",this.mainDiv.classList.add("aladin-dialog","aladin-layerBox","aladin-cb-list");var n="autocomplete-"+u.uuidv4();this.mainDiv.insertAdjacentHTML("afterbegin",'<a class="aladin-closeBtn">&times;</a><div class="aladin-box-title">Select image HiPS:</div><div class="aladin-box-content"><div class="aladin-label" for="'+n+'">By ID, title, keyword or URL</div><input class="aladin-input" style="width:100%" name="'+n+'" id="'+n+'" type="text" placeholder="Type ID, title, keyword or URL" /><br><div><button class="aladin-btn">Select HiPS</button><button class="aladin-btn">Load coverage</button></div></div>'),this.parentDiv.appendChild(this.mainDiv);var a=document.getElementById(n);t()(a).on("change",(function(){a.blur()})),Nt.getAllHiPSes(),ln()({input:a,fetch:function(e,t){e=e.toLowerCase();var n=Nt.getAllHiPSes().filter((function(t){return t.ID.toLowerCase().includes(e)||t.obs_title.toLowerCase().includes(e)}));n.sort((function(t,n){var a=0,o=0;return t.ID.toLowerCase().includes(e)&&(a+=100),n.ID.toLowerCase().includes(e)&&(o+=100),t.obs_title.toLowerCase().includes(e)&&(a+=50),n.obs_title.toLowerCase().includes(e)&&(o+=50),t.obs_description&&t.obs_description.toLowerCase().includes(e)&&(a+=10),n.obs_description&&n.obs_description.toLowerCase().includes(e)&&(o+=10),a>o?-1:o>a?1:0})),t(n.slice(0,50))},onSelect:function(t){e.selectedItem=t,a.value=t.ID,e.fnIdSelected&&e.fnIdSelected(t.ID),a.blur()},customize:function(t,n,a,o){e.aladin.fullScreenBtn.hasClass("aladin-restore")&&e.parentDiv.appendChild(a)},render:function(e,t){var n=document.createElement("div");return n.innerHTML=e.obs_title+' - <span style="color: #ae8de1">'+e.ID+"</span>",n}});var o=pn(this.mainDiv.querySelectorAll(".aladin-btn"),2),i=o[0],r=o[1],s=pn(this.mainDiv.querySelectorAll(".aladin-closeBtn"),1)[0];t()(s).click((function(){e.hide()})),t()(i).click((function(){var t=e.mainDiv.querySelectorAll("input")[0];t&&e.fnIdSelected&&e.fnIdSelected(t.value),t.value=""})),t()(r).click((function(){var t,n=e.mainDiv.querySelectorAll("input")[0];t=n.value.startsWith("http")?n.value+"/Moc.fits":e.selectedItem.hips_service_url+"/Moc.fits",t=u.fixURLForHTTPS(t);var a=A.MOCFromURL(t);e.aladin.addMOC(a)}))}},{key:"show",value:function(){this.mainDiv.style.display="block"}},{key:"hide",value:function(){this.mainDiv.style.display="none"}}],a&&mn(n.prototype,a),o&&mn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function _n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function xn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var gn=function(){function e(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aladin=n,this.layer=a,this.hidden=!1,this.lastOpacity=1,this.headerDiv=t()('<div class="aladin-layer"><div class="aladin-layer-header" style="border-radius: 4px"><button class="aladin-btn-small aladin-indicatorBtn right-triangle" title="Open the color panel"></button><select class="aladin-selector aladin-layerSelection"></select><button class="aladin-btn-small aladin-layer-hide" type="button" title="Hide this layer">👁️</button><button class="aladin-btn-small aladin-HiPSSelector" type="button" title="Search for a specific HiPS">🔍</button><button class="aladin-btn-small aladin-delete-layer" type="button" title="Delete this layer">❌</button></div></div>'),"fits"===this.layer.subtype)&&this.headerDiv[0].querySelector(".aladin-layerSelection").after(t()('<button class="aladin-btn-small aladin-layer-focuson" type="button" title="Focus on this layer">🎯</button>')[0]);if("base"===this.layer.layer){var o=this.headerDiv[0].querySelector(".aladin-delete-layer");o.disabled=!0,o.style.backgroundColor="lightgray",o.style.borderColor="gray",o.style.color="transparent",o.style.textShadow="0 0 0 gray"}var i,r="",s=_n(this.aladin.wasm.getAvailableColormapList());try{for(s.s();!(i=s.n()).done;){r+="<option>"+i.value+"</option>"}}catch(c){s.e(c)}finally{s.f()}this.cmap="native",this.color="#ff0000",this.mainDiv=t()('<div class="aladin-frame" style="display:none; padding: 0px 4px"><div class="aladin-options">  <div class="row"><div class="col-label">Colormap</div><div class="col-input"><select class="aladin-selector colormap-selector">'+r+'</select></div></div>  <label><div class="row"><div class="col-label">Reverse</div><div class="col-input"><input type="checkbox" class="reversed aladin-input"></div></div></label>  <div class="row"><div class="col-label"><label>Stretch</label></div><div class="col-input"><select class="aladin-selector stretch"><option>pow2</option><option selected>linear</option><option>sqrt</option><option>asinh</option><option>log</option></select></div></div>  <div class="row"><div class="col-label"><label>Format</label></div><div class="col-input"><select class="aladin-selector format"></select></div></div>  <div class="row"><div class="col-label"><label>Min cut</label></div><div class="col-input"><input type="number" class="aladin-input min-cut"></div></div>  <div class="row"><div class="col-label"><label>Max cut</label></div><div class="col-input"><input type="number" class="aladin-input max-cut"></div></div>  <div class="row"><div class="col-label"><label>Gamma</label></div><div class="col-input"><input class="aladin-input gamma" type="number" value="1.0" min="0.1" max="10.0" step="0.01"></div></div>  <div class="row"><div class="col-label"><label>Color Sat.</label></div><div class="col-input"><input class="aladin-input saturation" type="range" value="0.0" min="-1.0" max="1.0" step="0.01"></div></div>  <div class="row"><div class="col-label"><label>Contrast</label></div><div class="col-input"><input class="aladin-input contrast" type="range" value="0.0" min="-1.0" max="1.0" step="0.01"></div></div>  <div class="row"><div class="col-label"><label>Brightness</label></div><div class="col-input"><input class="aladin-input brightness" type="range" value="0.0" min="-1.0" max="1.0" step="0.01"></div></div>  <div class="row"><div class="col-label"><label>Blending mode</label></div><div class="col-input"><select class="aladin-selector blending"><option>additive</option><option selected>default</option></select></div></div>  <div class="row"><div class="col-label"><label>Opacity</label></div><div class="col-input"><input class="aladin-input opacity" type="range" min="0" max="1" step="0.01"></div></div></div> </div>'),this._addListeners(),this._updateHiPSLayerOptions();var l=this;this.layerChangedListener=function(e){var t=e.detail.layer;t.layer===l.layer.layer&&(l.layer=t,l._updateHiPSLayerOptions()),l._updateLayersDropdownList()},Qe.HIPS_LAYER_CHANGED.listenedBy(this.aladin.aladinDiv,this.layerChangedListener)}var n,a,o;return n=e,(a=[{key:"destroy",value:function(){Qe.HIPS_LAYER_CHANGED.remove(this.aladin.aladinDiv,this.layerChangedListener)}},{key:"_addListeners",value:function(){var e=this,t=this.headerDiv.find(".aladin-indicatorBtn");t.off("click"),t.on("click",(function(){t.hasClass("right-triangle")?(t.removeClass("right-triangle"),t.addClass("down-triangle"),e.mainDiv.slideDown(300)):(t.removeClass("down-triangle"),t.addClass("right-triangle"),e.mainDiv.slideUp(300))})),this.headerDiv.off("click"),this.headerDiv.on("click",(function(){e.aladin.aladinDiv.dispatchEvent(new CustomEvent("select-layer",{detail:e}))})),e._updateLayersDropdownList();var n=this.headerDiv.find(".aladin-layerSelection");n.off("change"),n.on("change",(function(t){var a,o=Ot.LAYERS[n[0].selectedIndex];a="fits"===o.subtype?e.aladin.createImageFITS(o.url,o.name,o.options):e.aladin.createImageSurvey(o.id,o.name,o.url,void 0,o.maxOrder,o.options),e.hidden&&a.setAlpha(0),e.aladin.setOverlayImageLayer(a,e.layer.layer)}));var a=this.headerDiv.find(".aladin-HiPSSelector");a.off("click"),a.on("click",(function(){e.hipsSelector||(e.hipsSelector=new vn(e.aladin.aladinDiv,(function(t){var n=e.layer.layer;e.aladin.setOverlayImageLayer(t,n)}),e.aladin)),e.hipsSelector.show()}));var o=this.headerDiv.find(".aladin-delete-layer");o.off("click"),o.on("click",(function(){var t=new CustomEvent("remove-layer",{detail:e.layer.layer});e.aladin.aladinDiv.dispatchEvent(t)}));var i=this.headerDiv.find(".aladin-layer-hide");i.off("click"),i.on("click",(function(){e.hidden=!e.hidden;var t=e.mainDiv.find(".opacity").eq(0),n=0;e.hidden?(e.lastOpacity=e.layer.getOpacity(),i.text("")):(n=e.lastOpacity,i.text("👁️")),t.val(n),t.get(0).disabled=e.hidden,e.layer.setOpacity(n)}));var r=this.headerDiv.find(".aladin-layer-focuson");r&&(r.off("click"),r.on("click",(function(){e.layer.focusOn()})));var s=this.mainDiv.find(".blending").eq(0);s.off("change"),s.change((function(){var t=s.val();e.layer.setBlendingConfig("additive"===t)}));var l=this.mainDiv.find(".format").eq(0),c=this.mainDiv.find(".min-cut").eq(0),u=this.mainDiv.find(".max-cut").eq(0);l.off("change"),l.on("change",(function(){var t=l.val();e.layer.setImageFormat(t);var n=0,a=1;"fits"===t&&(n=e.layer.properties.minCutout,a=e.layer.properties.maxCutout),e.layer.setCuts(n,a),c.val(parseFloat(n.toFixed(5))),u.val(parseFloat(a.toFixed(5)))})),c.off("change blur"),u.off("change blur"),c.add(u).on("change blur",(function(t){var n=parseFloat(c.val()),a=parseFloat(u.val());isNaN(n)||isNaN(a)||e.layer.setCuts(n,a)}));var d=this.mainDiv.find(".colormap-selector").eq(0),f=this.mainDiv.find(".stretch").eq(0),p=this.mainDiv.find(".reversed").eq(0);p.off("change"),d.off("change"),f.off("change"),d.add(p).add(f).change((function(){var t=f.val(),n=p[0].checked,a=d.val();e.layer.setColormap(a,{reversed:n,stretch:t})}));var h=e.mainDiv.find(".opacity").eq(0);h.off("input"),h.on("input",(function(){var t=+h.val();e.layer.setOpacity(t)}));var m=e.mainDiv.find(".gamma").eq(0);m.off("change blur"),m.on("change blur",(function(){var t=parseFloat(m.val())||1;e.layer.setGamma(t);var n=e.layer.getColorCfg().getGamma();t!==n&&m.val(n)}));var v=e.mainDiv.find(".saturation").eq(0);v.off("input"),v.on("input",(function(t){var n=parseFloat(v.val())||0;e.layer.setSaturation(n);var a=e.layer.getColorCfg().getSaturation();n!==a&&v.val(a)}));var _=e.mainDiv.find(".contrast").eq(0);_.off("input"),_.on("input",(function(t){var n=parseFloat(_.val())||0;e.layer.setContrast(n);var a=e.layer.getColorCfg().getContrast();n!==a&&_.val(a)}));var y=e.mainDiv.find(".brightness").eq(0);y.off("input"),y.on("input",(function(t){var n=parseFloat(y.val())||0;e.layer.setBrightness(n);var a=e.layer.getColorCfg().getBrightness();n!==a&&y.val(a)}))}},{key:"_updateHiPSLayerOptions",value:function(){var e=this.mainDiv.find(".row").eq(0),n=this.mainDiv.find(".row").eq(1),a=this.mainDiv.find(".row").eq(2),o=(this.mainDiv.find(".row").eq(3),this.mainDiv.find(".row").eq(4)),i=this.mainDiv.find(".row").eq(5),r=this.mainDiv.find(".reversed").eq(0),s=this.mainDiv.find(".colormap-selector").eq(0),l=this.mainDiv.find(".stretch").eq(0),c=this.mainDiv.find(".format").eq(0),u=this.mainDiv.find(".opacity").eq(0),d=this.mainDiv.find(".gamma").eq(0),f=this.mainDiv.find(".contrast").eq(0),p=this.mainDiv.find(".brightness").eq(0),h=this.mainDiv.find(".saturation").eq(0),m=this.mainDiv.find(".blending").eq(0),v=this.mainDiv.find(".min-cut").eq(0),_=this.mainDiv.find(".max-cut").eq(0);c.empty(),this.layer.properties.formats.forEach((function(e){c.append(t()("<option>",{value:e,text:e}))}));var y=this.layer.getColorCfg(),x=y.colormap,g=y.reversed,b=y.stretch,w=this.layer.imgFormat;c.val(w);var C=y.getBlendingConfig();m.val(C?"additive":"default"),e[0].style.display="flex",n[0].style.display="flex",a[0].style.display="flex",y.minCut?parseFloat(v.val())!=y.minCut&&v.val(parseFloat(y.minCut.toFixed(5))):v.val(0),o[0].style.display="flex",y.maxCut?parseFloat(_.val())!=y.maxCut&&_.val(parseFloat(y.maxCut.toFixed(5))):_.val(0),i[0].style.display="flex";var A=y.getOpacity();u.val(A);var I=y.getGamma();d.val(I);var S=y.getSaturation();h.val(S);var k=y.getBrightness();p.val(k);var T=y.getContrast();f.val(T),s.val(x),this.cmap=x,r.prop("checked",g),l.val(b)}},{key:"_updateLayersDropdownList",value:function(){var e=this,n=this.headerDiv.find(".aladin-layerSelection"),a=Ot.LAYERS.sort((function(e,t){return e.order?e.maxOrder&&e.maxOrder>t.maxOrder?1:-1:e.name>t.name?1:-1}));n.empty(),this.layer&&a.forEach((function(a){var o=e.layer.id.endsWith(a.id);n.append(t()("<option />").attr("selected",o).val(a.id).text(a.name))}))}},{key:"attachTo",value:function(e){this.headerDiv.append(this.mainDiv),e.append(this.headerDiv),this._addListeners()}},{key:"show",value:function(){this.mainDiv.style.display="block"}},{key:"hide",value:function(){this.headerDiv.style.display="none",this.mainDiv.style.display="none"}}])&&xn(n.prototype,a),o&&xn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function bn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var wn=function(){function e(n,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aladin=a,this.view=o,this.mainDiv=document.createElement("div"),this.mainDiv.style.display="none",this.mainDiv.classList.add("aladin-box","aladin-layerBox","aladin-cb-list"),this.backgroundColorInput=t()('<input type="color">'),this.aladinDiv=n,n.appendChild(this.mainDiv),this.imgLayers=new Map,this.backgroundColor=this.aladin.getBackgroundColor();var i=this;this.unselectAllLayers=function(){i.aladin.getImageOverlays().forEach((function(e){var t=i.imgLayers.get(e).headerDiv[0];t.style.backgroundColor="#f2f2f2",t.querySelector(".aladin-layer-header").style.backgroundColor="#f2f2f2"}))},this.selectLayer=function(e){var t=e.layer.layer,n=e.headerDiv[0];n.style.backgroundColor="lightgray",n.querySelector(".aladin-layer-header").style.backgroundColor="lightgray",i.aladin.setActiveHiPSLayer(t)},this.updateSelectedLayer=function(){i.unselectAllLayers();var e=i.aladin.getActiveHiPSLayer(),t=i.imgLayers.get(e);i.selectLayer(t)},this._createComponent(),this._addListeners()}var n,a,o;return n=e,a=[{key:"_onAddCatalogue",value:function(){this.catalogSelector||(this.catalogSelector=new fn(this.aladinDiv,this.aladin,(function(e,t){if("coneSearch"==e){var n=void 0;if(t.baseURL.includes("/vizier."))n=A.catalogFromVizieR(t.id.replace("CDS/",""),t.ra+" "+t.dec,t.radiusDeg,{limit:t.limit,onClick:"showTable"});else{var a=t.baseURL;a.endsWith("?")||(a+="?"),a+="RA="+t.ra+"&DEC="+t.dec+"&SR="+t.radiusDeg,n=A.catalogFromURL(a,{limit:t.limit,onClick:"showTable"})}this.aladin.addCatalog(n)}else if("hips"==e){var o=A.catalogHiPS(t.hipsURL,{onClick:"showTable",name:t.id});this.aladin.addCatalog(o)}else if("votable"==e){var i=A.catalogFromURL(t.url,{onClick:"showTable"});this.aladin.addCatalog(i)}}))),this.catalogSelector.show()}},{key:"_createComponent",value:function(){var e=this,n=this,a=t()(this.mainDiv);a.empty(),a.append('<a class="aladin-closeBtn">&times;</a><div class="aladin-box-title">Stack</div>'),a.append('<div class="aladin-box-separator"></div><div class="aladin-label">Image layers</div>'),this.imgLayers.size>1&&(a.append('<div class="aladin-label" style="font-size: 12px">Overlays</div>'),Array.from(n.aladin.getImageOverlays()).reverse().forEach((function(e){var t=n.imgLayers.get(e);t&&"base"!==t.layer.layer&&t.attachTo(a)}))),a.append('<div class="aladin-label" style="font-size: 12px">Base</div>'),this.imgLayers.has("base")&&this.imgLayers.get("base").attachTo(a),a.append('<button class="aladin-btn add-layer-hips" type="button" title="Add a full survey (i.e. a HiPS)">Add survey</button><button class="aladin-btn add-layer-image" type="button" title="Add a single image (only FITS file supported)">Open image 📂</button>'),t()(this.mainDiv).find(".add-layer-hips").on("click",(function(){n.aladin.addNewImageLayer()})),t()(this.mainDiv).find(".add-layer-image").on("click",(function(){var e=document.createElement("input");e.type="file",e.onchange=function(t){Array.from(e.files).forEach((function(e){var t=URL.createObjectURL(e),a=e.name,o=n.aladin.createImageFITS(t,a,void 0,(function(e,t,a,o){n.aladin.gotoRaDec(e,t),n.aladin.setFoV(1.1*a)}),void 0);n.aladin.setOverlayImageLayer(o,a)}))},e.click()})),a.append('<div class="aladin-box-separator"></div><div class="aladin-label">Overlay layers</div>');for(var o=this.aladin.getOverlays(),i='<ul class="aladin-overlay-list">',r=o.length-1;r>=0;r--){var s=o[r],l=s.name,c="";s.isShowing&&(c='checked="checked"');var u="",d="";if("catalog"==s.type||"progressivecat"==s.type){var f=s.getSources().length;u=f+" source"+(f>1?"s":""),d=x.SVG_ICONS.CATALOG}else"moc"==s.type?(u="Coverage: "+(100*s.skyFraction()).toFixed(3)+" % of sky",d=x.SVG_ICONS.MOC):"overlay"==s.type&&(d=x.SVG_ICONS.OVERLAY);var p=t()("<div></div>").css("color",s.color).css("color"),h=rt.I.getLabelColorForBackground(p);i+='<li><div class="aladin-stack-icon" style=\'background-image: url("data:image/svg+xml;base64,'+window.btoa(d.replace(/FILLCOLOR/g,s.color))+"\");'></div>",i+='<input class="aladin-input" type="checkbox" '+c+' id="aladin_lite_'+s.uuid+'"></input><label for="aladin_lite_'+s.uuid+'" class="aladin-layer-label" style="background: '+s.color+"; color:"+h+';" title="'+u+'">'+l+"</label>",i+=' <button class="aladin-btn-small aladin-delete-graphic-layer" type="button" title="Delete this layer" data-uuid="'+s.uuid+'" style="font-size: 10px!important; vertical-align: text-bottom!important; background-color: unset!important;">❌</button>',i+="</li>"}i+="</ul>",i+='<button class="aladin-btn my-1 catalogue-selector" type="button">Add catalogue</button>',a.append(i),a.find(".aladin-delete-graphic-layer").click((function(){var e=n.aladin.findLayerByUUID(t()(this).data("uuid"));n.aladin.removeLayer(e)})),a.find(".catalogue-selector").on("click",(function(){return n._onAddCatalogue()})),a.append('<div class="aladin-blank-separator"></div>'),c="",n.aladin.isReticleDisplayed()&&(c='checked="checked"');var m=t()('<input class="aladin-input" type="checkbox" '+c+' id="displayReticle" />');a.append(m).append('<label for="displayReticle">Reticle</label><br/>'),m.change((function(){n.aladin.showReticle(t()(this).is(":checked"))})),c="",n.aladin.isHpxGridDisplayed()&&(c='checked="checked"');var v=t()('<input class="aladin-input" type="checkbox" '+c+' id="displayHpxGrid"/>');a.append(v).append('<label for="displayHpxGrid">HEALPix grid</label><br/>'),v.change((function(){n.aladin.showHealpixGrid(t()(this).is(":checked"))})),a.append('<div class="aladin-box-separator"></div><div class="aladin-label">Background color</div>'),a.append(this.backgroundColorInput),this.backgroundColorInput.on("input",(function(){n.backgroundColor=e.backgroundColorInput.val(),n.aladin.setBackgroundColor(rt.I.hexToRgb(n.backgroundColor))})),a.append('<div class="aladin-box-separator"></div><div class="aladin-label">Tools</div>');var _=t()('<button class="aladin-btn" type="button">Export view as PNG</button>');a.append(_),_.click((function(){n.aladin.exportAsPNG()})),a.find(".aladin-closeBtn").click((function(){return n.aladin.hideBoxes(),!1})),t()(this.mainDiv).find("ul input").change((function(){var e=t()(this).attr("id").substr(12),a=n.aladin.findLayerByUUID(e);t()(this).is(":checked")?a.show():a.hide()}))}},{key:"_addListeners",value:function(){var e=this;this.aladin.aladinDiv.addEventListener("remove-layer",(function(t){var n=t.detail;e.aladin.removeImageLayer(n)})),this.aladin.aladinDiv.addEventListener("select-layer",(function(t){var n=t.detail;e.unselectAllLayers(),e.selectLayer(n)})),Qe.BACKGROUND_COLOR_CHANGED.listenedBy(this.aladin.aladinDiv,(function(t){var n=t.detail.color,a=e.mainDiv.querySelector('input[type="color"]'),o=rt.I.rgbToHex(n.r,n.g,n.b);a.value=o,e.backgroundColor=n})),Qe.HIPS_LAYER_ADDED.listenedBy(this.aladin.aladinDiv,(function(t){var n=t.detail.layer,a=new gn(e.aladin,n);e.imgLayers.set(n.layer,a),e._createComponent(),e.updateSelectedLayer()})),Qe.HIPS_LAYER_RENAMED.listenedBy(this.aladin.aladinDiv,(function(t){var n=t.detail.layer,a=t.detail.newLayer,o=e.imgLayers.get(n);e.imgLayers.delete(n),e.imgLayers.set(a,new gn(e.aladin,o.layer)),e._createComponent(),e.updateSelectedLayer()})),Qe.HIPS_LAYER_SWAP.listenedBy(this.aladin.aladinDiv,(function(t){var n=t.detail.firstLayer,a=t.detail.secondLayer,o=e.imgLayers.get(n),i=e.imgLayers.get(a);e.imgLayers.set(a,o),e.imgLayers.set(n,i),e._createComponent(),e.updateSelectedLayer()})),Qe.HIPS_LAYER_REMOVED.listenedBy(this.aladin.aladinDiv,(function(t){var n=t.detail.layer,a=e.imgLayers.get(n);a.children?a.children.forEach((function(t){t.destroy(),e.imgLayers.delete(t.layer)})):(a.destroy(),e.imgLayers.delete(n)),e._createComponent(),e.imgLayers.length>0&&e.updateSelectedLayer()})),Qe.GRAPHIC_OVERLAY_LAYER_ADDED.listenedBy(this.aladin.aladinDiv,(function(t){e._createComponent()})),Qe.GRAPHIC_OVERLAY_LAYER_REMOVED.listenedBy(this.aladin.aladinDiv,(function(t){e._createComponent()}))}},{key:"show",value:function(){this.mainDiv.style.display="initial"}},{key:"hide",value:function(){this.mainDiv.style.display="none"}}],a&&bn(n.prototype,a),o&&bn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function Cn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var An=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aladin=n,this.view=a,this.isChecked=!1,this.mainDiv=document.createElement("div"),this.mainDiv.style.display="none",this.mainDiv.classList.add("aladin-box","aladin-layerBox","aladin-cb-list"),this.aladinDiv=t,t.appendChild(this.mainDiv),this._createComponent(),this._addListeners()}var n,a,o;return n=e,a=[{key:"_createComponent",value:function(){var e=this,n=t()(this.mainDiv);n.empty(),n.append('<a class="aladin-closeBtn">&times;</a>');var a=t()('<div class="aladin-label">Coo grid options</div>'),o=t()('<div class="layer-options"><table><tbody><tr><td>Color</td><td><input type="color" value="#00ff00"></td></tr><tr><td>Opacity</td><td><input class="aladin-input opacity" value="1.0" type="range" min="0" max="1" step="0.05"></td></tr><tr><td>Label size</td><td><input class="aladin-input label-size" type="range" value="1" min="0" max="1" step="0.01"></td></tr></table></div>');n.append(a).append(o);var i=o.find('input[type="color"]'),r=o.find(".opacity"),s=function(){var t=rt.I.hexToRgb(i.val()),n=r.val();e.view.setGridConfig({color:{r:t.r/255,g:t.g/255,b:t.b/255},opacity:parseFloat(n)})};i.on("input",s),r.on("input",s);var l=o.find(".label-size");l.on("input",(function(){var t=+l.val();e.view.setGridConfig({labelSize:t})})),Qe.COO_GRID_ENABLED.listenedBy(e.aladinDiv,(function(){e.isChecked=!e.isChecked})),Qe.COO_GRID_DISABLED.listenedBy(e.aladinDiv,(function(){e.isChecked=!e.isChecked})),Qe.COO_GRID_UPDATED.listenedBy(e.aladinDiv,(function(e){var t=e.detail.opacity;r.val()!=t&&r.val(t);var n=e.detail.color,a=rt.I.rgbToHex(Math.round(255*n.r),Math.round(255*n.g),Math.round(255*n.b));i.val()!=a&&i.val(a)})),n.find(".aladin-closeBtn").click((function(){return e.aladin.hideBoxes(),!1}))}},{key:"_addListeners",value:function(){}},{key:"show",value:function(){this.mainDiv.style.display="block"}},{key:"hide",value:function(){this.mainDiv.style.display="none"}}],a&&Cn(n.prototype,a),o&&Cn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function In(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Sn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aladin=t,this.isShowing=!1}var t,n,a;return t=e,n=[{key:"_hideMenu",value:function(e){this.contextMenuUl.remove(),document.removeEventListener("click",this._hideMenu),window.removeEventListener("resize",this._hideOnResize),this.isShowing=!1}},{key:"_hideOnResize",value:function(){this._hideMenu(!0)}},{key:"_attachOption",value:function(e,t,n){var a=this,o=document.createElement("li");if(o.className="aladin-context-menu-item","Copy position"==t.label)try{var i,r=this.aladin.pix2world(n.x,n.y),s=new f(r[0],r[1],6);i=this.aladin.view.cooFrame==y.J2000?s.format("s/"):(this.aladin.view.cooFrame,y.J2000d,s.format("d/")),o.innerHTML="<span>"+i+"</span>"}catch(u){o.innerHTML="<span></span>"}else o.innerHTML="<span>"+t.label+"</span>";t.subMenu&&t.subMenu.length>0&&(o.innerHTML+='<span style="position: absolute; right: 4px;">▶</span>');var l=this;if(o.addEventListener("click",(function(e){e.stopPropagation(),t.subMenu&&0!==t.subMenu.length||("Copy position"==t.label?t.action(e):t.action(a.event),l._hideMenu(!0))})),e.appendChild(o),t.subMenu&&t.subMenu.length){var c=document.createElement("ul");c.className="aladin-context-sub-menu",o.appendChild(c),t.subMenu.forEach((function(e){return a._attachOption(c,e)}))}}},{key:"_showMenu",value:function(e){var t=this;this.contextMenuUl.className="aladin-context-menu",this.contextMenuUl.innerHTML="";var n=this.aladin.view.imageCanvas.relMouseCoords(e);this.menuOptions.forEach((function(e){return t._attachOption(t.contextMenuUl,e,n)})),document.body.appendChild(this.contextMenuUl);var a=window,o=a.innerWidth,i=a.innerHeight,r=this.contextMenuUl,s=r.offsetWidth,l=r.offsetHeight,c=0,u=0;this.event=e,e.clientX>=o/2&&this.contextMenuUl.classList.add("left"),e.clientY>=i/2&&this.contextMenuUl.classList.add("top"),e.clientX>=o-s&&(c="-100%"),e.clientY>=i-l&&(u="-100%"),this.contextMenuUl.style.left=e.clientX+"px",this.contextMenuUl.style.top=e.clientY+"px",this.contextMenuUl.style.transform="translate(".concat(c,", ").concat(u,")"),document.addEventListener("click",(function(){return t._hideMenu(!0)})),window.addEventListener("resize",this._hideOnResize),this.isShowing=!0}},{key:"attachTo",value:function(e,t){this.contextMenuUl=document.createElement("ul"),this.menuOptions=t}}],n&&In(t.prototype,n),a&&In(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ln=function(){function e(e,n,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;this.view=a,this.wasm=a.wasm,this.layer=null,this.added=!1,this.subtype="fits",this.url=e.toString(),this.id=e.toString(),this.name=n,this.imgFormat="fits",this.properties={formats:["fits"]},this.successCallback=i,this.errorCallback=r,o&&(o.stretch=o.stretch||"asinh"),this.colorCfg=new $e(o);var s=this;t(s),Ot.update(s),this.query=Promise.resolve(s)}e.prototype.isReady=function(){return this.added},e.prototype.setOpacity=function(e){var n=this;t(n,(function(){n.colorCfg.setOpacity(e)}))},e.prototype.setBlendingConfig=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(this,(function(){e.colorCfg.setBlendingConfig(n)}))},e.prototype.setColormap=function(e,n){var a=this;t(this,(function(){a.colorCfg.setColormap(e,n)}))},e.prototype.setCuts=function(e,n){var a=this;t(this,(function(){a.colorCfg.setCuts(e,n)}))},e.prototype.setGamma=function(e){var n=this;t(this,(function(){n.colorCfg.setGamma(e)}))},e.prototype.setSaturation=function(e){var n=this;t(this,(function(){n.colorCfg.setSaturation(e)}))},e.prototype.setBrightness=function(e){var n=this;t(this,(function(){n.colorCfg.setBrightness(e)}))},e.prototype.setContrast=function(e){var n=this;t(this,(function(){n.colorCfg.setContrast(e)}))},e.prototype.metadata=function(){return Tn(Tn({},this.colorCfg.get()),{},{longitudeReversed:!1,imgFormat:this.imgFormat})};var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t&&t();try{if(e.added){var n=e.metadata();e.wasm.setImageMetadata(e.layer,n),Qe.HIPS_LAYER_CHANGED.dispatchedTo(e.view.aladinDiv,{layer:e})}}catch(a){console.error(a)}};return e.prototype.add=function(t){this.layer=t;var n=this;return n.wasm.addImageFITS({layer:n.layer,url:n.url,meta:n.metadata()}).then((function(t){n.added=!0,n.children=[];var a=0;return t.forEach((function(t){var o=new e(t.url,n.name+"_ext_"+a.toString(),n.view,null,null,null);o.layer=t.layer,o.added=!0,o.colorCfg=u.deepCopy(n.colorCfg),o.setCuts(t.automatic_min_cut,t.automatic_max_cut),o.ra=t.centered_fov.ra,o.dec=t.centered_fov.dec,o.fov=t.centered_fov.fov,n.ra||(n.ra=o.ra),n.dec||(n.dec=o.dec),n.fov||(n.fov=o.fov),n.children.push(o),a+=1})),n.successCallback&&n.successCallback(n.children[0].ra,n.children[0].dec,n.children[0].fov,n.children[0]),n})).catch((function(e){return window.alert(e+". See the console for more logging details. It may be possible CORS headers have not been set in the server where you want to download the file. If it is the case, try to manually download the FITS file first and then open it into aladin lite (e.g. by a drag and drop)"),n.errorCallback&&n.errorCallback(),n.view.removeImageLayer(t),Promise.reject(e)}))},e.prototype.toggle=function(){0!=this.colorCfg.getOpacity()?this.colorCfg.setOpacity(0):this.colorCfg.setOpacity(this.prevOpacity)},e.prototype.isPlanetaryBody=function(){return!1},e.prototype.focusOn=function(){this.added&&(this.view.aladin.gotoRaDec(this.ra,this.dec),this.view.aladin.setFoV(this.fov))},e.prototype.setAlpha=e.prototype.setOpacity,e.prototype.setColorCfg=function(e){var n=this;t(this,(function(){n.colorCfg=e}))},e.prototype.getColorCfg=function(){return this.colorCfg},e.prototype.getOpacity=function(){return this.colorCfg.getOpacity()},e.prototype.getAlpha=e.prototype.getOpacity,e.prototype.readPixel=function(e,t){return this.wasm.readPixel(e,t,this.layer)},e}(),Dn=function(){var e={getDefaultActions:function(e){return[{label:"Copy position",action:function(e){var t=document.createRange();t.selectNode(e.target),window.getSelection().removeAllRanges(),window.getSelection().addRange(t);try{document.execCommand("copy")}catch(n){console.error("Oops, unable to copy to clipboard")}window.getSelection().removeAllRanges()}},{label:"Take snapshot",action:function(t){e.exportAsPNG()}},{label:"Add",subMenu:[{label:"New image layer",action:function(t){e.addNewImageLayer()}},{label:"New catalogue layer",action:function(t){e.stack._onAddCatalogue()}}]},{label:"Load local file",subMenu:[{label:"FITS image",action:function(t){var n=document.createElement("input");n.type="file",n.onchange=function(t){Array.from(n.files).forEach((function(t){var n=URL.createObjectURL(t),a=t.name,o=e.createImageFITS(n,a,void 0,(function(t,n,a,o){e.gotoRaDec(t,n),e.setFoV(1.1*a)}),void 0);e.setOverlayImageLayer(o,a)}))},n.click()}},{label:"FITS MOC",action:function(t){var n=document.createElement("input");n.type="file",n.onchange=function(t){Array.from(n.files).forEach((function(t){var n=URL.createObjectURL(t),a=A.MOCFromURL(n,{name:t.name});e.addMOC(a)}))},n.click()}},{label:"VOTable",action:function(t){var n=document.createElement("input");n.type="file",n.onchange=function(t){Array.from(n.files).forEach((function(t){var n=URL.createObjectURL(t),a=A.catalogFromURL(n,{name:t.name,onClick:"showTable"},null,!1);e.addCatalog(a)}))},n.click()}}]},{label:"What is this?",action:function(t){I(e.view,t)}},{label:"HiPS2FITS cutout",action:function(t){var n=e,a="https://alasky.cds.unistra.fr/hips-image-services/hips2fits#",o=n.getRaDec(),i=Math.max.apply(null,n.getFov()),r=n.getBaseImageLayer().id,s=n.getProjectionName();a+="ra="+o[0]+"&dec="+o[1]+"&fov="+i+"&projection="+s+"&hips="+encodeURIComponent(r),window.open(a,"_blank")}},{label:"Select sources",action:function(t){e.select()}}]}};return e}(),Mn=l(379),En=l.n(Mn),zn=l(795),Rn=l.n(zn),Pn=l(569),Nn=l.n(Pn),jn=l(565),Fn=l.n(jn),qn=l(216),Hn=l.n(qn),Un=l(589),Gn=l.n(Un),Bn=l(724),Vn={};Vn.styleTagTransform=Gn(),Vn.setAttributes=Fn(),Vn.insert=Nn().bind(null,"head"),Vn.domAPI=Rn(),Vn.insertStyleElement=Hn();En()(Bn.Z,Vn);Bn.Z&&Bn.Z.locals&&Bn.Z.locals;function Yn(){Yn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(S){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),r=new C(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var r=n.delegate;if(r){var s=g(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var u={};function d(){}function f(){}function p(){}var h={};s(h,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,o)&&(h=v);var _=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,r,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Xn(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,r,s)}),(function(e){a("throw",e,r,s)})):t.resolve(d).then((function(e){u.value=e,r(u)}),(function(e){return a("throw",e,r,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){a(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function g(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(_,"constructor",p),s(p,"constructor",f),f.displayName=s(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,r,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var r=new x(l(t,n,a,o),i);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(_),s(_,r,"Generator"),s(_,o,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return r.type="throw",r.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],r=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var o=a.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Zn(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(a,o)}function Wn(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){Zn(i,a,o,r,s,"next",e)}function s(e){Zn(i,a,o,r,s,"throw",e)}r(void 0)}))}}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}var Qn=function(){var e=function e(n,a){var o=this;if(0!=t()(n).length){this.wasm=null;var i=this;if(void 0===a&&(a=this.getOptionsFromQueryString()),"zoom"in(a=a||{})){var r=a.zoom;delete a.zoom,a.fov=r}var s={};for(var l in e.DEFAULT_OPTIONS)void 0!==a[l]?s[l]=a[l]:s[l]=e.DEFAULT_OPTIONS[l];for(var l in a)void 0===e.DEFAULT_OPTIONS[l]&&(s[l]=a[l]);this.options=s,t()("<style type='text/css'> .aladin-reticleColor { color: "+this.options.reticleColor+"; font-weight:bold;} </style>").appendTo(n),this.aladinDiv=n,this.reduceDeformations=!0,t()(n).addClass("aladin-container");var c=y.fromString(s.cooFrame,y.J2000),d=t()('<div class="aladin-location">'+(s.showFrame?'<select class="aladin-selector aladin-frameChoice"><option value="'+y.J2000.label+'" '+(c==y.J2000?'selected="selected"':"")+'>J2000</option><option value="'+y.J2000d.label+'" '+(c==y.J2000d?'selected="selected"':"")+'>J2000d</option><option value="'+y.GAL.label+'" '+(c==y.GAL?'selected="selected"':"")+">GAL</option></select>":"")+'<span class="aladin-clipboard" title="Copy coordinates to clipboard"></span><span class="aladin-location-text"></span></div>').appendTo(n),f=d.find(".aladin-clipboard");f.hide(),f.click((function(){i.copyCoordinatesToClipboard()})),d.mouseenter((function(){f.show()})),d.mouseleave((function(){f.hide()}));var p=t()('<div class="aladin-fov"></div>').appendTo(n);s.showZoomControl&&t()('<div class="aladin-zoomControl"><a href="#" class="zoomPlus" title="Zoom in">+</a><a href="#" class="zoomMinus" title="Zoom out">&ndash;</a></div>').appendTo(n),s.showFullscreenControl&&t()('<div class="aladin-fullscreenControl aladin-maximize" title="Full screen"></div>').appendTo(n),this.fullScreenBtn=t()(n).find(".aladin-fullscreenControl"),this.fullScreenBtn.click((function(){i.toggleFullscreen(i.options.realFullscreen)})),t()(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",(function(e){var n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(null==n){i.fullScreenBtn.removeClass("aladin-restore"),i.fullScreenBtn.addClass("aladin-maximize"),i.fullScreenBtn.attr("title","Full screen"),t()(i.aladinDiv).removeClass("aladin-fullscreen");var a=i.callbacksByEventName.fullScreenToggled,o=i.fullScreenBtn.hasClass("aladin-restore");"function"==typeof a&&a(o)}})),new an(n),this.boxes=[],this.measurementTable=new At(n);var h,m,v=new It(d.find(".aladin-location-text"));this.view=new it(this,v,p,c,s.fov),this.cacheSurveys=new Map,this.stack=new wn(this.aladinDiv,this,this.view),this.coogrid=new An(this.aladinDiv,this,this.view),s.backgroundColor&&(this.backgroundColor=s.backgroundColor,this.setBackgroundColor(this.backgroundColor)),this.boxes.push(this.stack),this.boxes.push(this.coogrid),s.gridOptions?(h=s.gridOptions.color&&rt.I.hexToRgb(s.gridOptions.color),m=s.gridOptions.opacity):(h={r:0,g:1,b:0},m=1),this.view.setGridConfig({color:h,opacity:m}),s&&s.showCooGrid&&this.showCooGrid(),!s||void 0!==s.showProjectionControl&&!0!==s.showProjectionControl||new rn(n,this);var _=s&&s.projection||"SIN";this.setProjection(_);var x=30;if(Qe.LOADING_STATE.listenedBy(n,(function(e){var t=n.querySelector(".aladin-layersControl");t&&(e.detail.loading?t.style.backgroundImage="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjE7IiB4PSIwcHgiIHk9IjBweCI+CiAgICA8ZGVmcz4KICAgICAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWwogICAgICAgICAgICBALXdlYmtpdC1rZXlmcmFtZXMgc3BpbiB7CiAgICAgICAgICAgICAgZnJvbSB7CiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvIHsKICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTM1OWRlZykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQGtleWZyYW1lcyBzcGluIHsKICAgICAgICAgICAgICBmcm9tIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC0zNTlkZWcpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHN2ZyB7CiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7CiAgICAgICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogc3BpbiAxLjVzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgICAgICAgICAgIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDEuNXMgbGluZWFyIGluZmluaXRlOwogICAgICAgICAgICB9CiAgICAgICAgXV0+PC9zdHlsZT4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJvdXRlciI+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMCwwQzIyLjIwNTgsMCAyMy45OTM5LDEuNzg4MTMgMjMuOTkzOSwzLjk5MzlDMjMuOTkzOSw2LjE5OTY4IDIyLjIwNTgsNy45ODc4MSAyMCw3Ljk4NzgxQzE3Ljc5NDIsNy45ODc4MSAxNi4wMDYxLDYuMTk5NjggMTYuMDA2MSwzLjk5MzlDMTYuMDA2MSwxLjc4ODEzIDE3Ljc5NDIsMCAyMCwwWiIgc3R5bGU9ImZpbGw6YmxhY2s7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNNS44NTc4Niw1Ljg1Nzg2QzcuNDE3NTgsNC4yOTgxNSA5Ljk0NjM4LDQuMjk4MTUgMTEuNTA2MSw1Ljg1Nzg2QzEzLjA2NTgsNy40MTc1OCAxMy4wNjU4LDkuOTQ2MzggMTEuNTA2MSwxMS41MDYxQzkuOTQ2MzgsMTMuMDY1OCA3LjQxNzU4LDEzLjA2NTggNS44NTc4NiwxMS41MDYxQzQuMjk4MTUsOS45NDYzOCA0LjI5ODE1LDcuNDE3NTggNS44NTc4Niw1Ljg1Nzg2WiIgc3R5bGU9ImZpbGw6cmdiKDIxMCwyMTAsMjEwKTsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMCwzMi4wMTIyQzIyLjIwNTgsMzIuMDEyMiAyMy45OTM5LDMzLjgwMDMgMjMuOTkzOSwzNi4wMDYxQzIzLjk5MzksMzguMjExOSAyMi4yMDU4LDQwIDIwLDQwQzE3Ljc5NDIsNDAgMTYuMDA2MSwzOC4yMTE5IDE2LjAwNjEsMzYuMDA2MUMxNi4wMDYxLDMzLjgwMDMgMTcuNzk0MiwzMi4wMTIyIDIwLDMyLjAxMjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTMwLDEzMCwxMzApOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTI4LjQ5MzksMjguNDkzOUMzMC4wNTM2LDI2LjkzNDIgMzIuNTgyNCwyNi45MzQyIDM0LjE0MjEsMjguNDkzOUMzNS43MDE5LDMwLjA1MzYgMzUuNzAxOSwzMi41ODI0IDM0LjE0MjEsMzQuMTQyMUMzMi41ODI0LDM1LjcwMTkgMzAuMDUzNiwzNS43MDE5IDI4LjQ5MzksMzQuMTQyMUMyNi45MzQyLDMyLjU4MjQgMjYuOTM0MiwzMC4wNTM2IDI4LjQ5MzksMjguNDkzOVoiIHN0eWxlPSJmaWxsOnJnYigxMDEsMTAxLDEwMSk7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNMy45OTM5LDE2LjAwNjFDNi4xOTk2OCwxNi4wMDYxIDcuOTg3ODEsMTcuNzk0MiA3Ljk4NzgxLDIwQzcuOTg3ODEsMjIuMjA1OCA2LjE5OTY4LDIzLjk5MzkgMy45OTM5LDIzLjk5MzlDMS43ODgxMywyMy45OTM5IDAsMjIuMjA1OCAwLDIwQzAsMTcuNzk0MiAxLjc4ODEzLDE2LjAwNjEgMy45OTM5LDE2LjAwNjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTg3LDE4NywxODcpOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTUuODU3ODYsMjguNDkzOUM3LjQxNzU4LDI2LjkzNDIgOS45NDYzOCwyNi45MzQyIDExLjUwNjEsMjguNDkzOUMxMy4wNjU4LDMwLjA1MzYgMTMuMDY1OCwzMi41ODI0IDExLjUwNjEsMzQuMTQyMUM5Ljk0NjM4LDM1LjcwMTkgNy40MTc1OCwzNS43MDE5IDUuODU3ODYsMzQuMTQyMUM0LjI5ODE1LDMyLjU4MjQgNC4yOTgxNSwzMC4wNTM2IDUuODU3ODYsMjguNDkzOVoiIHN0eWxlPSJmaWxsOnJnYigxNjQsMTY0LDE2NCk7Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBkPSJNMzYuMDA2MSwxNi4wMDYxQzM4LjIxMTksMTYuMDA2MSA0MCwxNy43OTQyIDQwLDIwQzQwLDIyLjIwNTggMzguMjExOSwyMy45OTM5IDM2LjAwNjEsMjMuOTkzOUMzMy44MDAzLDIzLjk5MzkgMzIuMDEyMiwyMi4yMDU4IDMyLjAxMjIsMjBDMzIuMDEyMiwxNy43OTQyIDMzLjgwMDMsMTYuMDA2MSAzNi4wMDYxLDE2LjAwNjFaIiBzdHlsZT0iZmlsbDpyZ2IoNzQsNzQsNzQpOyIvPgogICAgICAgIDwvZz4KICAgICAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZD0iTTI4LjQ5MzksNS44NTc4NkMzMC4wNTM2LDQuMjk4MTUgMzIuNTgyNCw0LjI5ODE1IDM0LjE0MjEsNS44NTc4NkMzNS43MDE5LDcuNDE3NTggMzUuNzAxOSw5Ljk0NjM4IDM0LjE0MjEsMTEuNTA2MUMzMi41ODI0LDEzLjA2NTggMzAuMDUzNiwxMy4wNjU4IDI4LjQ5MzksMTEuNTA2MUMyNi45MzQyLDkuOTQ2MzggMjYuOTM0Miw3LjQxNzU4IDI4LjQ5MzksNS44NTc4NloiIHN0eWxlPSJmaWxsOnJnYig1MCw1MCw1MCk7Ii8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K)":t.style.backgroundImage='url("data:image/gif;base64,R0lGODlhGQAcAMIAAAAAADQ0NKahocvFxf///wAAAAAAAAAAACH5BAEKAAcALAAAAAAZABwAAANneLoH/hCwyaJ1dDrCuydY1gBfyYUaaZqosq0r+sKxNNP1pe98Hy2OgXBILLZGxWRSBlA6iZjgczrwWa9WIEDA7Xq/R8d3PGaSz97oFs0WYN9wiDZAr9vvYcB9v2fy/3ZqgIN0cYZYCQA7")')})),s.showLayersControl)(S=t()('<div class="aladin-layersControl-container" style="top: '+x+'px" title="Manage layers"><div class="aladin-layersControl"></div></div>')).appendTo(n),s.expandLayersControl&&(i.hideBoxes(),i.showLayerBox()),S.click((function(){return i.hideBoxes(),i.showLayerBox(),!1})),x+=38;if(s.showGotoControl){(S=t()('<div class="aladin-gotoControl-container" style="top: '+x+'px" title="Go to position"><div class="aladin-gotoControl"></div></div>')).appendTo(n);var g=t()('<div class="aladin-box aladin-gotoBox"><a class="aladin-closeBtn" style="display: inline-block">&times;</a><form class="aladin-target-form" style="display: inline-block">Go to: <input class="aladin-input" type="text" placeholder="Object name/position" /></form></div>');g.appendTo(n),this.boxes.push(g);var b=g.find(".aladin-target-form input");b.on("paste keydown",(function(){t()(this).removeClass("aladin-unknownObject")})),b.on("change",(function(){b.blur()})),S.click((function(){return i.hideBoxes(),b.val(""),b.removeClass("aladin-unknownObject"),g.show(),b.blur(),!1})),g.find(".aladin-closeBtn").click((function(){return i.hideBoxes(),b.blur(),!1})),x+=38}if(s.showSimbadPointerControl)(S=t()('<div class="aladin-simbadPointerControl-container" style="top: '+x+'px" title="What is this? Click on an object to identify it."><div class="aladin-simbadPointerControl"></div></div>')).appendTo(n),S.click((function(){i.view.setMode(it.TOOL_SIMBAD_POINTER)})),x+=38;if(s.showCooGridControl){(S=t()('<div class="aladin-cooGridControl-container" style="top: '+x+'px" title="Coo grid. Keep the mouse down to see the option panel"><div class="aladin-cooGridControl"></div></div>')).appendTo(n);var w,C,A=!1,I=!1;S.on("mousedown",(function(){A=!0,w=new Date,C=setInterval((function(){if(A&&new Date-w>500)return I=!0,i.hideBoxes(),i.showCooGridBox(),!1}),50)})),S.on("mouseup",(function(){A=!1,clearInterval(C),new Date-w<500&&(I=!1)})),S.on("click",(function(){if(!I){var e=S[0];i.cooGridEnabled?(i.hideCooGrid(),e.style.background="rgba(250, 250, 250, 0.8)"):(i.showCooGrid(),e.style.background="rgba(250, 250, 250, 1)")}})),x+=38}if(s.showShareControl){var S;(S=t()('<div class="aladin-shareControl-container" title="Get link for current view"><div class="aladin-shareControl"></div></div>')).appendTo(n);var k=t()('<div class="aladin-box aladin-shareBox"><a class="aladin-closeBtn">&times;</a><div style="clear: both;"></div>Link to previewer: <span class="info"></span><input type="text" class="aladin-input aladin-shareInput" /></div>');k.appendTo(n),this.boxes.push(k),S.click((function(){i.hideBoxes(),k.show();var e=i.getShareURL();return k.find(".aladin-shareInput").val(e).select(),document.execCommand("copy"),!1})),k.find(".aladin-closeBtn").click((function(){return i.hideBoxes(),!1})),x+=38}if(this.gotoObject(s.target,void 0,{forceAnimation:!1}),s.log){var T=a;T.version=e.VERSION,Je.log("startup",T)}if(this.showReticle(s.showReticle),s.catalogUrls)for(var O=0,L=s.catalogUrls.length;O<L;O++)this.createCatalogFromVOTable(s.catalogUrls[O]);if(s.survey)if(Array.isArray(s.survey)){var D=0;s.survey.forEach((function(e){0==D?o.setBaseImageLayer(e):o.setOverlayImageLayer(e,u.uuidv4()),D++}))}else this.setBaseImageLayer(s.survey);else{var M=Math.round(Math.random()),E=e.DEFAULT_OPTIONS.surveyUrl[M];this.setBaseImageLayer(E)}this.view.showCatalog(s.showCatalog);var z=this;t()(n).find(".aladin-frameChoice").change((function(){z.setFrame(t()(this).val())})),t()(n).find(".aladin-target-form").submit((function(){return z.gotoObject(t()(this).find("input").val(),(function(){t()(n).find(".aladin-target-form input").addClass("aladin-unknownObject")})),!1}));var R=t()(n).find(".zoomPlus");R.click((function(){return z.increaseZoom(),!1})),R.bind("mousedown",(function(e){e.preventDefault()}));var P=t()(n).find(".zoomMinus");P.click((function(){return z.decreaseZoom(),!1})),P.bind("mousedown",(function(e){e.preventDefault()})),this.callbacksByEventName={},this.view.redraw(),s.fullScreen&&i.toggleFullscreen(i.options.realFullscreen),s.showContextMenu&&(this.contextMenu=new Sn(this),this.contextMenu.attachTo(this.view.catalogCanvas,Dn.getDefaultActions(this)))}};e.VERSION="3.0-beta0",e.JSONP_PROXY="https://alaskybis.cds.unistra.fr/cgi/JSONProxy",e.URL_PREVIEWER="https://aladin.cds.unistra.fr/AladinLite/",e.wasmLibs={},e.DEFAULT_OPTIONS={surveyUrl:["https://alaskybis.u-strasbg.fr/DSS/DSSColor","https://alasky.u-strasbg.fr/DSS/DSSColor"],survey:"CDS/P/DSS2/color",target:"0 +0",cooFrame:"J2000",fov:60,backgroundColor:"rgb(0, 0, 0)",showReticle:!0,showZoomControl:!0,showFullscreenControl:!0,showLayersControl:!0,showGotoControl:!0,showSimbadPointerControl:!1,showShareControl:!1,showContextMenu:!1,showCatalog:!0,showFrame:!0,fullScreen:!1,reticleColor:"rgb(178, 50, 178)",reticleSize:22,log:!0,allowFullZoomout:!1,realFullscreen:!1,showAllskyRing:!1,allskyRingColor:"#c8c8ff",allskyRingWidth:8,pixelateCanvas:!0},e.prototype.copyCoordinatesToClipboard=function(){var e=this.view.location.$div[0],t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t);try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(a){console.log("Oops, unable to copy")}window.getSelection().removeAllRanges()},e.prototype.toggleFullscreen=function(e){var t=this;e=Boolean(e),this.fullScreenBtn.toggleClass("aladin-maximize aladin-restore");var n=this.fullScreenBtn.hasClass("aladin-restore");if(this.fullScreenBtn.attr("title",n?"Restore original size":"Full screen"),this.aladinDiv.classList.contains("aladin-fullscreen")?this.aladinDiv.classList.remove("aladin-fullscreen"):this.aladinDiv.classList.add("aladin-fullscreen"),e)if(n){var a=this.aladinDiv;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();setTimeout((function(){t.view.fixLayoutDimensions()}),1e3);var o=t.callbacksByEventName.zoomChanged;"function"==typeof o&&o(t.view.fov);var i=t.callbacksByEventName.fullScreenToggled;"function"==typeof i&&i(n)},e.prototype.setAngleRotation=function(e){this.view.setAngleRotation(e)},e.prototype.getOptionsFromQueryString=function(){var e={},n=t().urlParam("target");n&&(e.target=n);var a=t().urlParam("frame");a&&y[a]&&(e.frame=a);var o=t().urlParam("survey");o&&$t.getSurveyInfoFromId(o)&&(e.survey=o);var i=t().urlParam("zoom");i&&i>0&&i<180&&(e.zoom=i);var r=t().urlParam("showReticle");r&&(e.showReticle="true"==r.toLowerCase());var s=t().urlParam("cooFrame");s&&(e.cooFrame=s);var l=t().urlParam("fullScreen");return void 0!==l&&(e.fullScreen=l),e},e.prototype.setFoV=e.prototype.setFov=function(e){this.view.setZoom(e)},e.prototype.adjustFovForObject=function(e){var t=this;this.getFovForObject(e,(function(e){t.setFoV(e)}))},e.prototype.getFovForObject=function(e,t){var n="//simbad.u-strasbg.fr/simbad/sim-tap/sync?query="+encodeURIComponent("SELECT galdim_majaxis, V FROM basic JOIN ident ON oid=ident.oidref JOIN allfluxes ON oid=allfluxes.oidref WHERE id='"+e+"'")+"&request=doQuery&lang=adql&format=json&phase=run";u.getAjaxObject(n,"GET","json",!1).done((function(e){var n=4/60;if("data"in e&&e.data.length>0){var a=u.isNumber(e.data[0][0])?e.data[0][0]/60:null,o=u.isNumber(e.data[0][1])?e.data[0][1]:null;null!==a?n=2*a:null!==o&&o<10&&(n=2*Math.pow(2,6-o/2)/60)}"function"==typeof t&&t(n)}))},e.prototype.setFrame=function(e){if(e){var n=y.fromString(e,y.J2000);if(n!=this.view.cooFrame){this.view.changeFrame(n);var a=this.view.aladin.callbacksByEventName.cooFrameChanged;"function"==typeof a&&a(n.label),t()(this.aladinDiv).find(".aladin-frameChoice").val(n.label)}}},e.prototype.setProjection=function(e){e&&(this.view.setProjection(e),Qe.PROJECTION_CHANGED.dispatchedTo(this.aladinDiv,{projection:e}))},e.prototype.getProjectionName=function(){var e=void 0;for(var t in o)if(o[t].id==this.view.projection.id){e=t;break}return e},e.prototype.gotoObject=function(e,t,n){var a=this,o=void 0,i=void 0;if("object"===Xn(t)?(t.hasOwnProperty("success")&&(o=t.success),t.hasOwnProperty("error")&&(i=t.error)):"function"==typeof t&&(i=t),/[a-zA-Z]/.test(e)){var r=this;Wn(Yn().mark((function t(){var s,l;return Yn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.getBaseImageLayer()){t.next=4;break}return t.next=3,a.getBaseImageLayer().query;case 3:s=t.sent;case 4:void 0!==a.getBaseImageLayer()&&s.isPlanetaryBody()?(l=s.properties.hipsBody,bt.resolve(e,l,(function(e){r.view.pointTo(e.lon,e.lat,n),"function"==typeof o&&o(r.getRaDec())}),(function(t){console&&(console.log("Could not resolve object name "+e),console.log(t)),"function"==typeof i&&i()}))):yt.resolve(e,(function(e){var t=e.Target.Resolver;r.view.pointTo(t.jradeg,t.jdedeg,n),"function"==typeof o&&o(r.getRaDec())}),(function(t){console&&(console.log("Could not resolve object name "+e),console.log(t)),"function"==typeof i&&i()}));case 5:case"end":return t.stop()}}),t)})))()}else{var s=new f;s.parse(e);var l=Jn(this.wasm.viewToICRSCooSys(s.lon,s.lat),2),c=l[0],u=l[1];this.view.pointTo(c,u,n),"function"==typeof o&&o(this.getRaDec())}},e.prototype.gotoPosition=function(e,t){var n;n=this.view.cooFrame==y.GAL?en.GalacticToJ2000([e,t]):[e,t],this.view.pointTo(n[0],n[1])};var n=function e(t){var n=t.animationParams;if(null!=n&&n.running){var a=(new Date).getTime();if(a>n.end)return t.gotoRaDec(n.raEnd,n.decEnd),void(n.complete&&n.complete());var o=(a-n.start)/(n.end-n.start),i=function(e,t,n,a,o){function i(e){return e*Math.PI/180}function r(e){return 180*e/Math.PI}t=i(t),e=i(e),a=i(a),n=i(n);var s=2*Math.asin(Math.sqrt(Math.pow(Math.sin((t-a)/2),2)+Math.cos(t)*Math.cos(a)*Math.pow(Math.sin((e-n)/2),2))),l=Math.sin((1-o)*s)/Math.sin(s),c=Math.sin(o*s)/Math.sin(s),u=l*Math.cos(t)*Math.cos(e)+c*Math.cos(a)*Math.cos(n),d=l*Math.cos(t)*Math.sin(e)+c*Math.cos(a)*Math.sin(n),f=l*Math.sin(t)+c*Math.sin(a),p=Math.atan2(d,u),h=Math.atan2(f,Math.sqrt(Math.pow(u,2)+Math.pow(d,2)));return[r(p),r(h)]}(n.raStart,n.decStart,n.raEnd,n.decEnd,o),r=i[0],s=i[1];t.gotoRaDec(r,s),setTimeout((function(){e(t)}),10)}};e.prototype.stopAnimation=function(){this.zoomAnimationParams&&(this.zoomAnimationParams.running=!1),this.animationParams&&(this.animationParams.running=!1)},e.prototype.animateToRaDec=function(e,t,a,o){a=a||5,this.animationParams=null;var i={};i.start=(new Date).getTime(),i.end=(new Date).getTime()+1e3*a;var r=this.getRaDec();i.raStart=r[0],i.decStart=r[1],i.raEnd=e,i.decEnd=t,i.complete=o,i.running=!0,this.animationParams=i,n(this)};var a=function e(t){var n=t.zoomAnimationParams;if(null!=n&&n.running){var a=(new Date).getTime();if(a>n.end)return t.setFoV(n.fovEnd),void(n.complete&&n.complete());var o=(a-n.start)/(n.end-n.start),i=n.fovStart+(n.fovEnd-n.fovStart)*Math.sqrt(o);t.setFoV(i),setTimeout((function(){e(t)}),50)}};return e.prototype.zoomToFoV=function(e,t,n){t=t||5,this.zoomAnimationParams=null;var o={};o.start=(new Date).getTime(),o.end=(new Date).getTime()+1e3*t;var i=this.getFov();o.fovStart=Math.max(i[0],i[1]),o.fovEnd=e,o.complete=n,o.running=!0,this.zoomAnimationParams=o,a(this)},e.prototype.getRaDec=function(){var e=this.wasm.getCenter(),t=this.wasm.viewToICRSCooSys(e[0],e[1]);return t[0]<0?[t[0]+360,t[1]]:t},e.prototype.gotoRaDec=function(e,t){this.view.pointTo(e,t)},e.prototype.showHealpixGrid=function(e){this.view.showHealpixGrid(e)},e.prototype.showSurvey=function(e){this.view.showSurvey(e)},e.prototype.showCatalog=function(e){this.view.showCatalog(e)},e.prototype.showReticle=function(e){this.view.showReticle(e),t()("#displayReticle").attr("checked",e)},e.prototype.removeLayers=function(){this.view.removeLayers()},e.prototype.addCatalog=function(e){this.view.addCatalog(e),Qe.GRAPHIC_OVERLAY_LAYER_ADDED.dispatchedTo(this.aladinDiv,{layer:e})},e.prototype.addOverlay=function(e){this.view.addOverlay(e),Qe.GRAPHIC_OVERLAY_LAYER_ADDED.dispatchedTo(this.aladinDiv,{layer:e})},e.prototype.addMOC=function(e){this.view.addMOC(e)},e.prototype.findLayerByUUID=function(e){var t=this.view.allOverlayLayers.filter((function(t){return t.uuid===e}));return 0==t.length?null:t[0]},e.prototype.removeLayer=function(e){this.view.removeLayer(e)},e.prototype.createImageSurvey=function(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=this.cacheSurveys.get(e);return r?r=u.clone(r):(a&&(i.cooFrame=a),o&&(i.maxOrder=o),r={id:e,name:t,rootUrl:n,options:i},this.cacheSurveys.set(e,r)),new $t(r.id,r.name,r.rootUrl,this.view,r.options)},e.prototype.createImageFITS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;try{e=new URL(e)}catch(r){e=u.getAbsoluteURL(e),e=new URL(e)}var i=this.cacheSurveys.get(e);return i?i=u.clone(i):(i={url:e,name:t,options:n,successCallback:a,errorCallback:o},this.cacheSurveys.set(e,i)),new Ln(i.url,i.name,this.view,i.options,i.successCallback,i.errorCallback)},e.prototype.newImageSurvey=function(e,t){var n=e,a=n;return this.createImageSurvey(n,a,n,null,null,t)},e.prototype.addNewImageLayer=function(){var e=u.uuidv4();this.setOverlayImageLayer("CDS/P/DSS2/color",e)},e.prototype.setImageLayer=function(e){this.setBaseImageLayer(e)},e.prototype.setImageSurvey=e.prototype.setImageLayer,e.prototype.setBackgroundColor=function(e){var t,n=this;if("string"==typeof e){e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);t={r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3])}}else t=e;this.backgroundColor=t,Qe.AL_USE_WASM.dispatchedTo(document.body,{callback:function(e){e.setBackgroundColor(n.backgroundColor),Qe.BACKGROUND_COLOR_CHANGED.dispatchedTo(n.aladinDiv,{color:n.backgroundColor})}})},e.prototype.getBackgroundColor=function(){return this.backgroundColor},e.prototype.removeImageLayer=function(e){this.view.removeImageLayer(e)},e.prototype.setBaseImageLayer=function(e){return this.setOverlayImageLayer(e,"base")},e.prototype.getBaseImageLayer=function(){return this.view.getImageLayer("base")},e.prototype.setOverlayImageLayer=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overlay";if("string"==typeof e){var a=e,o=a;t=this.createImageSurvey(a,o,a,null,null)}else t=e;return this.view.setOverlayImageLayer(t,n)},e.prototype.getOverlayImageLayer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"overlay",t=this.view.getImageLayer(e);return t},e.prototype.increaseZoom=function(){this.view.increaseZoom(.01)},e.prototype.decreaseZoom=function(){this.view.decreaseZoom(.01)},e.prototype.setRotation=function(e){this.view.setRotation(e)},e.prototype.setActiveHiPSLayer=function(e){this.view.setActiveHiPSLayer(e)},e.prototype.getActiveHiPSLayer=function(){return this.view.selectedLayer},e.prototype.getImageOverlays=function(){return this.view.overlayLayers},e.prototype.getOverlays=function(){return this.view.allOverlayLayers},e.prototype.getImageOverlays=function(){return this.view.overlayLayers},e.prototype.isHpxGridDisplayed=function(){return this.view.displayHpxGrid},e.prototype.isReticleDisplayed=function(){return this.view.displayReticle},e.prototype.createProgressiveCatalog=function(e,t,n,a){return new _t(e,t,n,a)},e.prototype.createOverlay=function(e){return new O(e)},e.AVAILABLE_CALLBACKS=["select","objectClicked","objectHovered","objectHoveredStop","footprintClicked","footprintHovered","positionChanged","zoomChanged","click","rightClickMove","mouseMove","fullScreenToggled","cooFrameChanged"],e.prototype.on=function(t,n){e.AVAILABLE_CALLBACKS.indexOf(t)<0||(this.callbacksByEventName[t]=n,"positionChanged"===t&&Qe.AL_USE_WASM.dispatchedTo(document.body,{callback:function(e){var t=u.throttle(n,it.CALLBACKS_THROTTLE_TIME_MS);e.setCallbackPositionChanged(t)}}))},e.prototype.addListener=function(e,t){new Qe(e).listenedBy(this.aladinDiv,t)},e.prototype.select=function(){this.fire("selectstart")},e.prototype.fire=function(e,t){if("selectstart"===e)this.view.setMode(it.SELECT);else if("selectend"===e){this.view.setMode(it.PAN);var n=this.callbacksByEventName.select;"function"==typeof n&&n(t)}},e.prototype.hideBoxes=function(){if(this.boxes)for(var e=0;e<this.boxes.length;e++)this.boxes[e].hide()},e.prototype.updateCM=function(){},e.prototype.showLayerBox=function(){this.stack.show()},e.prototype.showCooGridBox=function(){this.coogrid.show()},e.prototype.showCooGrid=function(){this.view.setGridConfig({enabled:!0}),this.cooGridEnabled=!0},e.prototype.hideCooGrid=function(){this.view.setGridConfig({enabled:!1}),this.cooGridEnabled=!1},e.prototype.layerByName=function(e){for(var t=this.view.allOverlayLayers,n=0;n<t.length;n++)if(e==t[n].name)return t[n];return null},e.prototype.exportAsPNG=function(){var e=this;Wn(Yn().mark((function t(){var n;return Yn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.open(),t.t0=n.document,t.next=4,e.getViewDataURL();case 4:t.t1=t.sent,t.t2='<img src="'+t.t1,t.t3=t.t2+'" width="',t.t4=e.view.width,t.t5=t.t3+t.t4,t.t6=t.t5+'px">',t.t0.write.call(t.t0,t.t6),n.document.title="Aladin Lite snapshot";case 12:case"end":return t.stop()}}),t)})))()},e.prototype.getViewDataURL=function(){var e=Wn(Yn().mark((function e(t){var n;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"!==Xn(t=t||{})&&(t={format:t}),e.next=4,this.view.getCanvasDataURL(t.format,t.width,t.height);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.prototype.getViewWCS=function(e){var t=this.getRaDec(),n=this.getFov();return{NAXIS:2,NAXIS1:this.view.width,NAXIS2:this.view.height,RADECSYS:"ICRS",CRPIX1:this.view.width/2,CRPIX2:this.view.height/2,CRVAL1:t[0],CRVAL2:t[1],CTYPE1:"RA---SIN",CTYPE2:"DEC--SIN",CD1_1:n[0]/this.view.width,CD1_2:0,CD2_1:0,CD2_2:n[1]/this.view.height}},e.prototype.setFovRange=e.prototype.setFOVRange=function(e,t){if(e>t){var n=e;e=t,t=n}this.view.minFOV=e,this.view.maxFOV=t},e.prototype.pix2world=function(e,t){if(this.view)try{var n=Jn(this.wasm.screenToWorld(e,t),2),a=n[0],o=n[1];return a<0?[a+360,o]:[a,o]}catch(i){return}},e.prototype.world2pix=function(e,t){if(this.view)try{return this.wasm.worldToScreen(e,t)}catch(n){return}},e.prototype.getFovCorners=function(e){(!e||e<1)&&(e=1);for(var t,n,a,o,i=[],r=0;r<4;r++){t=0==r||3==r?0:this.view.width-1,n=r<2?0:this.view.height-1,a=r<2?this.view.width-1:0,o=1==r||2==r?this.view.height-1:0;for(var s=0;s<e;s++){var l=this.wasm.screenToWorld(t+s/e*(a-t),n+s/e*(o-n));i.push(l)}}return i},e.prototype.getFov=function(){var e=this.view.fov,t=this.getSize(),n=t[1]/t[0]*e;return[e=Math.min(e,180),n=Math.min(n,180)]},e.prototype.getSize=function(){return[this.view.width,this.view.height]},e.prototype.getParentDiv=function(){return t()(this.aladinDiv)},e}(),$n={};$n.aladin=function(e,n){return new Qn(t()(e)[0],n)},$n.source=function(e,t,n,a){return new lt(e,t,n,a)},$n.marker=function(e,t,n,a){return(n=n||{}).marker=!0,$n.source(e,t,a,n)},$n.polygon=function(e,t){var n=e.length;if(n<3)throw"Cannot define a polygon from less than 3 vertices";var a=n-1;return e[0][0]==e[a][0]&&e[0][1]==e[a][1]&&e.pop(),(t=t||{}).closed=!0,new M(e,t)},$n.polyline=function(e,t){return new M(e,t)},$n.circle=function(e,t,n,a){return new L([e,t],n,a)},$n.ellipse=function(e,t,n,a,o,i){return new D([e,t],n,a,o,i)},$n.graphicOverlay=function(e){return new O(e)},$n.catalog=function(e){return new vt(e)},$n.catalogHiPS=function(e,t){return new _t(e,null,null,t)},Qn.prototype.box=function(e){var t=new Box(e);return t.$parentDiv.appendTo(this.aladinDiv),t},Qn.prototype.showPopup=function(e,t,n,a,o){var i;this.view.catalogForPopup.removeAll(),this.view.overlayForPopup.removeAll(),void 0!==o?(this.view.overlayForPopup.add($n.circle(e,t,o,{fillColor:"rgba(255, 0, 0, 0.2)"})),i=$n.marker(e,t,{popupTitle:n,popupDesc:a,useMarkerDefaultIcon:!0})):i=$n.marker(e,t,{popupTitle:n,popupDesc:a,useMarkerDefaultIcon:!1}),this.view.catalogForPopup.addSources(i),this.view.overlayForPopup.show(),this.view.catalogForPopup.show(),this.view.popup.setTitle(n),this.view.popup.setText(a),this.view.popup.setSource(i),this.view.popup.show()},Qn.prototype.hidePopup=function(){this.view.popup.hide()},Qn.prototype.getShareURL=function(){var e=this.getRaDec(),t=new f;return t.prec=7,t.lon=e[0],t.lat=e[1],Qn.URL_PREVIEWER+"?target="+encodeURIComponent(t.format("s"))+"&fov="+this.getFov()[0].toFixed(2)+"&survey="+encodeURIComponent(this.getBaseImageLayer().id||this.getBaseImageLayer().rootUrl)},Qn.prototype.getEmbedCode=function(){var e=this.getRaDec(),t=new f;t.prec=7,t.lon=e[0],t.lat=e[1];this.getBaseImageLayer().id;var n="",a="\n";return n+='<div id="aladin-lite-div" style="width:400px;height:400px;"></div>\n',n+='<script src="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js" charset="utf-8"><\/script>\n',n+="<script>\n",n+="let aladin;\nA.init.then(() => {\n   aladin = A.aladin('#aladin-lite-div', {survey: 'P/DSS2/color', fov: "+this.getFov()[0].toFixed(2)+', target: "'+t.format("s")+'"});'+"\n});"+a,n+="<\/script>"},Qn.prototype.displayFITS=function(e,t,n,a){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"base";n=n||function(e,t,n,a){o.gotoRaDec(e,t),o.setFoV(n)};var r=this.createImageFITS(e,e,t,n,a);return this.setOverlayImageLayer(r,i)},Qn.prototype.displayJPG=Qn.prototype.displayPNG=function(e,t,n,a){(t=t||{}).color=!0,t.label="JPG/PNG image",t.outputFormat="png";var o={url:e};(t=t||{}).color&&(o.color=!0),t.outputFormat&&(o.format=t.outputFormat),t.order&&(o.order=t.order),t.nocache&&(o.nocache=t.nocache);var i=this;(function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a={method:n};return"GET"===n?e+="?"+new URLSearchParams(t).toString():a.body=JSON.stringify(t),fetch(e,a).then((function(e){return e.json()}))}(e,t,"GET")})("https://alasky.unistra.fr/cgi/fits2HiPS",o).then(function(){var e=Wn(Yn().mark((function e(o){var r,s,l,c;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("success"==o.status){e.next=4;break}return console.error("An error occured: "+o.message),a&&a(o.message),e.abrupt("return");case 4:r=t.label||"FITS image",s=o.data.meta,l=i.createImageSurvey(o.data.url,r,o.data.url),i.setOverlayImageLayer(l,"overlay"),t&&t.transparency||1,c=!0,n&&(c=n(s.ra,s.dec,s.fov)),!0===c&&(i.wasm.setCenter(s.ra,s.dec),i.setFoV(s.fov));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Qn.prototype.setReduceDeformations=function(e){this.reduceDeformations=e,this.view.requestRedraw()},$n.footprintsFromSTCS=function(e,t){return O.parseSTCS(e,t)},$n.MOCFromURL=function(e,t,n){var a=new st(t);return a.dataFromFITSURL(e,n),a},$n.MOCFromJSON=function(e,t){var n=new st(t);return n.dataFromJSON(e),n},$n.catalogFromURL=function(e,t,n,a,o){var i=$n.catalog(t);return vt.parseVOTable(e,(function(t,a,o){i.setFields(o),i.isObsCore()&&(i.name="ObsCore:"+e),ft.handleActions(i),i.addFootprints(a),i.addSources(t),n&&n(t)}),a,i.maxNbSources,o,i.raField,i.decField),i},$n.catalogFromSimbad=function(e,t,n,a,o){"name"in(n=n||{})||(n.name="Simbad");var i=nn.buildSimbadCSURL(e,t);return $n.catalogFromURL(i,n,a,o,!1)},$n.catalogFromNED=function(e,t,n,a,o){var i;if("name"in(n=n||{})||(n.name="NED"),e&&"object"===Xn(e))"ra"in e&&"dec"in e&&(i=nn.buildNEDPositionCSURL(e.ra,e.dec,t));else if(/[a-zA-Z]/.test(e))i=nn.buildNEDObjectCSURL(e,t);else{var r=new f;r.parse(e),i=nn.buildNEDPositionCSURL(r.lon,r.lat,t)}return $n.catalogFromURL(i,n,a,o,!0)},$n.catalogFromVizieR=function(e,t,n,a,o,i){"name"in(a=a||{})||(a.name="VizieR:"+e);var r=nn.buildVizieRCSURL(e,t,n,a);return $n.catalogFromURL(r,a,o,i,!1)},$n.catalogFromSkyBot=function(e,t,n,a,o,i,r,s){o=o||{},"name"in(i=i||{})||(i.name="SkyBot");var l=nn.buildSkyBotCSURL(e,t,n,a,o);return $n.catalogFromURL(l,i,r,s,!1)},$n.hipsDefinitionFromURL=function(e,t){Lt.fromURL(e,t)},$n.getAvailableListOfColormaps=function(){return $e.COLORMAPS},$n.init=Wn(Yn().mark((function e(){var t;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.createElement("canvas").getContext("webgl2")){e.next=8;break}return e.next=4,l.e(642).then(l.bind(l,642));case 4:t=e.sent,Qn.wasmLibs.core=t,e.next=9;break;case 8:throw"WebGL2 not supported by your browser";case 9:case"end":return e.stop()}}),e)})))(),window.A=$n})()})();