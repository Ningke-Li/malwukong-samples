"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const commander_1 = require("commander");
const ethers_1 = require("ethers");
const BridgeToken__factory_1 = require("@peersyst/xrp-evm-contracts/dist/typechain/factories/BridgeToken__factory");
const Logger_1 = require("../util/Logger");
const program = new commander_1.Command("deploy-token")
    .option("-w, --wallet-seed <value>", "Wallet seed")
    .option("-t, --token-code <value>", "Token code")
    .option("-n, --node <value>", "The network node", "https://rpc-evm-sidechain.peersyst.tech")
    .action(async ({ node, walletSeed, tokenCode }) => {
    if (node && walletSeed && tokenCode) {
        try {
            const provider = new ethers_1.ethers.providers.JsonRpcProvider(node);
            const signerWallet = new ethers_1.ethers.Wallet(walletSeed, provider);
            (0, Logger_1.Log)(Logger_1.LogType.Tool, Logger_1.LogStatus.ToDo, `Deploying BridgeToken with code ${tokenCode}...`);
            const bridgeTokenFactory = new BridgeToken__factory_1.BridgeToken__factory(signerWallet);
            const bridgeToken = await bridgeTokenFactory.deploy(tokenCode, `Token ${tokenCode}`);
            (0, Logger_1.Log)(Logger_1.LogType.Tool, Logger_1.LogStatus.Done, `BridgeToken deployed successfully to address ${bridgeToken.address}`);
        }
        catch (error) {
            console.log(error);
            process.exit(1);
        }
        process.exit(0);
    }
    else {
        program.help();
        process.exit(1);
    }
});
exports.default = program;
//# sourceMappingURL=DeployBridgeToken.js.map